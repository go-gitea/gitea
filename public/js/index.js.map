<<<<<<< HEAD
{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./web_src/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","htmlEncode","text","jQuery","html","csrf","suburl","previewFileModes","simpleMDEditor","codeMirrorEditor","initCommentPreviewTab","$form","$tabMenu","find","tab","data","click","$this","$","this","post","val","$previewPanel","emojify","run","each","hljs","highlightBlock","buttonsClickOnEnter","initEditForm","length","$previewTab","split","initEditPreviewTab","$diffPreviewPanel","initEditDiffTab","updateIssuesMeta","url","action","issueIds","elementId","Promise","resolve","ajax","type","success","reload","window","location","initImagePaste","target","field","addEventListener","event","pasteEvent","callback","clipboardData","items","indexOf","blob","getAsFile","preventDefault","stopPropagation","retrieveImageFromClipboardAsBlob","img","substr","lastIndexOf","selectionStart","startPos","endPos","selectionEnd","substring","insertAtCursor","file","xhr","XMLHttpRequest","onload","status","responseText","open","setRequestHeader","formData","FormData","append","send","uploadFile","res","JSON","parse","oldval","newval","replace","replaceAndKeepCursor","uuid","input","initCommentForm","initListSubmits","selector","outerSelector","$list","$noSelect","$listMenu","hasLabelUpdateAction","labels","dropdown","promises","keys","forEach","label","promise","push","all","then","hasClass","removeClass","addClass","listIds","parent","join","selectItem","select_id","input_id","$menu","hasUpdateAction","$selectBranch","selectedValue","css","initBranchSelector","initRepository","initFilterSearchDropdown","$dropdown","fullTextSearch","selectOnKeydown","onChange","_text","_value","$choice","href","message","noResults","$data","searchTerm","canCreateBranch","menuVisible","active","branch","tag","selected","remove","Vue","delimiters","el","beforeMount","vm","$el","getAttribute","document","body","contains","set","watch","visible","focusSearchField","computed","filteredItems","filter","item","toLowerCase","showCreateNewBranch","showNoResults","methods","prev","getSelected","createNewBranch","$refs","newBranchForm","submit","nextTick","searchField","focus","j","getSelectedIndexInFiltered","scrollToActive","Array","isArray","cont","scrollContainer","offsetTop","scrollTop","clientHeight","keydown","keyCode","keyup","$prompt","toString","show","hide","change","checked","$newLabelPanel","minicolors","color_hex","modal","onApprove","$datepicker","datetimepicker","lang","inline","timepicker","startDate","formatDate","onSelectDate","ct","dateFormat","$issueTitle","$editInput","editTitleToggle","toggle","title","$segment","next","$editContentZone","$renderContent","$rawContent","$textarea","issuesTribute","attach","emojiTribute","$dropzone","$files","filenameDict","dropzone","headers","maxFiles","maxFilesize","acceptedFiles","addRemoveLinks","dictDefaultMessage","dictInvalidFileType","dictFileTooBig","dictRemoveFile","init","on","submitted","_csrf","getJSON","drop","removeAllFiles","empty","imgSrc","emit","files","$editContentForm","attr","$attachments","map","content","$content","attachments","confirm","$statusButton","$mergeButton","e","closest","initReactionSelector","reactions","popup","done","resp","react","insertBefore","appendTo","hasEmoji","$item","addLine","delLine","addPercent","parseFloat","localStorage","setItem","select","$repoComparePull","assingMenuAttributes","menu","id","Math","floor","random","initRepositoryCollaboration","initEditor","prop","$editFilename","$section","$divider","parts","getCursorPosition","last","setSelectionRange","element","trigger","$editArea","markdownFileExts","lineWrapExtensions","spec","extension","extWithDot","dataUrl","apiCall","exec","info","CodeMirror","findModeByExtension","previewLink","mime","toTextArea","SimpleMDE","autoDownloadFontAwesome","forceSync","renderingConfig","singleLineBreaks","indentWithTabs","tabSize","spellChecker","previewRender","plainText","preview","setTimeout","innerHTML","toolbar","setSimpleMDE","fromTextArea","lineNumbers","cm","_change","getValue","setCodeMirror","setOption","autoLoadMode","editorconfig","indent_style","Tab","spaces","parseInt","getOption","replaceSelection","indent_size","tab_width","$commitButton","$editForm","areYouSure","silent","dirtyClass","fieldSelector","dirty","initUserSettings","keypress","initCodeView","$select","siblings","selectRange","shiftKey","eq","getSelection","removeAllRanges","selection","hash","match","$first","offset","top","u2fSigned","stringify","contentType","fail","u2fError","u2fRegistered","errorCode","checkError","errorType","u2fErrors","1","2","3","4","5","u2fRegisterRequest","req","registeredKeys","u2fApi","register","appId","registerRequests","catch","reason","undefined","metaData","code","changeHash","history","pushState","$from","a","b","classes","showDeletePopup","dialog","closable","redirect","showAddAllPopup","Dropzone","autoDiscover","from","toStr","isCallable","fn","maxSafeInteger","pow","toLength","len","number","Number","isNaN","isFinite","abs","toInteger","min","max","arrayLike","C","TypeError","mapFn","arguments","T","A","kValue","k","assign","_varArgs","to","index","nextSource","nextKey","writable","configurable","String","endsWith","pattern","pos","Sel","createRange","SelLength","moveStart","ready","onShow","transition","direction","accordion","checkbox","progress","showActivity","slideToggle","nodes","slice","querySelectorAll","setConfig","img_dir","ignore_emoticons","getElementsByClassName","childNodes","nodeName","clipboard","Clipboard","clearSelection","setAttribute","node","encodeURIComponent","wrap","children","dataset","issueIDs","issueId","_","first","search","minCharacters","apiSettings","onResponse","response","_i","login","full_name","image","avatar_url","results","searchFields","$searchTeamBox","permission","searchTeams","$searchRepoBox","description","searchRepositories","dbType","dbDefaults","_type","defaultHost","is","toggleMigrations","authUserName","cloneAddr","startsWith","initMigration","simplemde","codemirror","cursorPos","getCursor","setCursor","line","ch","className","getInputField","initWikiForm","updateContentType","initWebhook","removeAttr","authType","onOAuth2Change","onSecurityProtocolChange","onUsePagedSearchChange","onOAuth2UseCustomURLChange","$detailModal","$checkboxes","ids","provider","initAdmin","getElementById","component","props","searchLimit","default","required","uid","organizations","isOrganization","Boolean","canCreateOrganization","organizationsTotalCount","moreReposLink","repos","reposTotalCount","reposFilter","searchQuery","isLoading","repoTypes","count","searchMode","showMoreReposLink","searchURL","repoTypeCount","mounted","searchRepos","self","changeTab","changeReposFilter","showRepo","repo","owner","mirror","fork","searchedMode","searchedURL","searchedQuery","result","_textStatus","request","getResponseHeader","always","repoClass","private","querySelector","initVueApp","ctrlKey","altKey","metaKey","isExpanded","initNavbarContentToggle","mgrBtn","editDiv","viewDiv","saveBtn","topicDropdown","topicForm","topicPrompts","hidePrompt","prompts","countPrompt","formatPrompt","getPrompts","topics","_data","responseJSON","topicArray","invalidTopics","topicLables","form","allowAdditions","forceSelection","fields","saveRemoteData","duration","variation","blue","basic","throttle","cache","formattedResponse","query","urlData","trim","found_query","current_topics","found","topic_name","unshift","sort","onLabelCreate","contents","replaceWith","onAdd","addedValue","_addedText","$addedChoice","settings","rules","validateTopic","_values","regExp","identifier","prompt","initTopicbar","ensureSupport","sign","challenge","err","allowMultiple","repolink","repoId","crossRepoSearch","issueSearchUrl","filteredResponse","currIssueId","issue","repository","regStr","newStr","RegExp","selectedItems","initIssueList","toUpperCase","wipPrefixes","sticky","isSplit","side","idx","path","tr","ntr","after","td","commentCloud","initRepoStatusChecker","migrating","repo_name","complete","$repoTemplate","checkTemplate","$templateUnits","$nonTemplate","changeOwner","_r","initTemplateSearch","getItem","routes","$cloneAddr","$repoName","arrays","$title","timeAddManual","toggleStopwatch","cancelStopwatch","initHeatmap","appElementId","heatmapUser","locale","contributions","no_contributions","vueDelimeters","user","colorRange","endDate","values","totalContributions","getColor","Date","loadHeatmap","userName","chartRawData","chartData","date","timestamp","createElement","appendChild","color","getComputedStyle","backgroundColor","removeChild","template","toggleDeadlineForm","fadeToggle","setDeadline","deadline","updateDeadline","deadlineString","realDeadline","newDate","error","deleteDependencyModal","cancelCodeComment","btn","onOAuthLoginClick","oauthLoader","oauthNav"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* globals wipPrefixes, issuesTribute, emojiTribute */\n/* exported timeAddManual, toggleStopwatch, cancelStopwatch, initHeatmap */\n/* exported toggleDeadlineForm, setDeadline, deleteDependencyModal, cancelCodeComment, onOAuthLoginClick */\n'use strict';\n\nfunction htmlEncode(text) {\n   return jQuery('<div />').text(text).html()\n}\n\nlet csrf;\nlet suburl;\nlet previewFileModes;\nlet simpleMDEditor;\nlet codeMirrorEditor;\n\n// Disable Dropzone auto-discover because it's manually initialized\nif (typeof(Dropzone) !== \"undefined\") {\n    Dropzone.autoDiscover = false;\n}\n\n// Polyfill for IE9+ support (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)\nif (!Array.from) {\n    Array.from = (function () {\n        const toStr = Object.prototype.toString;\n        const isCallable = function (fn) {\n            return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n        };\n        const toInteger = function (value) {\n            const number = Number(value);\n            if (isNaN(number)) { return 0; }\n            if (number === 0 || !isFinite(number)) { return number; }\n            return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n        };\n        const maxSafeInteger = Math.pow(2, 53) - 1;\n        const toLength = function (value) {\n            const len = toInteger(value);\n            return Math.min(Math.max(len, 0), maxSafeInteger);\n        };\n\n        // The length property of the from method is 1.\n        return function from(arrayLike/*, mapFn, thisArg */) {\n            // 1. Let C be the this value.\n            const C = this;\n\n            // 2. Let items be ToObject(arrayLike).\n            const items = Object(arrayLike);\n\n            // 3. ReturnIfAbrupt(items).\n            if (arrayLike == null) {\n                throw new TypeError(\"Array.from requires an array-like object - not null or undefined\");\n            }\n\n            // 4. If mapfn is undefined, then let mapping be false.\n            const mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n            let T;\n            if (typeof mapFn !== 'undefined') {\n                // 5. else\n                // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n                if (!isCallable(mapFn)) {\n                    throw new TypeError('Array.from: when provided, the second argument must be a function');\n                }\n\n                // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n                if (arguments.length > 2) {\n                    T = arguments[2];\n                }\n            }\n\n            // 10. Let lenValue be Get(items, \"length\").\n            // 11. Let len be ToLength(lenValue).\n            const len = toLength(items.length);\n\n            // 13. If IsConstructor(C) is true, then\n            // 13. a. Let A be the result of calling the [[Construct]] internal method of C with an argument list containing the single item len.\n            // 14. a. Else, Let A be ArrayCreate(len).\n            const A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n            // 16. Let k be 0.\n            let k = 0;\n            // 17. Repeat, while k < len (also steps a - h)\n            let kValue;\n            while (k < len) {\n                kValue = items[k];\n                if (mapFn) {\n                    A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n                } else {\n                    A[k] = kValue;\n                }\n                k += 1;\n            }\n            // 18. Let putStatus be Put(A, \"length\", len, true).\n            A.length = len;\n            // 20. Return A.\n            return A;\n        };\n    }());\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nif (typeof Object.assign != 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, \"assign\", {\n        value: function assign(target, _varArgs) { // .length of function is 2\n            'use strict';\n            if (target == null) { // TypeError if undefined or null\n                throw new TypeError('Cannot convert undefined or null to object');\n            }\n\n            const to = Object(target);\n\n            for (let index = 1; index < arguments.length; index++) {\n                const nextSource = arguments[index];\n\n                if (nextSource != null) { // Skip over if undefined or null\n                    for (const nextKey in nextSource) {\n                        // Avoid bugs when hasOwnProperty is shadowed\n                        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                            to[nextKey] = nextSource[nextKey];\n                        }\n                    }\n                }\n            }\n            return to;\n        },\n        writable: true,\n        configurable: true\n    });\n}\n\nfunction initCommentPreviewTab($form) {\n    const $tabMenu = $form.find('.tabular.menu');\n    $tabMenu.find('.item').tab();\n    $tabMenu.find('.item[data-tab=\"' + $tabMenu.data('preview') + '\"]').click(function () {\n        const $this = $(this);\n        $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"mode\": \"gfm\",\n                \"context\": $this.data('context'),\n                \"text\": $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('write') + '\"] textarea').val()\n            },\n            function (data) {\n                const $previewPanel = $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('preview') + '\"]');\n                $previewPanel.html(data);\n                emojify.run($previewPanel[0]);\n                $('pre code', $previewPanel[0]).each(function () {\n                    hljs.highlightBlock(this);\n                });\n            }\n        );\n    });\n\n    buttonsClickOnEnter();\n}\n\nfunction initEditPreviewTab($form) {\n    const $tabMenu = $form.find('.tabular.menu');\n    $tabMenu.find('.item').tab();\n    const $previewTab = $tabMenu.find('.item[data-tab=\"' + $tabMenu.data('preview') + '\"]');\n    if ($previewTab.length) {\n        previewFileModes = $previewTab.data('preview-file-modes').split(',');\n        $previewTab.click(function () {\n            const $this = $(this);\n            $.post($this.data('url'), {\n                    \"_csrf\": csrf,\n                    \"mode\": \"gfm\",\n                    \"context\": $this.data('context'),\n                    \"text\": $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('write') + '\"] textarea').val()\n                },\n                function (data) {\n                    const $previewPanel = $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('preview') + '\"]');\n                    $previewPanel.html(data);\n                    emojify.run($previewPanel[0]);\n                    $('pre code', $previewPanel[0]).each(function () {\n                        hljs.highlightBlock(this);\n                    });\n                }\n            );\n        });\n    }\n}\n\nfunction initEditDiffTab($form) {\n    const $tabMenu = $form.find('.tabular.menu');\n    $tabMenu.find('.item').tab();\n    $tabMenu.find('.item[data-tab=\"' + $tabMenu.data('diff') + '\"]').click(function () {\n        const $this = $(this);\n        $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"context\": $this.data('context'),\n                \"content\": $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('write') + '\"] textarea').val()\n            },\n            function (data) {\n                const $diffPreviewPanel = $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('diff') + '\"]');\n                $diffPreviewPanel.html(data);\n                emojify.run($diffPreviewPanel[0]);\n            }\n        );\n    });\n}\n\n\nfunction initEditForm() {\n    if ($('.edit.form').length == 0) {\n        return;\n    }\n\n    initEditPreviewTab($('.edit.form'));\n    initEditDiffTab($('.edit.form'));\n}\n\nfunction initBranchSelector() {\n    const $selectBranch = $('.ui.select-branch')\n    const $branchMenu = $selectBranch.find('.reference-list-menu');\n    $branchMenu.find('.item:not(.no-select)').click(function () {\n        const selectedValue = $(this).data('id');\n        $($(this).data('id-selector')).val(selectedValue);\n        $selectBranch.find('.ui .branch-name').text(selectedValue);\n    });\n    $selectBranch.find('.reference.column').click(function () {\n        $selectBranch.find('.scrolling.reference-list-menu').css('display', 'none');\n        $selectBranch.find('.reference .text').removeClass('black');\n        $($(this).data('target')).css('display', 'block');\n        $(this).find('.text').addClass('black');\n        return false;\n    });\n}\n\nfunction updateIssuesMeta(url, action, issueIds, elementId) {\n    return new Promise(function(resolve) {\n        $.ajax({\n            type: \"POST\",\n            url: url,\n            data: {\n                \"_csrf\": csrf,\n                \"action\": action,\n                \"issue_ids\": issueIds,\n                \"id\": elementId\n            },\n            success: resolve\n        })\n    })\n}\n\nfunction initRepoStatusChecker() {\n    const migrating = $(\"#repo_migrating\");\n    $('#repo_migrating_failed').hide();\n    if (migrating) {\n        const repo_name = migrating.attr('repo');\n        if (typeof repo_name === 'undefined') {\n            return\n        }\n        $.ajax({\n            type: \"GET\",\n            url: suburl +\"/\"+repo_name+\"/status\",\n            data: {\n                \"_csrf\": csrf,\n            },\n            complete: function(xhr) {\n                if (xhr.status == 200) {\n                    if (xhr.responseJSON) {\n                        if (xhr.responseJSON[\"status\"] == 0) {\n                            location.reload();\n                            return\n                        }\n\n                        setTimeout(function () {\n                            initRepoStatusChecker()\n                        }, 2000);\n                        return\n                    }\n                }\n                $('#repo_migrating_progress').hide();\n                $('#repo_migrating_failed').show();\n            }\n        })\n    }\n}\n\nfunction initReactionSelector(parent) {\n    let reactions = '';\n    if (!parent) {\n        parent = $(document);\n        reactions = '.reactions > ';\n    }\n\n    parent.find(reactions + 'a.label').popup({'position': 'bottom left', 'metadata': {'content': 'title', 'title': 'none'}});\n\n    parent.find('.select-reaction > .menu > .item, ' + reactions + 'a.label').on('click', function(e){\n        const vm = this;\n        e.preventDefault();\n\n        if ($(this).hasClass('disabled')) return;\n\n        const actionURL = $(this).hasClass('item') ?\n                $(this).closest('.select-reaction').data('action-url') :\n                $(this).data('action-url');\n        const url = actionURL + '/' + ($(this).hasClass('blue') ? 'unreact' : 'react');\n        $.ajax({\n            type: 'POST',\n            url: url,\n            data: {\n                '_csrf': csrf,\n                'content': $(this).data('content')\n            }\n        }).done(function(resp) {\n            if (resp && (resp.html || resp.empty)) {\n                const content = $(vm).closest('.content');\n                let react = content.find('.segment.reactions');\n                if (!resp.empty && react.length > 0) {\n                    react.remove();\n                }\n                if (!resp.empty) {\n                    react = $('<div class=\"ui attached segment reactions\"></div>');\n                    const attachments = content.find('.segment.bottom:first');\n                    if (attachments.length > 0) {\n                        react.insertBefore(attachments);\n                    } else {\n                        react.appendTo(content);\n                    }\n                    react.html(resp.html);\n                    const hasEmoji = react.find('.has-emoji');\n                    for (let i = 0; i < hasEmoji.length; i++) {\n                        emojify.run(hasEmoji.get(i));\n                    }\n                    react.find('.dropdown').dropdown();\n                    initReactionSelector(react);\n                }\n            }\n        });\n    });\n}\n\nfunction insertAtCursor(field, value) {\n    if (field.selectionStart || field.selectionStart === 0) {\n        const startPos = field.selectionStart;\n        const endPos = field.selectionEnd;\n        field.value = field.value.substring(0, startPos)\n            + value\n            + field.value.substring(endPos, field.value.length);\n        field.selectionStart = startPos + value.length;\n        field.selectionEnd = startPos + value.length;\n    } else {\n        field.value += value;\n    }\n}\n\nfunction replaceAndKeepCursor(field, oldval, newval) {\n    if (field.selectionStart || field.selectionStart === 0) {\n        const startPos = field.selectionStart;\n        const endPos = field.selectionEnd;\n        field.value = field.value.replace(oldval, newval);\n        field.selectionStart = startPos + newval.length - oldval.length;\n        field.selectionEnd = endPos + newval.length - oldval.length;\n    } else {\n        field.value = field.value.replace(oldval, newval);\n    }\n}\n\nfunction retrieveImageFromClipboardAsBlob(pasteEvent, callback){\n    if (!pasteEvent.clipboardData) {\n        return;\n    }\n\n    const items = pasteEvent.clipboardData.items;\n    if (typeof(items) === \"undefined\") {\n        return;\n    }\n\n    for (let i = 0; i < items.length; i++) {\n        if (items[i].type.indexOf(\"image\") === -1) continue;\n        const blob = items[i].getAsFile();\n\n        if (typeof(callback) === \"function\") {\n            pasteEvent.preventDefault();\n            pasteEvent.stopPropagation();\n            callback(blob);\n        }\n    }\n}\n\nfunction uploadFile(file, callback) {\n    const xhr = new XMLHttpRequest();\n\n    xhr.onload = function() {\n        if (xhr.status == 200) {\n            callback(xhr.responseText);\n        }\n    };\n\n    xhr.open(\"post\", suburl + \"/attachments\", true);\n    xhr.setRequestHeader(\"X-Csrf-Token\", csrf);\n    const formData = new FormData();\n    formData.append('file', file, file.name);\n    xhr.send(formData);\n}\n\nfunction reload() {\n    window.location.reload();\n}\n\nfunction initImagePaste(target) {\n    target.each(function() {\n        const field = this;\n        field.addEventListener('paste', function(event){\n            retrieveImageFromClipboardAsBlob(event, function(img) {\n                const name = img.name.substr(0, img.name.lastIndexOf('.'));\n                insertAtCursor(field, '![' + name + ']()');\n                uploadFile(img, function(res) {\n                    const data = JSON.parse(res);\n                    replaceAndKeepCursor(field, '![' + name + ']()', '![' + name + '](' + suburl + '/attachments/' + data.uuid + ')');\n                    const input = $('<input id=\"' + data.uuid + '\" name=\"files\" type=\"hidden\">').val(data.uuid);\n                    $('.files').append(input);\n                });\n            });\n        }, false);\n    });\n}\n\nfunction initCommentForm() {\n    if ($('.comment.form').length == 0) {\n        return\n    }\n\n    initBranchSelector();\n    initCommentPreviewTab($('.comment.form'));\n    initImagePaste($('.comment.form textarea'));\n\n    // Listsubmit\n    function initListSubmits(selector, outerSelector) {\n        const $list = $('.ui.' + outerSelector + '.list');\n        const $noSelect = $list.find('.no-select');\n        const $listMenu = $('.' + selector + ' .menu');\n        let hasLabelUpdateAction = $listMenu.data('action') == 'update';\n        const labels = {};\n\n        $('.' + selector).dropdown('setting', 'onHide', function(){\n            hasLabelUpdateAction = $listMenu.data('action') == 'update'; // Update the var\n            if (hasLabelUpdateAction) {\n                const promises = [];\n                Object.keys(labels).forEach(function(elementId) {\n                    const label = labels[elementId];\n                    const promise = updateIssuesMeta(\n                        label[\"update-url\"],\n                        label[\"action\"],\n                        label[\"issue-id\"],\n                        elementId\n                    );\n                    promises.push(promise);\n                });\n                Promise.all(promises).then(reload);\n            }\n        });\n\n        $listMenu.find('.item:not(.no-select)').click(function () {\n\n            // we don't need the action attribute when updating assignees\n            if (selector == 'select-assignees-modify') {\n\n                // UI magic. We need to do this here, otherwise it would destroy the functionality of\n                // adding/removing labels\n                if ($(this).hasClass('checked')) {\n                    $(this).removeClass('checked');\n                    $(this).find('.octicon').removeClass('octicon-check');\n                } else {\n                    $(this).addClass('checked');\n                    $(this).find('.octicon').addClass('octicon-check');\n                }\n\n                updateIssuesMeta(\n                    $listMenu.data('update-url'),\n                    \"\",\n                    $listMenu.data('issue-id'),\n                    $(this).data('id')\n                );\n                $listMenu.data('action', 'update'); // Update to reload the page when we updated items\n                return false;\n            }\n\n            if ($(this).hasClass('checked')) {\n                $(this).removeClass('checked');\n                $(this).find('.octicon').removeClass('octicon-check');\n                if (hasLabelUpdateAction) {\n                    if (!($(this).data('id') in labels)) {\n                        labels[$(this).data('id')] = {\n                            \"update-url\": $listMenu.data('update-url'),\n                            \"action\": \"detach\",\n                            \"issue-id\": $listMenu.data('issue-id'),\n                        };\n                    } else {\n                        delete labels[$(this).data('id')];\n                    }\n                }\n            } else {\n                $(this).addClass('checked');\n                $(this).find('.octicon').addClass('octicon-check');\n                if (hasLabelUpdateAction) {\n                    if (!($(this).data('id') in labels)) {\n                        labels[$(this).data('id')] = {\n                            \"update-url\": $listMenu.data('update-url'),\n                            \"action\": \"attach\",\n                            \"issue-id\": $listMenu.data('issue-id'),\n                        };\n                    } else {\n                        delete labels[$(this).data('id')];\n                    }\n                }\n            }\n\n            const listIds = [];\n            $(this).parent().find('.item').each(function () {\n                if ($(this).hasClass('checked')) {\n                    listIds.push($(this).data('id'));\n                    $($(this).data('id-selector')).removeClass('hide');\n                } else {\n                    $($(this).data('id-selector')).addClass('hide');\n                }\n            });\n            if (listIds.length == 0) {\n                $noSelect.removeClass('hide');\n            } else {\n                $noSelect.addClass('hide');\n            }\n            $($(this).parent().data('id')).val(listIds.join(\",\"));\n            return false;\n        });\n        $listMenu.find('.no-select.item').click(function () {\n            if (hasLabelUpdateAction || selector == 'select-assignees-modify') {\n                updateIssuesMeta(\n                    $listMenu.data('update-url'),\n                    \"clear\",\n                    $listMenu.data('issue-id'),\n                    \"\"\n                ).then(reload);\n            }\n\n            $(this).parent().find('.item').each(function () {\n                $(this).removeClass('checked');\n                $(this).find('.octicon').removeClass('octicon-check');\n            });\n\n            $list.find('.item').each(function () {\n                $(this).addClass('hide');\n            });\n            $noSelect.removeClass('hide');\n            $($(this).parent().data('id')).val('');\n\n        });\n    }\n\n    // Init labels and assignees\n    initListSubmits('select-label', 'labels');\n    initListSubmits('select-assignees', 'assignees');\n    initListSubmits('select-assignees-modify', 'assignees');\n\n    function selectItem(select_id, input_id) {\n        const $menu = $(select_id + ' .menu');\n        const $list = $('.ui' + select_id + '.list');\n        const hasUpdateAction = $menu.data('action') == 'update';\n\n        $menu.find('.item:not(.no-select)').click(function () {\n            $(this).parent().find('.item').each(function () {\n                $(this).removeClass('selected active')\n            });\n\n            $(this).addClass('selected active');\n            if (hasUpdateAction) {\n                updateIssuesMeta(\n                    $menu.data('update-url'),\n                    \"\",\n                    $menu.data('issue-id'),\n                    $(this).data('id')\n                ).then(reload);\n            }\n            switch (input_id) {\n                case '#milestone_id':\n                    $list.find('.selected').html('<a class=\"item\" href=' + $(this).data('href') + '>' +\n                        htmlEncode($(this).text()) + '</a>');\n                    break;\n                case '#assignee_id':\n                    $list.find('.selected').html('<a class=\"item\" href=' + $(this).data('href') + '>' +\n                        '<img class=\"ui avatar image\" src=' + $(this).data('avatar') + '>' +\n                        htmlEncode($(this).text()) + '</a>');\n            }\n            $('.ui' + select_id + '.list .no-select').addClass('hide');\n            $(input_id).val($(this).data('id'));\n        });\n        $menu.find('.no-select.item').click(function () {\n            $(this).parent().find('.item:not(.no-select)').each(function () {\n                $(this).removeClass('selected active')\n            });\n\n            if (hasUpdateAction) {\n                updateIssuesMeta(\n                    $menu.data('update-url'),\n                    \"\",\n                    $menu.data('issue-id'),\n                    $(this).data('id')\n                ).then(reload);\n            }\n\n            $list.find('.selected').html('');\n            $list.find('.no-select').removeClass('hide');\n            $(input_id).val('');\n        });\n    }\n\n    // Milestone and assignee\n    selectItem('.select-milestone', '#milestone_id');\n    selectItem('.select-assignee', '#assignee_id');\n}\n\nfunction initInstall() {\n    if ($('.install').length == 0) {\n        return;\n    }\n\n    if ($('#db_host').val()==\"\") {\n        $('#db_host').val(\"127.0.0.1:3306\");\n        $('#db_user').val(\"gitea\");\n        $('#db_name').val(\"gitea\");\n    }\n\n    // Database type change detection.\n    $(\"#db_type\").change(function () {\n        const sqliteDefault = 'data/gitea.db';\n        const tidbDefault = 'data/gitea_tidb';\n\n        const dbType = $(this).val();\n        if (dbType === \"SQLite3\") {\n            $('#sql_settings').hide();\n            $('#pgsql_settings').hide();\n            $('#mysql_settings').hide();\n            $('#sqlite_settings').show();\n\n            if (dbType === \"SQLite3\" && $('#db_path').val() == tidbDefault) {\n                $('#db_path').val(sqliteDefault);\n            }\n            return;\n        }\n\n        const dbDefaults = {\n            \"MySQL\": \"127.0.0.1:3306\",\n            \"PostgreSQL\": \"127.0.0.1:5432\",\n            \"MSSQL\": \"127.0.0.1:1433\"\n        };\n\n        $('#sqlite_settings').hide();\n        $('#sql_settings').show();\n\n        $('#pgsql_settings').toggle(dbType === \"PostgreSQL\");\n        $('#mysql_settings').toggle(dbType === \"MySQL\");\n        $.each(dbDefaults, function(_type, defaultHost) {\n            if ($('#db_host').val() == defaultHost) {\n                $('#db_host').val(dbDefaults[dbType]);\n                return false;\n            }\n        });\n    });\n\n    // TODO: better handling of exclusive relations.\n    $('#offline-mode input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#disable-gravatar').checkbox('check');\n            $('#federated-avatar-lookup').checkbox('uncheck');\n        }\n    });\n    $('#disable-gravatar input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#federated-avatar-lookup').checkbox('uncheck');\n        } else {\n            $('#offline-mode').checkbox('uncheck');\n        }\n    });\n    $('#federated-avatar-lookup input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#disable-gravatar').checkbox('uncheck');\n            $('#offline-mode').checkbox('uncheck');\n        }\n    });\n    $('#enable-openid-signin input').change(function () {\n        if ($(this).is(':checked')) {\n            if (!$('#disable-registration input').is(':checked')) {\n                $('#enable-openid-signup').checkbox('check');\n            }\n        } else {\n            $('#enable-openid-signup').checkbox('uncheck');\n        }\n    });\n    $('#disable-registration input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#enable-captcha').checkbox('uncheck');\n            $('#enable-openid-signup').checkbox('uncheck');\n        } else {\n            $('#enable-openid-signup').checkbox('check');\n        }\n    });\n    $('#enable-captcha input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#disable-registration').checkbox('uncheck');\n        }\n    });\n}\n\nfunction initRepository() {\n    if ($('.repository').length == 0) {\n        return;\n    }\n\n    function initFilterSearchDropdown(selector) {\n        const $dropdown = $(selector);\n        $dropdown.dropdown({\n            fullTextSearch: true,\n            selectOnKeydown: false,\n            onChange: function (_text, _value, $choice) {\n                if ($choice.data('url')) {\n                    window.location.href = $choice.data('url');\n                }\n            },\n            message: {noResults: $dropdown.data('no-results')}\n        });\n    }\n\n    // File list and commits\n    if ($('.repository.file.list').length > 0 ||\n        ('.repository.commits').length > 0) {\n        initFilterBranchTagDropdown('.choose.reference .dropdown');\n    }\n\n    // Wiki\n    if ($('.repository.wiki.view').length > 0) {\n        initFilterSearchDropdown('.choose.page .dropdown');\n    }\n\n    // Options\n    if ($('.repository.settings.options').length > 0) {\n        $('#repo_name').keyup(function () {\n            const $prompt = $('#repo-name-change-prompt');\n            if ($(this).val().toString().toLowerCase() != $(this).data('name').toString().toLowerCase()) {\n                $prompt.show();\n            } else {\n                $prompt.hide();\n            }\n        });\n\n        // Enable or select internal/external wiki system and issue tracker.\n        $('.enable-system').change(function () {\n            if (this.checked) {\n                $($(this).data('target')).removeClass('disabled');\n                if (!$(this).data('context')) $($(this).data('context')).addClass('disabled');\n            } else {\n                $($(this).data('target')).addClass('disabled');\n                if (!$(this).data('context')) $($(this).data('context')).removeClass('disabled');\n            }\n        });\n        $('.enable-system-radio').change(function () {\n            if (this.value == 'false') {\n                $($(this).data('target')).addClass('disabled');\n                if (typeof $(this).data('context') !== 'undefined') $($(this).data('context')).removeClass('disabled');\n            } else if (this.value == 'true') {\n                $($(this).data('target')).removeClass('disabled');\n                if (typeof $(this).data('context') !== 'undefined')  $($(this).data('context')).addClass('disabled');\n            }\n        });\n    }\n\n    // Labels\n    if ($('.repository.labels').length > 0) {\n        // Create label\n        const $newLabelPanel = $('.new-label.segment');\n        $('.new-label.button').click(function () {\n            $newLabelPanel.show();\n        });\n        $('.new-label.segment .cancel').click(function () {\n            $newLabelPanel.hide();\n        });\n\n        $('.color-picker').each(function () {\n            $(this).minicolors();\n        });\n        $('.precolors .color').click(function () {\n            const color_hex = $(this).data('color-hex');\n            $('.color-picker').val(color_hex);\n            $('.minicolors-swatch-color').css(\"background-color\", color_hex);\n        });\n        $('.edit-label-button').click(function () {\n            $('#label-modal-id').val($(this).data('id'));\n            $('.edit-label .new-label-input').val($(this).data('title'));\n            $('.edit-label .new-label-desc-input').val($(this).data('description'));\n            $('.edit-label .color-picker').val($(this).data('color'));\n            $('.minicolors-swatch-color').css(\"background-color\", $(this).data('color'));\n            $('.edit-label.modal').modal({\n                onApprove: function () {\n                    $('.edit-label.form').submit();\n                }\n            }).modal('show');\n            return false;\n        });\n    }\n\n    // Milestones\n    if ($('.repository.new.milestone').length > 0) {\n        const $datepicker = $('.milestone.datepicker');\n        $datepicker.datetimepicker({\n            lang: $datepicker.data('lang'),\n            inline: true,\n            timepicker: false,\n            startDate: $datepicker.data('start-date'),\n            formatDate: 'Y-m-d',\n            onSelectDate: function (ct) {\n                $('#deadline').val(ct.dateFormat('Y-m-d'));\n            }\n        });\n        $('#clear-date').click(function () {\n            $('#deadline').val('');\n            return false;\n        });\n    }\n\n    // Issues\n    if ($('.repository.view.issue').length > 0) {\n        // Edit issue title\n        const $issueTitle = $('#issue-title');\n        const $editInput = $('#edit-title-input input');\n        const editTitleToggle = function () {\n            $issueTitle.toggle();\n            $('.not-in-edit').toggle();\n            $('#edit-title-input').toggle();\n            $('.in-edit').toggle();\n            $editInput.focus();\n            return false;\n        };\n        $('#edit-title').click(editTitleToggle);\n        $('#cancel-edit-title').click(editTitleToggle);\n        $('#save-edit-title').click(editTitleToggle).click(function () {\n            if ($editInput.val().length == 0 ||\n                $editInput.val() == $issueTitle.text()) {\n                $editInput.val($issueTitle.text());\n                return false;\n            }\n\n            $.post($(this).data('update-url'), {\n                    \"_csrf\": csrf,\n                    \"title\": $editInput.val()\n                },\n                function (data) {\n                    $editInput.val(data.title);\n                    $issueTitle.text(data.title);\n                    reload();\n                });\n            return false;\n        });\n\n        // Edit issue or comment content\n        $('.edit-content').click(function () {\n            const $segment = $(this).parent().parent().parent().next();\n            const $editContentZone = $segment.find('.edit-content-zone');\n            const $renderContent = $segment.find('.render-content');\n            const $rawContent = $segment.find('.raw-content');\n            let $textarea;\n\n            // Setup new form\n            if ($editContentZone.html().length == 0) {\n                $editContentZone.html($('#edit-content-form').html());\n                $textarea = $editContentZone.find('textarea');\n                issuesTribute.attach($textarea.get());\n                emojiTribute.attach($textarea.get());\n\n                const $dropzone = $editContentZone.find('.dropzone');\n                $dropzone.data(\"saved\", false);\n                const $files = $editContentZone.find('.comment-files');\n                if ($dropzone.length > 0) {\n                    const filenameDict = {};\n                    $dropzone.dropzone({\n                        url: $dropzone.data('upload-url'),\n                        headers: {\"X-Csrf-Token\": csrf},\n                        maxFiles: $dropzone.data('max-file'),\n                        maxFilesize: $dropzone.data('max-size'),\n                        acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n                        addRemoveLinks: true,\n                        dictDefaultMessage: $dropzone.data('default-message'),\n                        dictInvalidFileType: $dropzone.data('invalid-input-type'),\n                        dictFileTooBig: $dropzone.data('file-too-big'),\n                        dictRemoveFile: $dropzone.data('remove-file'),\n                        init: function () {\n                            this.on(\"success\", function (file, data) {\n                                filenameDict[file.name] = {\n                                    \"uuid\": data.uuid,\n                                    \"submitted\": false\n                                }\n                                const input = $('<input id=\"' + data.uuid + '\" name=\"files\" type=\"hidden\">').val(data.uuid);\n                                $files.append(input);\n                            });\n                            this.on(\"removedfile\", function (file) {\n                                if (!(file.name in filenameDict)) {\n                                    return;\n                                }\n                                $('#' + filenameDict[file.name].uuid).remove();\n                                if ($dropzone.data('remove-url') && $dropzone.data('csrf') && !filenameDict[file.name].submitted) {\n                                    $.post($dropzone.data('remove-url'), {\n                                        file: filenameDict[file.name].uuid,\n                                        _csrf: $dropzone.data('csrf')\n                                    });\n                                }\n                            });\n                            this.on(\"submit\", function () {\n                                $.each(filenameDict, function(name){\n                                    filenameDict[name].submitted = true;\n                                });\n                            });\n                            this.on(\"reload\", function (){\n                                $.getJSON($editContentZone.data('attachment-url'), function(data){\n                                    const drop = $dropzone.get(0).dropzone;\n                                    drop.removeAllFiles(true);\n                                    $files.empty();\n                                    $.each(data, function(){\n                                        const imgSrc =  $dropzone.data('upload-url') + \"/\" + this.uuid;\n                                        drop.emit(\"addedfile\", this);\n                                        drop.emit(\"thumbnail\", this, imgSrc);\n                                        drop.emit(\"complete\", this);\n                                        drop.files.push(this);\n                                        filenameDict[this.name] = {\n                                            \"submitted\": true,\n                                            \"uuid\": this.uuid\n                                        }\n                                        $dropzone.find(\"img[src='\" + imgSrc + \"']\").css(\"max-width\", \"100%\");\n                                        const input = $('<input id=\"' + this.uuid + '\" name=\"files\" type=\"hidden\">').val(this.uuid);\n                                        $files.append(input);\n                                    });\n                                });\n                            });\n                        }\n                    });\n                    $dropzone.get(0).dropzone.emit(\"reload\");\n                }\n                // Give new write/preview data-tab name to distinguish from others\n                const $editContentForm = $editContentZone.find('.ui.comment.form');\n                const $tabMenu = $editContentForm.find('.tabular.menu');\n                $tabMenu.attr('data-write', $editContentZone.data('write'));\n                $tabMenu.attr('data-preview', $editContentZone.data('preview'));\n                $tabMenu.find('.write.item').attr('data-tab', $editContentZone.data('write'));\n                $tabMenu.find('.preview.item').attr('data-tab', $editContentZone.data('preview'));\n                $editContentForm.find('.write.segment').attr('data-tab', $editContentZone.data('write'));\n                $editContentForm.find('.preview.segment').attr('data-tab', $editContentZone.data('preview'));\n\n                initCommentPreviewTab($editContentForm);\n\n                $editContentZone.find('.cancel.button').click(function () {\n                    $renderContent.show();\n                    $editContentZone.hide();\n                    $dropzone.get(0).dropzone.emit(\"reload\");\n                });\n                $editContentZone.find('.save.button').click(function () {\n                    $renderContent.show();\n                    $editContentZone.hide();\n                    const $attachments = $files.find(\"[name=files]\").map(function(){\n                        return $(this).val();\n                    }).get();\n                    $.post($editContentZone.data('update-url'), {\n                        \"_csrf\": csrf,\n                        \"content\": $textarea.val(),\n                        \"context\": $editContentZone.data('context'),\n                        \"files\": $attachments\n                    },\n                    function (data) {\n                        if (data.length == 0) {\n                            $renderContent.html($('#no-content').html());\n                        } else {\n                            $renderContent.html(data.content);\n                            emojify.run($renderContent[0]);\n                            $('pre code', $renderContent[0]).each(function () {\n                                hljs.highlightBlock(this);\n                            });\n                        }\n                        const $content = $segment.parent();\n                        if(!$content.find(\".ui.small.images\").length){\n                            if(data.attachments != \"\"){\n                                $content.append(\n                                '<div class=\"ui bottom attached segment\">' +\n                                '    <div class=\"ui small images\">' +\n                                '    </div>' +\n                                '</div>'\n                                );\n                                $content.find(\".ui.small.images\").html(data.attachments);\n                            }\n                        } else if (data.attachments == \"\") {\n                            $content.find(\".ui.small.images\").parent().remove();\n                        } else {\n                            $content.find(\".ui.small.images\").html(data.attachments);\n                        }\n                        $dropzone.get(0).dropzone.emit(\"submit\");\n                        $dropzone.get(0).dropzone.emit(\"reload\");\n                    });\n                });\n            } else {\n                $textarea = $segment.find('textarea');\n            }\n\n            // Show write/preview tab and copy raw content as needed\n            $editContentZone.show();\n            $renderContent.hide();\n            if ($textarea.val().length == 0) {\n                $textarea.val($rawContent.text());\n            }\n            $textarea.focus();\n            return false;\n        });\n\n        // Delete comment\n        $('.delete-comment').click(function () {\n            const $this = $(this);\n            if (confirm($this.data('locale'))) {\n                $.post($this.data('url'), {\n                    \"_csrf\": csrf\n                }).success(function () {\n                    $('#' + $this.data('comment-id')).remove();\n                });\n            }\n            return false;\n        });\n\n        // Change status\n        const $statusButton = $('#status-button');\n        $('#comment-form .edit_area').keyup(function () {\n            if ($(this).val().length == 0) {\n                $statusButton.text($statusButton.data('status'))\n            } else {\n                $statusButton.text($statusButton.data('status-and-comment'))\n            }\n        });\n        $statusButton.click(function () {\n            $('#status').val($statusButton.data('status-val'));\n            $('#comment-form').submit();\n        });\n\n        // Pull Request merge button\n        const $mergeButton = $('.merge-button > button');\n        $mergeButton.on('click', function(e) {\n            e.preventDefault();\n            $('.' + $(this).data('do') + '-fields').show();\n            $(this).parent().hide();\n        });\n        $('.merge-button > .dropdown').dropdown({\n            onChange: function (_text, _value, $choice) {\n                if ($choice.data('do')) {\n                    $mergeButton.find('.button-text').text($choice.text());\n                    $mergeButton.data('do', $choice.data('do'));\n                }\n            }\n        });\n        $('.merge-cancel').on('click', function(e) {\n            e.preventDefault();\n            $(this).closest('.form').hide();\n            $mergeButton.parent().show();\n        });\n\n        initReactionSelector();\n    }\n\n    // Diff\n    if ($('.repository.diff').length > 0) {\n        $('.diff-counter').each(function () {\n            const $item = $(this);\n            const addLine = $item.find('span[data-line].add').data(\"line\");\n            const delLine = $item.find('span[data-line].del').data(\"line\");\n            const addPercent = parseFloat(addLine) / (parseFloat(addLine) + parseFloat(delLine)) * 100;\n            $item.find(\".bar .add\").css(\"width\", addPercent + \"%\");\n        });\n    }\n\n    // Quick start and repository home\n    $('#repo-clone-ssh').click(function () {\n        $('.clone-url').text($(this).data('link'));\n        $('#repo-clone-url').val($(this).data('link'));\n        $(this).addClass('blue');\n        $('#repo-clone-https').removeClass('blue');\n        localStorage.setItem('repo-clone-protocol', 'ssh');\n    });\n    $('#repo-clone-https').click(function () {\n        $('.clone-url').text($(this).data('link'));\n        $('#repo-clone-url').val($(this).data('link'));\n        $(this).addClass('blue');\n        $('#repo-clone-ssh').removeClass('blue');\n        localStorage.setItem('repo-clone-protocol', 'https');\n    });\n    $('#repo-clone-url').click(function () {\n        $(this).select();\n    });\n\n    // Pull request\n    const $repoComparePull = $('.repository.compare.pull');\n    if ($repoComparePull.length > 0) {\n        initFilterSearchDropdown('.choose.branch .dropdown');\n        // show pull request form\n        $repoComparePull.find('button.show-form').on('click', function(e) {\n            e.preventDefault();\n            $repoComparePull.find('.pullrequest-form').show();\n            $(this).parent().hide();\n        });\n    }\n\n    // Branches\n    if ($('.repository.settings.branches').length > 0) {\n        initFilterSearchDropdown('.protected-branches .dropdown');\n        $('.enable-protection, .enable-whitelist').change(function () {\n            if (this.checked) {\n                $($(this).data('target')).removeClass('disabled');\n            } else {\n                $($(this).data('target')).addClass('disabled');\n            }\n        });\n    }\n}\n\nfunction initMigration() {\n    const toggleMigrations = function() {\n        const authUserName = $('#auth_username').val();\n        const cloneAddr = $('#clone_addr').val();\n        if (!$('#mirror').is(\":checked\") && (authUserName!=undefined && authUserName.length > 0)\n        && (cloneAddr!=undefined && (cloneAddr.startsWith(\"https://github.com\") || cloneAddr.startsWith(\"http://github.com\")))) {\n            $('#migrate_items').show();\n        } else {\n            $('#migrate_items').hide();\n        }\n    }\n\n    toggleMigrations();\n\n    $('#clone_addr').on('input', toggleMigrations)\n    $('#auth_username').on('input', toggleMigrations)\n    $('#mirror').on('change', toggleMigrations)\n}\n\nfunction initPullRequestReview() {\n    $('.show-outdated').on('click', function (e) {\n        e.preventDefault();\n        const id = $(this).data('comment');\n        $(this).addClass(\"hide\");\n        $(\"#code-comments-\" + id).removeClass('hide');\n        $(\"#code-preview-\" + id).removeClass('hide');\n        $(\"#hide-outdated-\" + id).removeClass('hide');\n    });\n\n    $('.hide-outdated').on('click', function (e) {\n        e.preventDefault();\n        const id = $(this).data('comment');\n        $(this).addClass(\"hide\");\n        $(\"#code-comments-\" + id).addClass('hide');\n        $(\"#code-preview-\" + id).addClass('hide');\n        $(\"#show-outdated-\" + id).removeClass('hide');\n    });\n\n    $('button.comment-form-reply').on('click', function (e) {\n        e.preventDefault();\n        $(this).hide();\n        const form = $(this).parent().find('.comment-form')\n        form.removeClass('hide');\n        assingMenuAttributes(form.find('.menu'));\n    });\n    // The following part is only for diff views\n    if ($('.repository.pull.diff').length == 0) {\n        return;\n    }\n\n    $('.diff-detail-box.ui.sticky').sticky();\n\n    $('.btn-review').on('click', function(e) {\n        e.preventDefault();\n        $(this).closest('.dropdown').find('.menu').toggle('visible');\n    }).closest('.dropdown').find('.link.close').on('click', function(e) {\n        e.preventDefault();\n        $(this).closest('.menu').toggle('visible');\n    });\n\n    $('.code-view .lines-code,.code-view .lines-num')\n        .on('mouseenter', function() {\n            const parent = $(this).closest('td');\n            $(this).closest('tr').addClass(\n                parent.hasClass('lines-num-old') || parent.hasClass('lines-code-old')\n                    ? 'focus-lines-old' : 'focus-lines-new'\n            );\n        })\n        .on('mouseleave', function() {\n            $(this).closest('tr').removeClass('focus-lines-new focus-lines-old');\n        });\n    $('.add-code-comment').on('click', function(e) {\n        // https://github.com/go-gitea/gitea/issues/4745\n        if ($(e.target).hasClass('btn-add-single')) {\n          return;\n        }\n        e.preventDefault();\n        const isSplit = $(this).closest('.code-diff').hasClass('code-diff-split');\n        const side = $(this).data('side');\n        const idx = $(this).data('idx');\n        const path = $(this).data('path');\n        const form = $('#pull_review_add_comment').html();\n        const tr = $(this).closest('tr');\n        let ntr = tr.next();\n        if (!ntr.hasClass('add-comment')) {\n            ntr = $('<tr class=\"add-comment\">'\n                    + (isSplit ? '<td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-right\"></td>'\n                               : '<td class=\"lines-num\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left add-comment-right\"></td>')\n                    + '</tr>');\n            tr.after(ntr);\n        }\n        const td = ntr.find('.add-comment-' + side);\n        let commentCloud = td.find('.comment-code-cloud');\n        if (commentCloud.length === 0) {\n            td.html(form);\n            commentCloud = td.find('.comment-code-cloud');\n            assingMenuAttributes(commentCloud.find('.menu'));\n\n            td.find(\"input[name='line']\").val(idx);\n            td.find(\"input[name='side']\").val(side === \"left\" ? \"previous\":\"proposed\");\n            td.find(\"input[name='path']\").val(path);\n        }\n        commentCloud.find('textarea').focus();\n    });\n}\n\nfunction assingMenuAttributes(menu) {\n    const id = Math.floor(Math.random() * Math.floor(1000000));\n    menu.attr('data-write', menu.attr('data-write') + id);\n    menu.attr('data-preview', menu.attr('data-preview') + id);\n    menu.find('.item').each(function() {\n        const tab = $(this).attr('data-tab') + id;\n        $(this).attr('data-tab', tab);\n    });\n    menu.parent().find(\"*[data-tab='write']\").attr('data-tab', 'write' + id);\n    menu.parent().find(\"*[data-tab='preview']\").attr('data-tab', 'preview' + id);\n    initCommentPreviewTab(menu.parent(\".form\"));\n    return id;\n}\n\nfunction initRepositoryCollaboration() {\n    // Change collaborator access mode\n    $('.access-mode.menu .item').click(function () {\n        const $menu = $(this).parent();\n        $.post($menu.data('url'), {\n            \"_csrf\": csrf,\n            \"uid\": $menu.data('uid'),\n            \"mode\": $(this).data('value')\n        })\n    });\n}\n\nfunction initTeamSettings() {\n    // Change team access mode\n    $('.organization.new.team input[name=permission]').change(function () {\n        const val = $('input[name=permission]:checked', '.organization.new.team').val()\n        if (val === 'admin') {\n            $('.organization.new.team .team-units').hide();\n        } else {\n            $('.organization.new.team .team-units').show();\n        }\n    });\n}\n\nfunction initWikiForm() {\n    const $editArea = $('.repository.wiki textarea#edit_area');\n    if ($editArea.length > 0) {\n        const simplemde = new SimpleMDE({\n            autoDownloadFontAwesome: false,\n            element: $editArea[0],\n            forceSync: true,\n            previewRender: function (plainText, preview) { // Async method\n                setTimeout(function () {\n                    // FIXME: still send render request when return back to edit mode\n                    $.post($editArea.data('url'), {\n                            \"_csrf\": csrf,\n                            \"mode\": \"gfm\",\n                            \"context\": $editArea.data('context'),\n                            \"text\": plainText\n                        },\n                        function (data) {\n                            preview.innerHTML = '<div class=\"markdown ui segment\">' + data + '</div>';\n                            emojify.run($('.editor-preview')[0]);\n                        }\n                    );\n                }, 0);\n\n                return \"Loading...\";\n            },\n            renderingConfig: {\n                singleLineBreaks: false\n            },\n            indentWithTabs: false,\n            tabSize: 4,\n            spellChecker: false,\n            toolbar: [\"bold\", \"italic\", \"strikethrough\", \"|\",\n                \"heading-1\", \"heading-2\", \"heading-3\", \"heading-bigger\", \"heading-smaller\", \"|\",\n                {\n                    name: \"code-inline\",\n                    action: function(e){\n                        const cm = e.codemirror;\n                        const selection = cm.getSelection();\n                        cm.replaceSelection(\"`\" + selection + \"`\");\n                        if (!selection) {\n                            const cursorPos = cm.getCursor();\n                            cm.setCursor(cursorPos.line, cursorPos.ch - 1);\n                        }\n                        cm.focus();\n                    },\n                    className: \"fa fa-angle-right\",\n                    title: \"Add Inline Code\",\n                },\"code\", \"quote\", \"|\", {\n                    name: \"checkbox-empty\",\n                    action: function(e){\n                        const cm = e.codemirror;\n                        cm.replaceSelection(\"\\n- [ ] \" + cm.getSelection());\n                        cm.focus();\n                    },\n                    className: \"fa fa-square-o\",\n                    title: \"Add Checkbox (empty)\",\n                },\n                {\n                    name: \"checkbox-checked\",\n                    action: function(e){\n                        const cm = e.codemirror;\n                        cm.replaceSelection(\"\\n- [x] \" + cm.getSelection());\n                        cm.focus();\n                    },\n                    className: \"fa fa-check-square-o\",\n                    title: \"Add Checkbox (checked)\",\n                }, \"|\",\n                \"unordered-list\", \"ordered-list\", \"|\",\n                \"link\", \"image\", \"table\", \"horizontal-rule\", \"|\",\n                \"clean-block\", \"preview\", \"fullscreen\"]\n        })\n        $(simplemde.codemirror.getInputField()).addClass(\"js-quick-submit\");\n    }\n}\n\n// For IE\nString.prototype.endsWith = function (pattern) {\n    const d = this.length - pattern.length;\n    return d >= 0 && this.lastIndexOf(pattern) === d;\n};\n\n// Adding function to get the cursor position in a text field to jQuery object.\n$.fn.getCursorPosition = function () {\n    const el = $(this).get(0);\n    let pos = 0;\n    if ('selectionStart' in el) {\n        pos = el.selectionStart;\n    } else if ('selection' in document) {\n        el.focus();\n        const Sel = document.selection.createRange();\n        const SelLength = document.selection.createRange().text.length;\n        Sel.moveStart('character', -el.value.length);\n        pos = Sel.text.length - SelLength;\n    }\n    return pos;\n}\n\nfunction setSimpleMDE($editArea) {\n    if (codeMirrorEditor) {\n        codeMirrorEditor.toTextArea();\n        codeMirrorEditor = null;\n    }\n\n    if (simpleMDEditor) {\n        return true;\n    }\n\n    simpleMDEditor = new SimpleMDE({\n        autoDownloadFontAwesome: false,\n        element: $editArea[0],\n        forceSync: true,\n        renderingConfig: {\n            singleLineBreaks: false\n        },\n        indentWithTabs: false,\n        tabSize: 4,\n        spellChecker: false,\n        previewRender: function (plainText, preview) { // Async method\n            setTimeout(function () {\n                // FIXME: still send render request when return back to edit mode\n                $.post($editArea.data('url'), {\n                        \"_csrf\": csrf,\n                        \"mode\": \"gfm\",\n                        \"context\": $editArea.data('context'),\n                        \"text\": plainText\n                    },\n                    function (data) {\n                        preview.innerHTML = '<div class=\"markdown ui segment\">' + data + '</div>';\n                        emojify.run($('.editor-preview')[0]);\n                    }\n                );\n            }, 0);\n\n            return \"Loading...\";\n        },\n        toolbar: [\"bold\", \"italic\", \"strikethrough\", \"|\",\n            \"heading-1\", \"heading-2\", \"heading-3\", \"heading-bigger\", \"heading-smaller\", \"|\",\n            \"code\", \"quote\", \"|\",\n            \"unordered-list\", \"ordered-list\", \"|\",\n            \"link\", \"image\", \"table\", \"horizontal-rule\", \"|\",\n            \"clean-block\", \"preview\", \"fullscreen\", \"side-by-side\"]\n    });\n\n    return true;\n}\n\nfunction setCodeMirror($editArea) {\n    if (simpleMDEditor) {\n        simpleMDEditor.toTextArea();\n        simpleMDEditor = null;\n    }\n\n    if (codeMirrorEditor) {\n        return true;\n    }\n\n    codeMirrorEditor = CodeMirror.fromTextArea($editArea[0], {\n        lineNumbers: true\n    });\n    codeMirrorEditor.on(\"change\", function (cm, _change) {\n        $editArea.val(cm.getValue());\n    });\n\n    return true;\n}\n\nfunction initEditor() {\n    $('.js-quick-pull-choice-option').change(function () {\n        if ($(this).val() == 'commit-to-new-branch') {\n            $('.quick-pull-branch-name').show();\n            $('.quick-pull-branch-name input').prop('required',true);\n        } else {\n            $('.quick-pull-branch-name').hide();\n            $('.quick-pull-branch-name input').prop('required',false);\n        }\n        $('#commit-button').text($(this).attr('button_text'));\n    });\n\n    const $editFilename = $(\"#file-name\");\n    $editFilename.keyup(function (e) {\n        const $section = $('.breadcrumb span.section');\n        const $divider = $('.breadcrumb div.divider');\n        let value;\n        let parts;\n\n        if (e.keyCode == 8) {\n            if ($(this).getCursorPosition() == 0) {\n                if ($section.length > 0) {\n                    value = $section.last().find('a').text();\n                    $(this).val(value + $(this).val());\n                    $(this)[0].setSelectionRange(value.length, value.length);\n                    $section.last().remove();\n                    $divider.last().remove();\n                }\n            }\n        }\n        if (e.keyCode == 191) {\n            parts = $(this).val().split('/');\n            for (let i = 0; i < parts.length; ++i) {\n                value = parts[i];\n                if (i < parts.length - 1) {\n                    if (value.length) {\n                        $('<span class=\"section\"><a href=\"#\">' + value + '</a></span>').insertBefore($(this));\n                        $('<div class=\"divider\"> / </div>').insertBefore($(this));\n                    }\n                }\n                else {\n                    $(this).val(value);\n                }\n                $(this)[0].setSelectionRange(0, 0);\n            }\n        }\n        parts = [];\n        $('.breadcrumb span.section').each(function () {\n            const element = $(this);\n            if (element.find('a').length) {\n                parts.push(element.find('a').text());\n            } else {\n                parts.push(element.text());\n            }\n        });\n        if ($(this).val())\n            parts.push($(this).val());\n        $('#tree_path').val(parts.join('/'));\n    }).trigger('keyup');\n\n    const $editArea = $('.repository.editor textarea#edit_area');\n    if (!$editArea.length)\n        return;\n\n    const markdownFileExts = $editArea.data(\"markdown-file-exts\").split(\",\");\n    const lineWrapExtensions = $editArea.data(\"line-wrap-extensions\").split(\",\");\n\n    $editFilename.on(\"keyup\", function () {\n        const val = $editFilename.val();\n        let mode, spec, extension, extWithDot, dataUrl, apiCall;\n\n        extension = extWithDot = \"\";\n        const m = /.+\\.([^.]+)$/.exec(val);\n        if (m) {\n            extension = m[1];\n            extWithDot = \".\" + extension;\n        }\n\n        const info = CodeMirror.findModeByExtension(extension);\n        const previewLink = $('a[data-tab=preview]');\n        if (info) {\n            mode = info.mode;\n            spec = info.mime;\n            apiCall = mode;\n        }\n        else {\n            apiCall = extension\n        }\n\n        if (previewLink.length && apiCall && previewFileModes && previewFileModes.length && previewFileModes.indexOf(apiCall) >= 0) {\n            dataUrl = previewLink.data('url');\n            previewLink.data('url', dataUrl.replace(/(.*)\\/.*/i, '$1/' + mode));\n            previewLink.show();\n        }\n        else {\n            previewLink.hide();\n        }\n\n        // If this file is a Markdown extensions, we will load that editor and return\n        if (markdownFileExts.indexOf(extWithDot) >= 0) {\n            if (setSimpleMDE($editArea)) {\n                return;\n            }\n        }\n\n        // Else we are going to use CodeMirror\n        if (!codeMirrorEditor && !setCodeMirror($editArea)) {\n            return;\n        }\n\n        if (mode) {\n            codeMirrorEditor.setOption(\"mode\", spec);\n            CodeMirror.autoLoadMode(codeMirrorEditor, mode);\n        }\n\n        if (lineWrapExtensions.indexOf(extWithDot) >= 0) {\n            codeMirrorEditor.setOption(\"lineWrapping\", true);\n        }\n        else {\n            codeMirrorEditor.setOption(\"lineWrapping\", false);\n        }\n\n        // get the filename without any folder\n        let value = $editFilename.val();\n        if (value.length === 0) {\n            return;\n        }\n        value = value.split('/');\n        value = value[value.length - 1];\n\n        $.getJSON($editFilename.data('ec-url-prefix')+value, function(editorconfig) {\n            if (editorconfig.indent_style === 'tab') {\n                codeMirrorEditor.setOption(\"indentWithTabs\", true);\n                codeMirrorEditor.setOption('extraKeys', {});\n            } else {\n                codeMirrorEditor.setOption(\"indentWithTabs\", false);\n                // required because CodeMirror doesn't seems to use spaces correctly for {\"indentWithTabs\": false}:\n                // - https://github.com/codemirror/CodeMirror/issues/988\n                // - https://codemirror.net/doc/manual.html#keymaps\n                codeMirrorEditor.setOption('extraKeys', {\n                    Tab: function(cm) {\n                        const spaces = Array(parseInt(cm.getOption(\"indentUnit\")) + 1).join(\" \");\n                        cm.replaceSelection(spaces);\n                    }\n                });\n            }\n            codeMirrorEditor.setOption(\"indentUnit\", editorconfig.indent_size || 4);\n            codeMirrorEditor.setOption(\"tabSize\", editorconfig.tab_width || 4);\n        });\n    }).trigger('keyup');\n\n    // Using events from https://github.com/codedance/jquery.AreYouSure#advanced-usage\n    // to enable or disable the commit button\n    const $commitButton = $('#commit-button');\n    const $editForm = $('.ui.edit.form');\n    const dirtyFileClass = 'dirty-file';\n\n    // Disabling the button at the start\n    $commitButton.prop('disabled', true);\n\n    // Registering a custom listener for the file path and the file content\n    $editForm.areYouSure({\n        silent: true,\n        dirtyClass: dirtyFileClass,\n        fieldSelector: ':input:not(.commit-form-wrapper :input)',\n        change: function () {\n            const dirty = $(this).hasClass(dirtyFileClass);\n            $commitButton.prop('disabled', !dirty);\n        }\n    });\n\n    $commitButton.click(function (event) {\n        // A modal which asks if an empty file should be committed\n        if ($editArea.val().length === 0) {\n            $('#edit-empty-content-modal').modal({\n                onApprove: function () {\n                    $('.edit.form').submit();\n                }\n            }).modal('show');\n            event.preventDefault();\n        }\n    });\n}\n\nfunction initOrganization() {\n    if ($('.organization').length == 0) {\n        return;\n    }\n\n    // Options\n    if ($('.organization.settings.options').length > 0) {\n        $('#org_name').keyup(function () {\n            const $prompt = $('#org-name-change-prompt');\n            if ($(this).val().toString().toLowerCase() != $(this).data('org-name').toString().toLowerCase()) {\n                $prompt.show();\n            } else {\n                $prompt.hide();\n            }\n        });\n    }\n}\n\nfunction initUserSettings() {\n    // Options\n    if ($('.user.settings.profile').length > 0) {\n        $('#username').keyup(function () {\n            const $prompt = $('#name-change-prompt');\n            if ($(this).val().toString().toLowerCase() != $(this).data('name').toString().toLowerCase()) {\n                $prompt.show();\n            } else {\n                $prompt.hide();\n            }\n        });\n    }\n}\n\nfunction initWebhook() {\n    if ($('.new.webhook').length == 0) {\n        return;\n    }\n\n    $('.events.checkbox input').change(function () {\n        if ($(this).is(':checked')) {\n            $('.events.fields').show();\n        }\n    });\n    $('.non-events.checkbox input').change(function () {\n        if ($(this).is(':checked')) {\n            $('.events.fields').hide();\n        }\n    });\n\n    const updateContentType = function () {\n        const visible = $('#http_method').val() === 'POST';\n        $('#content_type').parent().parent()[visible ? 'show' : 'hide']();\n    };\n    updateContentType();\n    $('#http_method').change(function () {\n        updateContentType();\n    });\n\n    // Test delivery\n    $('#test-delivery').click(function () {\n        const $this = $(this);\n        $this.addClass('loading disabled');\n        $.post($this.data('link'), {\n            \"_csrf\": csrf\n        }).done(\n            setTimeout(function () {\n                window.location.href = $this.data('redirect');\n            }, 5000)\n        )\n    });\n}\n\nfunction initAdmin() {\n    if ($('.admin').length == 0) {\n        return;\n    }\n\n    // New user\n    if ($('.admin.new.user').length > 0 ||\n        $('.admin.edit.user').length > 0) {\n        $('#login_type').change(function () {\n            if ($(this).val().substring(0, 1) == '0') {\n                $('#login_name').removeAttr('required');\n                $('.non-local').hide();\n                $('.local').show();\n                $('#user_name').focus();\n\n                if ($(this).data('password') == \"required\") {\n                    $('#password').attr('required', 'required');\n                }\n\n            } else {\n                $('#login_name').attr('required', 'required');\n                $('.non-local').show();\n                $('.local').hide();\n                $('#login_name').focus();\n\n                $('#password').removeAttr('required');\n            }\n        });\n    }\n\n    function onSecurityProtocolChange() {\n        if ($('#security_protocol').val() > 0) {\n            $('.has-tls').show();\n        } else {\n            $('.has-tls').hide();\n        }\n    }\n\n    function onUsePagedSearchChange() {\n        if ($('#use_paged_search').prop('checked')) {\n            $('.search-page-size').show()\n                .find('input').attr('required', 'required');\n        } else {\n            $('.search-page-size').hide()\n                .find('input').removeAttr('required');\n        }\n    }\n\n    function onOAuth2Change() {\n        $('.open_id_connect_auto_discovery_url, .oauth2_use_custom_url').hide();\n        $('.open_id_connect_auto_discovery_url input[required]').removeAttr('required');\n\n        const provider = $('#oauth2_provider').val();\n        switch (provider) {\n            case 'github':\n            case 'gitlab':\n            case 'gitea':\n                $('.oauth2_use_custom_url').show();\n                break;\n            case 'openidConnect':\n                $('.open_id_connect_auto_discovery_url input').attr('required', 'required');\n                $('.open_id_connect_auto_discovery_url').show();\n                break;\n        }\n        onOAuth2UseCustomURLChange();\n    }\n\n    function onOAuth2UseCustomURLChange() {\n        const provider = $('#oauth2_provider').val();\n        $('.oauth2_use_custom_url_field').hide();\n        $('.oauth2_use_custom_url_field input[required]').removeAttr('required');\n\n        if ($('#oauth2_use_custom_url').is(':checked')) {\n            if (!$('#oauth2_token_url').val()) {\n                $('#oauth2_token_url').val($('#' + provider + '_token_url').val());\n            }\n            if (!$('#oauth2_auth_url').val()) {\n                $('#oauth2_auth_url').val($('#' + provider + '_auth_url').val());\n            }\n            if (!$('#oauth2_profile_url').val()) {\n                $('#oauth2_profile_url').val($('#' + provider + '_profile_url').val());\n            }\n            if (!$('#oauth2_email_url').val()) {\n                $('#oauth2_email_url').val($('#' + provider + '_email_url').val());\n            }\n            switch (provider) {\n                case 'github':\n                    $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input, .oauth2_email_url input').attr('required', 'required');\n                    $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url, .oauth2_email_url').show();\n                    break;\n                case 'gitea':\n                case 'gitlab':\n                    $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input').attr('required', 'required');\n                    $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url').show();\n                    $('#oauth2_email_url').val('');\n                    break;\n            }\n        }\n    }\n\n    // New authentication\n    if ($('.admin.new.authentication').length > 0) {\n        $('#auth_type').change(function () {\n            $('.ldap, .dldap, .smtp, .pam, .oauth2, .has-tls .search-page-size').hide();\n\n            $('.ldap input[required], .binddnrequired input[required], .dldap input[required], .smtp input[required], .pam input[required], .oauth2 input[required], .has-tls input[required]').removeAttr('required');\n            $('.binddnrequired').removeClass(\"required\");\n\n            const authType = $(this).val();\n            switch (authType) {\n                case '2':     // LDAP\n                    $('.ldap').show();\n                    $('.binddnrequired input, .ldap div.required:not(.dldap) input').attr('required', 'required');\n                    $('.binddnrequired').addClass(\"required\");\n                    break;\n                case '3':     // SMTP\n                    $('.smtp').show();\n                    $('.has-tls').show();\n                    $('.smtp div.required input, .has-tls').attr('required', 'required');\n                    break;\n                case '4':     // PAM\n                    $('.pam').show();\n                    $('.pam input').attr('required', 'required');\n                    break;\n                case '5':     // LDAP\n                    $('.dldap').show();\n                    $('.dldap div.required:not(.ldap) input').attr('required', 'required');\n                    break;\n                case '6':     // OAuth2\n                    $('.oauth2').show();\n                    $('.oauth2 div.required:not(.oauth2_use_custom_url,.oauth2_use_custom_url_field,.open_id_connect_auto_discovery_url) input').attr('required', 'required');\n                    onOAuth2Change();\n                    break;\n            }\n            if (authType == '2' || authType == '5') {\n                onSecurityProtocolChange()\n            }\n            if (authType == '2') {\n                onUsePagedSearchChange();\n            }\n        });\n        $('#auth_type').change();\n        $('#security_protocol').change(onSecurityProtocolChange);\n        $('#use_paged_search').change(onUsePagedSearchChange);\n        $('#oauth2_provider').change(onOAuth2Change);\n        $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n    }\n    // Edit authentication\n    if ($('.admin.edit.authentication').length > 0) {\n        const authType = $('#auth_type').val();\n        if (authType == '2' || authType == '5') {\n            $('#security_protocol').change(onSecurityProtocolChange);\n            if (authType == '2') {\n                $('#use_paged_search').change(onUsePagedSearchChange);\n            }\n        } else if (authType == '6') {\n            $('#oauth2_provider').change(onOAuth2Change);\n            $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n            onOAuth2Change();\n        }\n    }\n\n    // Notice\n    if ($('.admin.notice')) {\n        const $detailModal = $('#detail-modal');\n\n        // Attach view detail modals\n        $('.view-detail').click(function () {\n            $detailModal.find('.content p').text($(this).data('content'));\n            $detailModal.modal('show');\n            return false;\n        });\n\n        // Select actions\n        const $checkboxes = $('.select.table .ui.checkbox');\n        $('.select.action').click(function () {\n            switch ($(this).data('action')) {\n                case 'select-all':\n                    $checkboxes.checkbox('check');\n                    break;\n                case 'deselect-all':\n                    $checkboxes.checkbox('uncheck');\n                    break;\n                case 'inverse':\n                    $checkboxes.checkbox('toggle');\n                    break;\n            }\n        });\n        $('#delete-selection').click(function () {\n            const $this = $(this);\n            $this.addClass(\"loading disabled\");\n            const ids = [];\n            $checkboxes.each(function () {\n                if ($(this).checkbox('is checked')) {\n                    ids.push($(this).data('id'));\n                }\n            });\n            $.post($this.data('link'), {\n                \"_csrf\": csrf,\n                \"ids\": ids\n            }).done(function () {\n                window.location.href = $this.data('redirect');\n            });\n        });\n    }\n}\n\nfunction buttonsClickOnEnter() {\n    $('.ui.button').keypress(function (e) {\n        if (e.keyCode == 13 || e.keyCode == 32) // enter key or space bar\n            $(this).click();\n    });\n}\n\nfunction searchUsers() {\n    const $searchUserBox = $('#search-user-box');\n    $searchUserBox.search({\n        minCharacters: 2,\n        apiSettings: {\n            url: suburl + '/api/v1/users/search?q={query}',\n            onResponse: function(response) {\n                const items = [];\n                $.each(response.data, function (_i, item) {\n                    let title = item.login;\n                    if (item.full_name && item.full_name.length > 0) {\n                        title += ' (' + htmlEncode(item.full_name) + ')';\n                    }\n                    items.push({\n                        title: title,\n                        image: item.avatar_url\n                    })\n                });\n\n                return { results: items }\n            }\n        },\n        searchFields: ['login', 'full_name'],\n        showNoResults: false\n    });\n}\n\nfunction searchTeams() {\n    const $searchTeamBox = $('#search-team-box');\n    $searchTeamBox.search({\n        minCharacters: 2,\n        apiSettings: {\n            url: suburl + '/api/v1/orgs/' + $searchTeamBox.data('org') + '/teams/search?q={query}',\n            headers: {\"X-Csrf-Token\": csrf},\n            onResponse: function(response) {\n                const items = [];\n                $.each(response.data, function (_i, item) {\n                    const title = item.name + ' (' + item.permission + ' access)';\n                    items.push({\n                        title: title,\n                    })\n                });\n\n                return { results: items }\n            }\n        },\n        searchFields: ['name', 'description'],\n        showNoResults: false\n    });\n}\n\nfunction searchRepositories() {\n    const $searchRepoBox = $('#search-repo-box');\n    $searchRepoBox.search({\n        minCharacters: 2,\n        apiSettings: {\n            url: suburl + '/api/v1/repos/search?q={query}&uid=' + $searchRepoBox.data('uid'),\n            onResponse: function(response) {\n                const items = [];\n                $.each(response.data, function (_i, item) {\n                    items.push({\n                        title: item.full_name.split(\"/\")[1],\n                        description: item.full_name\n                    })\n                });\n\n                return { results: items }\n            }\n        },\n        searchFields: ['full_name'],\n        showNoResults: false\n    });\n}\n\nfunction initCodeView() {\n    if ($('.code-view .linenums').length > 0) {\n        $(document).on('click', '.lines-num span', function (e) {\n            const $select = $(this);\n            const $list = $select.parent().siblings('.lines-code').find('ol.linenums > li');\n            selectRange($list, $list.filter('[rel=' + $select.attr('id') + ']'), (e.shiftKey ? $list.filter('.active').eq(0) : null));\n            deSelect();\n        });\n\n        $(window).on('hashchange', function () {\n            let m = window.location.hash.match(/^#(L\\d+)-(L\\d+)$/);\n            const $list = $('.code-view ol.linenums > li');\n            let $first;\n            if (m) {\n                $first = $list.filter('.' + m[1]);\n                selectRange($list, $first, $list.filter('.' + m[2]));\n                $(\"html, body\").scrollTop($first.offset().top - 200);\n                return;\n            }\n            m = window.location.hash.match(/^#(L|n)(\\d+)$/);\n            if (m) {\n                $first = $list.filter('.L' + m[2]);\n                selectRange($list, $first);\n                $(\"html, body\").scrollTop($first.offset().top - 200);\n            }\n        }).trigger('hashchange');\n    }\n}\n\nfunction initU2FAuth() {\n    if($('#wait-for-key').length === 0) {\n        return\n    }\n    u2fApi.ensureSupport()\n        .then(function () {\n            $.getJSON(suburl + '/user/u2f/challenge').success(function(req) {\n                u2fApi.sign(req.appId, req.challenge, req.registeredKeys, 30)\n                    .then(u2fSigned)\n                    .catch(function (err) {\n                        if(err === undefined) {\n                            u2fError(1);\n                            return\n                        }\n                        u2fError(err.metaData.code);\n                    });\n            });\n        }).catch(function () {\n            // Fallback in case browser do not support U2F\n            window.location.href = suburl + \"/user/two_factor\"\n        })\n}\nfunction u2fSigned(resp) {\n    $.ajax({\n        url: suburl + '/user/u2f/sign',\n        type: \"POST\",\n        headers: {\"X-Csrf-Token\": csrf},\n        data: JSON.stringify(resp),\n        contentType: \"application/json; charset=utf-8\",\n    }).done(function(res){\n        window.location.replace(res);\n    }).fail(function () {\n        u2fError(1);\n    });\n}\n\nfunction u2fRegistered(resp) {\n    if (checkError(resp)) {\n        return;\n    }\n    $.ajax({\n        url: suburl + '/user/settings/security/u2f/register',\n        type: \"POST\",\n        headers: {\"X-Csrf-Token\": csrf},\n        data: JSON.stringify(resp),\n        contentType: \"application/json; charset=utf-8\",\n        success: function(){\n            reload();\n        },\n        fail: function () {\n            u2fError(1);\n        }\n    });\n}\n\nfunction checkError(resp) {\n    if (!('errorCode' in resp)) {\n        return false;\n    }\n    if (resp.errorCode === 0) {\n        return false;\n    }\n    u2fError(resp.errorCode);\n    return true;\n}\n\n\nfunction u2fError(errorType) {\n    const u2fErrors = {\n        'browser': $('#unsupported-browser'),\n        1: $('#u2f-error-1'),\n        2: $('#u2f-error-2'),\n        3: $('#u2f-error-3'),\n        4: $('#u2f-error-4'),\n        5: $('.u2f-error-5')\n    };\n    u2fErrors[errorType].removeClass('hide');\n    for(const type in u2fErrors){\n        if(type != errorType){\n            u2fErrors[type].addClass('hide');\n        }\n    }\n    $('#u2f-error').modal('show');\n}\n\nfunction initU2FRegister() {\n    $('#register-device').modal({allowMultiple: false});\n    $('#u2f-error').modal({allowMultiple: false});\n    $('#register-security-key').on('click', function(e) {\n        e.preventDefault();\n        u2fApi.ensureSupport()\n            .then(u2fRegisterRequest)\n            .catch(function() {\n                u2fError('browser');\n            })\n    })\n}\n\nfunction u2fRegisterRequest() {\n    $.post(suburl + \"/user/settings/security/u2f/request_register\", {\n        \"_csrf\": csrf,\n        \"name\": $('#nickname').val()\n    }).success(function(req) {\n        $(\"#nickname\").closest(\"div.field\").removeClass(\"error\");\n        $('#register-device').modal('show');\n        if(req.registeredKeys === null) {\n            req.registeredKeys = []\n        }\n        u2fApi.register(req.appId, req.registerRequests, req.registeredKeys, 30)\n            .then(u2fRegistered)\n            .catch(function (reason) {\n                if(reason === undefined) {\n                    u2fError(1);\n                    return\n                }\n                u2fError(reason.metaData.code);\n            });\n    }).fail(function(xhr) {\n        if(xhr.status === 409) {\n            $(\"#nickname\").closest(\"div.field\").addClass(\"error\");\n        }\n    });\n}\n\nfunction initWipTitle() {\n    $(\".title_wip_desc > a\").click(function (e) {\n        e.preventDefault();\n\n        const $issueTitle = $(\"#issue_title\");\n        $issueTitle.focus();\n        const value = $issueTitle.val().trim().toUpperCase();\n\n        for (const i in wipPrefixes) {\n            if (value.startsWith(wipPrefixes[i].toUpperCase())) {\n                return;\n            }\n        }\n\n        $issueTitle.val(wipPrefixes[0] + \" \" + $issueTitle.val());\n    });\n}\n\nfunction initTemplateSearch() {\n    const $repoTemplate = $(\"#repo_template\");\n    const checkTemplate = function() {\n        const $templateUnits = $(\"#template_units\");\n        const $nonTemplate = $(\"#non_template\");\n        if ($repoTemplate.val() !== \"\") {\n            $templateUnits.show();\n            $nonTemplate.hide();\n        } else {\n            $templateUnits.hide();\n            $nonTemplate.show();\n        }\n    };\n    $repoTemplate.change(checkTemplate);\n    checkTemplate();\n\n    const changeOwner = function() {\n        $(\"#repo_template_search\")\n            .dropdown({\n                apiSettings: {\n                    url: suburl + '/api/v1/repos/search?q={query}&template=true&priority_owner_id=' + $(\"#uid\").val(),\n                    onResponse: function(response) {\n                        const filteredResponse = {'success': true, 'results': []};\n                        filteredResponse.results.push({\n                            'name': '',\n                            'value': ''\n                        });\n                        // Parse the response from the api to work with our dropdown\n                        $.each(response.data, function(_r, repo) {\n                            filteredResponse.results.push({\n                                'name'  : htmlEncode(repo.full_name) ,\n                                'value' : repo.id\n                            });\n                        });\n                        return filteredResponse;\n                    },\n                    cache: false,\n                },\n\n                fullTextSearch: true\n            });\n    };\n    $(\"#uid\").change(changeOwner);\n    changeOwner();\n}\n\n$(document).ready(function () {\n    csrf = $('meta[name=_csrf]').attr(\"content\");\n    suburl = $('meta[name=_suburl]').attr(\"content\");\n\n    // Show exact time\n    $('.time-since').each(function () {\n        $(this).addClass('poping up').attr('data-content', $(this).attr('title')).attr('data-variation', 'inverted tiny').attr('title', '');\n    });\n\n    // Semantic UI modules.\n    $('.dropdown:not(.custom)').dropdown();\n    $('.jump.dropdown').dropdown({\n        action: 'hide',\n        onShow: function () {\n            $('.poping.up').popup('hide');\n        }\n    });\n    $('.slide.up.dropdown').dropdown({\n        transition: 'slide up'\n    });\n    $('.upward.dropdown').dropdown({\n        direction: 'upward'\n    });\n    $('.ui.accordion').accordion();\n    $('.ui.checkbox').checkbox();\n    $('.ui.progress').progress({\n        showActivity: false\n    });\n    $('.poping.up').popup();\n    $('.top.menu .poping.up').popup({\n        onShow: function () {\n            if ($('.top.menu .menu.transition').hasClass('visible')) {\n                return false;\n            }\n        }\n    });\n    $('.tabular.menu .item').tab();\n    $('.tabable.menu .item').tab();\n\n    $('.toggle.button').click(function () {\n        $($(this).data('target')).slideToggle(100);\n    });\n\n    // make table <tr> element clickable like a link\n    $('tr[data-href]').click(function() {\n        window.location = $(this).data('href');\n    });\n\n    // Highlight JS\n    if (typeof hljs != 'undefined') {\n        const nodes = [].slice.call(document.querySelectorAll('pre code') || []);\n        for (let i = 0; i < nodes.length; i++) {\n            hljs.highlightBlock(nodes[i]);\n        }\n    }\n\n    // Dropzone\n    const $dropzone = $('#dropzone');\n    if ($dropzone.length > 0) {\n        const filenameDict = {};\n\n        new Dropzone(\"#dropzone\", {\n            url: $dropzone.data('upload-url'),\n            headers: {\"X-Csrf-Token\": csrf},\n            maxFiles: $dropzone.data('max-file'),\n            maxFilesize: $dropzone.data('max-size'),\n            acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n            addRemoveLinks: true,\n            dictDefaultMessage: $dropzone.data('default-message'),\n            dictInvalidFileType: $dropzone.data('invalid-input-type'),\n            dictFileTooBig: $dropzone.data('file-too-big'),\n            dictRemoveFile: $dropzone.data('remove-file'),\n            init: function () {\n                this.on(\"success\", function (file, data) {\n                    filenameDict[file.name] = data.uuid;\n                    const input = $('<input id=\"' + data.uuid + '\" name=\"files\" type=\"hidden\">').val(data.uuid);\n                    $('.files').append(input);\n                });\n                this.on(\"removedfile\", function (file) {\n                    if (file.name in filenameDict) {\n                        $('#' + filenameDict[file.name]).remove();\n                    }\n                    if ($dropzone.data('remove-url') && $dropzone.data('csrf')) {\n                        $.post($dropzone.data('remove-url'), {\n                            file: filenameDict[file.name],\n                            _csrf: $dropzone.data('csrf')\n                        });\n                    }\n                })\n            },\n        });\n    }\n\n    // Emojify\n    emojify.setConfig({\n        img_dir: suburl + '/vendor/plugins/emojify/images',\n        ignore_emoticons: true\n    });\n    const hasEmoji = document.getElementsByClassName('has-emoji');\n    for (let i = 0; i < hasEmoji.length; i++) {\n        emojify.run(hasEmoji[i]);\n        for (let j = 0; j < hasEmoji[i].childNodes.length; j++) {\n            if (hasEmoji[i].childNodes[j].nodeName === \"A\") {\n                emojify.run(hasEmoji[i].childNodes[j])\n            }\n        }\n    }\n\n    // Clipboard JS\n    const clipboard = new Clipboard('.clipboard');\n    clipboard.on('success', function (e) {\n        e.clearSelection();\n\n        $('#' + e.trigger.getAttribute('id')).popup('destroy');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-success'))\n        $('#' + e.trigger.getAttribute('id')).popup('show');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'))\n    });\n\n    clipboard.on('error', function (e) {\n        $('#' + e.trigger.getAttribute('id')).popup('destroy');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-error'))\n        $('#' + e.trigger.getAttribute('id')).popup('show');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'))\n    });\n\n    // Helpers.\n    $('.delete-button').click(showDeletePopup);\n    $('.add-all-button').click(showAddAllPopup);\n\n    $('.delete-branch-button').click(showDeletePopup);\n\n    $('.undo-button').click(function() {\n        const $this = $(this);\n        $.post($this.data('url'), {\n            \"_csrf\": csrf,\n            \"id\": $this.data(\"id\")\n        }).done(function(data) {\n            window.location.href = data.redirect;\n        });\n    });\n    $('.show-panel.button').click(function () {\n        $($(this).data('panel')).show();\n    });\n    $('.show-modal.button').click(function () {\n        $($(this).data('modal')).modal('show');\n    });\n    $('.delete-post.button').click(function () {\n        const $this = $(this);\n        $.post($this.data('request-url'), {\n            \"_csrf\": csrf\n        }).done(function () {\n            window.location.href = $this.data('done-url');\n        });\n    });\n\n    // Set anchor.\n    $('.markdown').each(function () {\n        const headers = {};\n        $(this).find('h1, h2, h3, h4, h5, h6').each(function () {\n            let node = $(this);\n            const val = encodeURIComponent(node.text().toLowerCase().replace(/[^\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w\\- ]/g, '').replace(/[ ]/g, '-'));\n            let name = val;\n            if (headers[val] > 0) {\n                name = val + '-' + headers[val];\n            }\n            if (headers[val] == undefined) {\n                headers[val] = 1;\n            } else {\n                headers[val] += 1;\n            }\n            node = node.wrap('<div id=\"' + name + '\" class=\"anchor-wrap\" ></div>');\n            node.append('<a class=\"anchor\" href=\"#' + name + '\"><span class=\"octicon octicon-link\"></span></a>');\n        });\n    });\n\n    $('.issue-checkbox').click(function() {\n        const numChecked = $('.issue-checkbox').children('input:checked').length;\n        if (numChecked > 0) {\n            $('#issue-filters').addClass(\"hide\");\n            $('#issue-actions').removeClass(\"hide\");\n        } else {\n            $('#issue-filters').removeClass(\"hide\");\n            $('#issue-actions').addClass(\"hide\");\n        }\n    });\n\n    $('.issue-action').click(function () {\n        let action = this.dataset.action;\n        let elementId = this.dataset.elementId;\n        const issueIDs = $('.issue-checkbox').children('input:checked').map(function() {\n            return this.dataset.issueId;\n        }).get().join();\n        const url = this.dataset.url;\n        if (elementId === '0' && url.substr(-9) === '/assignee'){\n            elementId = '';\n            action = 'clear';\n        }\n        updateIssuesMeta(url, action, issueIDs, elementId).then(function() {\n            // NOTICE: This reset of checkbox state targets Firefox caching behaviour, as the checkboxes stay checked after reload\n            if (action === \"close\" || action === \"open\" ){\n                //uncheck all checkboxes\n                $('.issue-checkbox input[type=\"checkbox\"]').each(function(_,e){ e.checked = false; });\n            }\n            reload();\n        });\n    });\n\n    // NOTICE: This event trigger targets Firefox caching behaviour, as the checkboxes stay checked after reload\n    // trigger ckecked event, if checkboxes are checked on load\n    $('.issue-checkbox input[type=\"checkbox\"]:checked').first().each(function(_,e) {\n        e.checked = false;\n        $(e).click();\n    });\n\n    buttonsClickOnEnter();\n    searchUsers();\n    searchTeams();\n    searchRepositories();\n\n    initCommentForm();\n    initInstall();\n    initRepository();\n    initMigration();\n    initWikiForm();\n    initEditForm();\n    initEditor();\n    initOrganization();\n    initWebhook();\n    initAdmin();\n    initCodeView();\n    initVueApp();\n    initTeamSettings();\n    initCtrlEnterSubmit();\n    initNavbarContentToggle();\n    initTopicbar();\n    initU2FAuth();\n    initU2FRegister();\n    initIssueList();\n    initWipTitle();\n    initPullRequestReview();\n    initRepoStatusChecker();\n    initTemplateSearch();\n\n    // Repo clone url.\n    if ($('#repo-clone-url').length > 0) {\n        switch (localStorage.getItem('repo-clone-protocol')) {\n            case 'ssh':\n                if ($('#repo-clone-ssh').click().length === 0) {\n                    $('#repo-clone-https').click();\n                }\n                break;\n            default:\n                $('#repo-clone-https').click();\n                break;\n        }\n    }\n\n    const routes = {\n        'div.user.settings': initUserSettings,\n        'div.repository.settings.collaboration': initRepositoryCollaboration\n    };\n\n    let selector;\n    for (selector in routes) {\n        if ($(selector).length > 0) {\n            routes[selector]();\n            break;\n        }\n    }\n\n    const $cloneAddr = $('#clone_addr');\n    $cloneAddr.change(function() {\n        const $repoName = $('#repo_name');\n        if ($cloneAddr.val().length > 0 && $repoName.val().length === 0) { // Only modify if repo_name input is blank\n            $repoName.val($cloneAddr.val().match(/^(.*\\/)?((.+?)(\\.git)?)$/)[3]);\n        }\n    });\n});\n\nfunction changeHash(hash) {\n    if (history.pushState) {\n        history.pushState(null, null, hash);\n    }\n    else {\n        location.hash = hash;\n    }\n}\n\nfunction deSelect() {\n    if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n    } else {\n        document.selection.empty();\n    }\n}\n\nfunction selectRange($list, $select, $from) {\n    $list.removeClass('active');\n    if ($from) {\n        let a = parseInt($select.attr('rel').substr(1));\n        let b = parseInt($from.attr('rel').substr(1));\n        let c;\n        if (a != b) {\n            if (a > b) {\n                c = a;\n                a = b;\n                b = c;\n            }\n            const classes = [];\n            for (let i = a; i <= b; i++) {\n                classes.push('.L' + i);\n            }\n            $list.filter(classes.join(',')).addClass('active');\n            changeHash('#L' + a + '-' + 'L' + b);\n            return\n        }\n    }\n    $select.addClass('active');\n    changeHash('#' + $select.attr('rel'));\n}\n\n$(function () {\n    // Warn users that try to leave a page after entering data into a form.\n    // Except on sign-in pages, and for forms marked as 'ignore-dirty'.\n    if ($('.user.signin').length === 0) {\n      $('form:not(.ignore-dirty)').areYouSure();\n    }\n\n    // Parse SSH Key\n    $(\"#ssh-key-content\").on('change paste keyup',function(){\n        const arrays = $(this).val().split(\" \");\n        const $title = $(\"#ssh-key-title\")\n        if ($title.val() === \"\" && arrays.length === 3 && arrays[2] !== \"\") {\n            $title.val(arrays[2]);\n        }\n    });\n});\n\nfunction showDeletePopup() {\n    const $this = $(this);\n    let filter = \"\";\n    if ($this.attr(\"id\")) {\n        filter += \"#\" + $this.attr(\"id\")\n    }\n\n    const dialog = $('.delete.modal' + filter);\n    dialog.find('.name').text($this.data('name'));\n\n    dialog.modal({\n        closable: false,\n        onApprove: function() {\n            if ($this.data('type') == \"form\") {\n                $($this.data('form')).submit();\n                return;\n            }\n\n            $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"id\": $this.data(\"id\")\n            }).done(function(data) {\n                window.location.href = data.redirect;\n            });\n        }\n    }).modal('show');\n    return false;\n}\n\nfunction showAddAllPopup() {\n    const $this = $(this);\n    let filter = \"\";\n    if ($this.attr(\"id\")) {\n        filter += \"#\" + $this.attr(\"id\")\n    }\n\n    const dialog = $('.addall.modal' + filter);\n    dialog.find('.name').text($this.data('name'));\n\n    dialog.modal({\n        closable: false,\n        onApprove: function() {\n            if ($this.data('type') == \"form\") {\n                $($this.data('form')).submit();\n                return;\n            }\n\n            $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"id\": $this.data(\"id\")\n            }).done(function(data) {\n                window.location.href = data.redirect;\n            });\n        }\n    }).modal('show');\n    return false;\n}\n\nfunction initVueComponents(){\n    const vueDelimeters = ['${', '}'];\n\n    Vue.component('repo-search', {\n        delimiters: vueDelimeters,\n\n        props: {\n            searchLimit: {\n                type: Number,\n                default: 10\n            },\n            suburl: {\n                type: String,\n                required: true\n            },\n            uid: {\n                type: Number,\n                required: true\n            },\n            organizations: {\n                type: Array,\n                default: []\n            },\n            isOrganization: {\n                type: Boolean,\n                default: true\n            },\n            canCreateOrganization: {\n                type: Boolean,\n                default: false\n            },\n            organizationsTotalCount: {\n                type: Number,\n                default: 0\n            },\n            moreReposLink: {\n                type: String,\n                default: ''\n            }\n        },\n\n        data: function() {\n            return {\n                tab: 'repos',\n                repos: [],\n                reposTotalCount: 0,\n                reposFilter: 'all',\n                searchQuery: '',\n                isLoading: false,\n                repoTypes: {\n                    'all': {\n                        count: 0,\n                        searchMode: '',\n                    },\n                    'forks': {\n                        count: 0,\n                        searchMode: 'fork',\n                    },\n                    'mirrors': {\n                        count: 0,\n                        searchMode: 'mirror',\n                    },\n                    'sources': {\n                        count: 0,\n                        searchMode: 'source',\n                    },\n                    'collaborative': {\n                        count: 0,\n                        searchMode: 'collaborative',\n                    },\n                }\n            }\n        },\n\n        computed: {\n            showMoreReposLink: function() {\n                return this.repos.length > 0 && this.repos.length < this.repoTypes[this.reposFilter].count;\n            },\n            searchURL: function() {\n                return this.suburl + '/api/v1/repos/search?sort=updated&order=desc&uid=' + this.uid + '&q=' + this.searchQuery\n                                   + '&limit=' + this.searchLimit + '&mode=' + this.repoTypes[this.reposFilter].searchMode\n                                   + (this.reposFilter !== 'all' ? '&exclusive=1' : '');\n            },\n            repoTypeCount: function() {\n                return this.repoTypes[this.reposFilter].count;\n            }\n        },\n\n        mounted: function() {\n            this.searchRepos(this.reposFilter);\n\n            const self = this;\n            Vue.nextTick(function() {\n                self.$refs.search.focus();\n            });\n        },\n\n        methods: {\n            changeTab: function(t) {\n                this.tab = t;\n            },\n\n            changeReposFilter: function(filter) {\n                this.reposFilter = filter;\n                this.repos = [];\n                this.repoTypes[filter].count = 0;\n                this.searchRepos(filter);\n            },\n\n            showRepo: function(repo, filter) {\n                switch (filter) {\n                    case 'sources':\n                        return repo.owner.id == this.uid && !repo.mirror && !repo.fork;\n                    case 'forks':\n                        return repo.owner.id == this.uid && !repo.mirror && repo.fork;\n                    case 'mirrors':\n                        return repo.mirror;\n                    case 'collaborative':\n                        return repo.owner.id != this.uid && !repo.mirror;\n                    default:\n                        return true;\n                }\n            },\n\n            searchRepos: function(reposFilter) {\n                const self = this;\n\n                this.isLoading = true;\n\n                const searchedMode = this.repoTypes[reposFilter].searchMode;\n                const searchedURL = this.searchURL;\n                const searchedQuery = this.searchQuery;\n\n                $.getJSON(searchedURL, function(result, _textStatus, request) {\n                    if (searchedURL == self.searchURL) {\n                        self.repos = result.data;\n                        const count = request.getResponseHeader('X-Total-Count');\n                        if (searchedQuery === '' && searchedMode === '') {\n                            self.reposTotalCount = count;\n                        }\n                        self.repoTypes[reposFilter].count = count;\n                    }\n                }).always(function() {\n                    if (searchedURL == self.searchURL) {\n                        self.isLoading = false;\n                    }\n                });\n            },\n\n            repoClass: function(repo) {\n                if (repo.fork) {\n                    return 'octicon octicon-repo-forked';\n                } else if (repo.mirror) {\n                    return 'octicon octicon-repo-clone';\n                } else if (repo.private) {\n                    return 'octicon octicon-lock';\n                } else {\n                    return 'octicon octicon-repo';\n                }\n            }\n        }\n    })\n}\n\nfunction initCtrlEnterSubmit() {\n    $(\".js-quick-submit\").keydown(function(e) {\n        if (((e.ctrlKey && !e.altKey) || e.metaKey) && (e.keyCode == 13 || e.keyCode == 10)) {\n            $(this).closest(\"form\").submit();\n        }\n    });\n}\n\nfunction initVueApp() {\n    const el = document.getElementById('app');\n    if (!el) {\n        return;\n    }\n\n    initVueComponents();\n\n    new Vue({\n        delimiters: ['${', '}'],\n        el: el,\n\n        data: {\n            searchLimit: document.querySelector('meta[name=_search_limit]').content,\n            suburl: document.querySelector('meta[name=_suburl]').content,\n            uid: document.querySelector('meta[name=_context_uid]').content,\n        },\n    });\n}\n\nwindow.timeAddManual = function() {\n    $('.mini.modal')\n        .modal({\n            duration: 200,\n            onApprove: function() {\n                $('#add_time_manual_form').submit();\n            }\n        }).modal('show')\n    ;\n}\n\nwindow.toggleStopwatch = function() {\n    $(\"#toggle_stopwatch_form\").submit();\n}\nwindow.cancelStopwatch = function() {\n    $(\"#cancel_stopwatch_form\").submit();\n}\n\nwindow.initHeatmap = function(appElementId, heatmapUser, locale) {\n    const el = document.getElementById(appElementId);\n    if (!el) {\n        return;\n    }\n\n    locale = locale || {};\n\n    locale.contributions = locale.contributions || 'contributions';\n    locale.no_contributions = locale.no_contributions || 'No contributions';\n\n    const vueDelimeters = ['${', '}'];\n\n    Vue.component('activity-heatmap', {\n        delimiters: vueDelimeters,\n\n        props: {\n            user: {\n                type: String,\n                required: true\n            },\n            suburl: {\n                type: String,\n                required: true\n            },\n            locale: {\n                type: Object,\n                required: true\n            }\n        },\n\n        data: function () {\n            return {\n                isLoading: true,\n                colorRange: [],\n                endDate: null,\n                values: [],\n                totalContributions: 0,\n            };\n        },\n\n        mounted: function() {\n            this.colorRange = [\n                this.getColor(0),\n                this.getColor(1),\n                this.getColor(2),\n                this.getColor(3),\n                this.getColor(4),\n                this.getColor(5)\n            ];\n            this.endDate = new Date();\n            this.loadHeatmap(this.user);\n        },\n\n        methods: {\n            loadHeatmap: function(userName) {\n                const self = this;\n                $.get(this.suburl + '/api/v1/users/' + userName + '/heatmap', function(chartRawData) {\n                    const chartData = [];\n                    for (let i = 0; i < chartRawData.length; i++) {\n                        self.totalContributions += chartRawData[i].contributions;\n                        chartData[i] = { date: new Date(chartRawData[i].timestamp * 1000), count: chartRawData[i].contributions };\n                    }\n                    self.values = chartData;\n                    self.isLoading = false;\n                });\n            },\n\n            getColor: function(idx) {\n                const el = document.createElement('div');\n                el.className = 'heatmap-color-' + idx;\n                document.body.appendChild(el);\n\n                const color = getComputedStyle(el).backgroundColor;\n\n                document.body.removeChild(el);\n\n                return color;\n            }\n        },\n\n        template: '<div><div v-show=\"isLoading\"><slot name=\"loading\"></slot></div><h4 class=\"total-contributions\" v-if=\"!isLoading\"><span v-html=\"totalContributions\"></span> total contributions in the last 12 months</h4><calendar-heatmap v-show=\"!isLoading\" :locale=\"locale\" :no-data-text=\"locale.no_contributions\" :tooltip-unit=\"locale.contributions\" :end-date=\"endDate\" :values=\"values\" :range-color=\"colorRange\" />'\n    });\n\n    new Vue({\n        delimiters: vueDelimeters,\n        el: el,\n\n        data: {\n            suburl: document.querySelector('meta[name=_suburl]').content,\n            heatmapUser: heatmapUser,\n            locale: locale\n        },\n    });\n}\n\nfunction initFilterBranchTagDropdown(selector) {\n    $(selector).each(function() {\n        const $dropdown = $(this);\n        const $data = $dropdown.find('.data');\n        const data = {\n            items: [],\n            mode: $data.data('mode'),\n            searchTerm: '',\n            noResults: '',\n            canCreateBranch: false,\n            menuVisible: false,\n            active: 0\n        };\n        $data.find('.item').each(function() {\n            data.items.push({\n                name: $(this).text(),\n                url: $(this).data('url'),\n                branch: $(this).hasClass('branch'),\n                tag: $(this).hasClass('tag'),\n                selected: $(this).hasClass('selected')\n            });\n        });\n        $data.remove();\n        new Vue({\n            delimiters: ['${', '}'],\n            el: this,\n            data: data,\n\n            beforeMount: function () {\n                const vm = this;\n\n                this.noResults = vm.$el.getAttribute('data-no-results');\n                this.canCreateBranch = vm.$el.getAttribute('data-can-create-branch') === 'true';\n\n                document.body.addEventListener('click', function(event) {\n                    if (vm.$el.contains(event.target)) {\n                        return;\n                    }\n                    if (vm.menuVisible) {\n                        Vue.set(vm, 'menuVisible', false);\n                    }\n                });\n            },\n\n            watch: {\n                menuVisible: function(visible) {\n                    if (visible) {\n                        this.focusSearchField();\n                    }\n                }\n            },\n\n            computed: {\n                filteredItems: function() {\n                    const vm = this;\n\n                    const items = vm.items.filter(function (item) {\n                        return ((vm.mode === 'branches' && item.branch)\n                                || (vm.mode === 'tags' && item.tag))\n                            && (!vm.searchTerm\n                                || item.name.toLowerCase().indexOf(vm.searchTerm.toLowerCase()) >= 0);\n                    });\n\n                    vm.active = (items.length === 0 && vm.showCreateNewBranch ? 0 : -1);\n\n                    return items;\n                },\n                showNoResults: function() {\n                    return this.filteredItems.length === 0\n                            && !this.showCreateNewBranch;\n                },\n                showCreateNewBranch: function() {\n                    const vm = this;\n                    if (!this.canCreateBranch || !vm.searchTerm || vm.mode === 'tags') {\n                        return false;\n                    }\n\n                    return vm.items.filter(function (item) {\n                        return item.name.toLowerCase() === vm.searchTerm.toLowerCase()\n                    }).length === 0;\n                }\n            },\n\n            methods: {\n                selectItem: function(item) {\n                    const prev = this.getSelected();\n                    if (prev !== null) {\n                        prev.selected = false;\n                    }\n                    item.selected = true;\n                    window.location.href = item.url;\n                },\n                createNewBranch: function() {\n                    if (!this.showCreateNewBranch) {\n                        return;\n                    }\n                    this.$refs.newBranchForm.submit();\n                },\n                focusSearchField: function() {\n                    const vm = this;\n                    Vue.nextTick(function() {\n                        vm.$refs.searchField.focus();\n                    });\n                },\n                getSelected: function() {\n                    for (let i = 0, j = this.items.length; i < j; ++i) {\n                        if (this.items[i].selected)\n                            return this.items[i];\n                    }\n                    return null;\n                },\n                getSelectedIndexInFiltered: function() {\n                    for (let i = 0, j = this.filteredItems.length; i < j; ++i) {\n                        if (this.filteredItems[i].selected)\n                            return i;\n                    }\n                    return -1;\n                },\n                scrollToActive: function() {\n                    let el = this.$refs['listItem' + this.active];\n                    if (!el || el.length === 0) {\n                        return;\n                    }\n                    if (Array.isArray(el)) {\n                        el = el[0];\n                    }\n\n                    const cont = this.$refs.scrollContainer;\n\n                     if (el.offsetTop < cont.scrollTop) {\n                         cont.scrollTop = el.offsetTop;\n                     }\n                     else if (el.offsetTop + el.clientHeight > cont.scrollTop + cont.clientHeight) {\n                        cont.scrollTop = el.offsetTop + el.clientHeight - cont.clientHeight;\n                    }\n                },\n                keydown: function(event) {\n                    const vm = this;\n                    if (event.keyCode === 40) {\n                        // arrow down\n                        event.preventDefault();\n\n                        if (vm.active === -1) {\n                            vm.active = vm.getSelectedIndexInFiltered();\n                        }\n\n                        if (vm.active + (vm.showCreateNewBranch ? 0 : 1) >= vm.filteredItems.length) {\n                            return;\n                        }\n                        vm.active++;\n                        vm.scrollToActive();\n                    }\n                    if (event.keyCode === 38) {\n                        // arrow up\n                        event.preventDefault();\n\n                         if (vm.active === -1) {\n                            vm.active = vm.getSelectedIndexInFiltered();\n                        }\n\n                         if (vm.active <= 0) {\n                            return;\n                        }\n                        vm.active--;\n                        vm.scrollToActive();\n                    }\n                    if (event.keyCode == 13) {\n                        // enter\n                        event.preventDefault();\n\n                         if (vm.active >= vm.filteredItems.length) {\n                            vm.createNewBranch();\n                        } else if (vm.active >= 0) {\n                            vm.selectItem(vm.filteredItems[vm.active]);\n                        }\n                    }\n                    if (event.keyCode == 27) {\n                        // escape\n                        event.preventDefault();\n                        vm.menuVisible = false;\n                    }\n                }\n            }\n        });\n    });\n}\n\n$(\".commit-button\").click(function(e) {\n    e.preventDefault();\n    $(this).parent().find('.commit-body').toggle();\n});\n\nfunction initNavbarContentToggle() {\n    const content = $('#navbar');\n    const toggle = $('#navbar-expand-toggle');\n    let isExpanded = false;\n    toggle.click(function() {\n        isExpanded = !isExpanded;\n        if (isExpanded) {\n            content.addClass('shown');\n            toggle.addClass('active');\n        }\n        else {\n            content.removeClass('shown');\n            toggle.removeClass('active');\n        }\n    });\n}\n\nfunction initTopicbar() {\n    const mgrBtn = $(\"#manage_topic\");\n    const editDiv = $(\"#topic_edit\");\n    const viewDiv = $(\"#repo-topics\");\n    const saveBtn = $(\"#save_topic\");\n    const topicDropdown = $('#topic_edit .dropdown');\n    const topicForm = $('#topic_edit.ui.form');\n    const topicPrompts = getPrompts();\n\n    mgrBtn.click(function() {\n        viewDiv.hide();\n        editDiv.css('display', ''); // show Semantic UI Grid\n    });\n\n    function getPrompts() {\n        const hidePrompt = $(\"div.hide#validate_prompt\"),\n            prompts = {\n                countPrompt: hidePrompt.children('#count_prompt').text(),\n                formatPrompt: hidePrompt.children('#format_prompt').text()\n            };\n        hidePrompt.remove();\n        return prompts;\n    }\n\n    saveBtn.click(function() {\n        const topics = $(\"input[name=topics]\").val();\n\n        $.post(saveBtn.data('link'), {\n            \"_csrf\": csrf,\n            \"topics\": topics\n        }, function(_data, _textStatus, xhr){\n            if (xhr.responseJSON.status === 'ok') {\n                viewDiv.children(\".topic\").remove();\n                if (topics.length) {\n                    const topicArray = topics.split(\",\");\n\n                    const last = viewDiv.children(\"a\").last();\n                    for (let i=0; i < topicArray.length; i++) {\n                        $('<div class=\"ui small label topic\" style=\"cursor:pointer;\">'+topicArray[i]+'</div>').insertBefore(last)\n                    }\n                }\n                editDiv.css('display', 'none');\n                viewDiv.show();\n            }\n        }).fail(function(xhr){\n            if (xhr.status === 422) {\n                if (xhr.responseJSON.invalidTopics.length > 0) {\n                    topicPrompts.formatPrompt = xhr.responseJSON.message;\n\n                    const invalidTopics = xhr.responseJSON.invalidTopics,\n                        topicLables = topicDropdown.children('a.ui.label');\n\n                    topics.split(',').forEach(function(value, index) {\n                        for (let i=0; i < invalidTopics.length; i++) {\n                            if (invalidTopics[i] === value) {\n                                topicLables.eq(index).removeClass(\"green\").addClass(\"red\");\n                            }\n                        }\n                    });\n                } else {\n                    topicPrompts.countPrompt = xhr.responseJSON.message;\n                }\n            }\n        }).always(function() {\n            topicForm.form('validate form');\n        });\n    });\n\n    topicDropdown.dropdown({\n        allowAdditions: true,\n        forceSelection: false,\n        fields: { name: \"description\", value: \"data-value\" },\n        saveRemoteData: false,\n        label: {\n            transition : 'horizontal flip',\n            duration   : 200,\n            variation  : false,\n            blue : true,\n            basic: true,\n        },\n        className: {\n            label: 'ui small label'\n        },\n        apiSettings: {\n            url: suburl + '/api/v1/topics/search?q={query}',\n            throttle: 500,\n            cache: false,\n            onResponse: function(res) {\n                const formattedResponse = {\n                    success: false,\n                    results: [],\n                };\n                const stripTags = function (text) {\n                    return text.replace(/<[^>]*>?/gm, \"\");\n                };\n\n                const query = stripTags(this.urlData.query.trim());\n                let found_query = false;\n                const current_topics = [];\n                topicDropdown.find('div.label.visible.topic,a.label.visible').each(function(_,e){ current_topics.push(e.dataset.value); });\n\n                if (res.topics) {\n                    let found = false;\n                    for (let i=0;i < res.topics.length;i++) {\n                        // skip currently added tags\n                        if (current_topics.indexOf(res.topics[i].topic_name) != -1){\n                            continue;\n                        }\n\n                        if (res.topics[i].topic_name.toLowerCase() === query.toLowerCase()){\n                            found_query = true;\n                        }\n                        formattedResponse.results.push({\"description\": res.topics[i].topic_name, \"data-value\": res.topics[i].topic_name});\n                        found = true;\n                    }\n                    formattedResponse.success = found;\n                }\n\n                if (query.length > 0 && !found_query){\n                    formattedResponse.success = true;\n                    formattedResponse.results.unshift({\"description\": query, \"data-value\": query});\n                } else if (query.length > 0 && found_query) {\n                    formattedResponse.results.sort(function(a, b){\n                        if (a.description.toLowerCase() === query.toLowerCase()) return -1;\n                        if (b.description.toLowerCase() === query.toLowerCase()) return 1;\n                        if (a.description > b.description) return -1;\n                        if (a.description < b.description) return 1;\n                        return 0;\n                    });\n                }\n\n\n                return formattedResponse;\n            },\n        },\n        onLabelCreate: function(value) {\n            value = value.toLowerCase().trim();\n            this.attr(\"data-value\", value).contents().first().replaceWith(value);\n            return $(this);\n        },\n        onAdd: function(addedValue, _addedText, $addedChoice) {\n            addedValue = addedValue.toLowerCase().trim();\n            $($addedChoice).attr('data-value', addedValue);\n            $($addedChoice).attr('data-text', addedValue);\n        }\n    });\n\n    $.fn.form.settings.rules.validateTopic = function(_values, regExp) {\n        const topics = topicDropdown.children('a.ui.label'),\n            status = topics.length === 0 || topics.last().attr(\"data-value\").match(regExp);\n        if (!status) {\n            topics.last().removeClass(\"green\").addClass(\"red\");\n        }\n        return status && topicDropdown.children('a.ui.label.red').length === 0;\n    };\n\n    topicForm.form({\n            on: 'change',\n            inline : true,\n            fields: {\n                topics: {\n                    identifier: 'topics',\n                    rules: [\n                        {\n                            type: 'validateTopic',\n                            value: /^[a-z0-9][a-z0-9-]{1,35}$/,\n                            prompt: topicPrompts.formatPrompt\n                        },\n                        {\n                            type: 'maxCount[25]',\n                            prompt: topicPrompts.countPrompt\n                        }\n                    ]\n                },\n            }\n        });\n}\nwindow.toggleDeadlineForm = function() {\n    $('#deadlineForm').fadeToggle(150);\n}\n\nwindow.setDeadline = function() {\n    const deadline = $('#deadlineDate').val();\n    window.updateDeadline(deadline);\n}\n\nwindow.updateDeadline = function(deadlineString) {\n    $('#deadline-err-invalid-date').hide();\n    $('#deadline-loader').addClass('loading');\n\n    let realDeadline = null;\n    if (deadlineString !== '') {\n\n        const newDate = Date.parse(deadlineString)\n\n        if (isNaN(newDate)) {\n            $('#deadline-loader').removeClass('loading');\n            $('#deadline-err-invalid-date').show();\n            return false;\n        }\n        realDeadline = new Date(newDate);\n    }\n\n    $.ajax($('#update-issue-deadline-form').attr('action') + '/deadline', {\n        data: JSON.stringify({\n            'due_date': realDeadline,\n        }),\n        headers: {\n            'X-Csrf-Token': csrf,\n            'X-Remote': true,\n        },\n        contentType: 'application/json',\n        type: 'POST',\n        success: function () {\n            reload();\n        },\n        error: function () {\n            $('#deadline-loader').removeClass('loading');\n            $('#deadline-err-invalid-date').show();\n        }\n    });\n}\n\nwindow.deleteDependencyModal = function(id, type) {\n    $('.remove-dependency')\n        .modal({\n            closable: false,\n            duration: 200,\n            onApprove: function () {\n                $('#removeDependencyID').val(id);\n                $('#dependencyType').val(type);\n                $('#removeDependencyForm').submit();\n            }\n        }).modal('show')\n    ;\n}\n\nfunction initIssueList() {\n    const repolink = $('#repolink').val();\n    const repoId = $('#repoId').val();\n    const crossRepoSearch = $('#crossRepoSearch').val();\n    let issueSearchUrl = suburl + '/api/v1/repos/' + repolink + '/issues?q={query}';\n    if (crossRepoSearch === 'true') {\n        issueSearchUrl = suburl + '/api/v1/repos/issues/search?q={query}&priority_repo_id=' + repoId;\n    }\n    $('#new-dependency-drop-list')\n        .dropdown({\n            apiSettings: {\n                url: issueSearchUrl,\n                onResponse: function(response) {\n                    const filteredResponse = {'success': true, 'results': []};\n                    const currIssueId = $('#new-dependency-drop-list').data('issue-id');\n                    // Parse the response from the api to work with our dropdown\n                    $.each(response, function(_i, issue) {\n                        // Don't list current issue in the dependency list.\n                        if(issue.id === currIssueId) {\n                            return;\n                        }\n                        filteredResponse.results.push({\n                            'name'  : '#' + issue.number + ' ' + htmlEncode(issue.title) +\n                                '<div class=\"text small dont-break-out\">' + htmlEncode(issue.repository.full_name) + '</div>',\n                            'value' : issue.id\n                        });\n                    });\n                    return filteredResponse;\n                },\n                cache: false,\n            },\n\n            fullTextSearch: true\n        });\n\n    $(\".menu a.label-filter-item\").each(function() {\n        $(this).click(function(e) {\n            if (e.altKey) {\n                e.preventDefault();\n\n                const href = $(this).attr(\"href\");\n                const id = $(this).data(\"label-id\");\n\n                const regStr = \"labels=(-?[0-9]+%2c)*(\" + id + \")(%2c-?[0-9]+)*&\";\n                const newStr = \"labels=$1-$2$3&\";\n\n                window.location = href.replace(new RegExp(regStr), newStr);\n            }\n        });\n    });\n\n    $(\".menu .ui.dropdown.label-filter\").keydown(function(e) {\n        if (e.altKey && e.keyCode == 13) {\n            const selectedItems = $(\".menu .ui.dropdown.label-filter .menu .item.selected\");\n\n            if (selectedItems.length > 0) {\n                const item = $(selectedItems[0]);\n\n                const href = item.attr(\"href\");\n                const id = item.data(\"label-id\");\n\n                const regStr = \"labels=(-?[0-9]+%2c)*(\" + id + \")(%2c-?[0-9]+)*&\";\n                const newStr = \"labels=$1-$2$3&\";\n\n                window.location = href.replace(new RegExp(regStr), newStr);\n            }\n        }\n    });\n}\nwindow.cancelCodeComment = function(btn) {\n    const form = $(btn).closest(\"form\");\n    if(form.length > 0 && form.hasClass('comment-form')) {\n        form.addClass('hide');\n        form.parent().find('button.comment-form-reply').show();\n    } else {\n        form.closest('.comment-code-cloud').remove()\n    }\n}\nwindow.onOAuthLoginClick = function() {\n    const oauthLoader = $('#oauth2-login-loader');\n    const oauthNav = $('#oauth2-login-navigator');\n\n    oauthNav.hide();\n    oauthLoader.removeClass('disabled');\n\n    setTimeout(function(){\n        // recover previous content to let user try again\n        // usually redirection will be performed before this action\n        oauthLoader.addClass('disabled');\n        oauthNav.show();\n    },5000);\n}\n"],"sourceRoot":""}
||||||| constructed merge base
{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./web_src/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","htmlEncode","text","jQuery","html","csrf","suburl","previewFileModes","simpleMDEditor","codeMirrorEditor","initCommentPreviewTab","$form","$tabMenu","find","tab","data","click","$this","$","this","post","val","$previewPanel","emojify","run","each","hljs","highlightBlock","buttonsClickOnEnter","initEditForm","length","$previewTab","split","initEditPreviewTab","$diffPreviewPanel","initEditDiffTab","updateIssuesMeta","url","action","issueIds","elementId","Promise","resolve","ajax","type","success","reload","window","location","initImagePaste","target","field","addEventListener","event","pasteEvent","callback","clipboardData","items","indexOf","blob","getAsFile","preventDefault","stopPropagation","retrieveImageFromClipboardAsBlob","img","substr","lastIndexOf","selectionStart","startPos","endPos","selectionEnd","substring","insertAtCursor","file","xhr","XMLHttpRequest","onload","status","responseText","open","setRequestHeader","formData","FormData","append","send","uploadFile","res","JSON","parse","oldval","newval","replace","replaceAndKeepCursor","uuid","input","initCommentForm","initListSubmits","selector","outerSelector","$list","$noSelect","$listMenu","hasLabelUpdateAction","labels","dropdown","promises","keys","forEach","label","promise","push","all","then","hasClass","removeClass","addClass","listIds","parent","join","selectItem","select_id","input_id","$menu","hasUpdateAction","$selectBranch","selectedValue","css","initBranchSelector","initRepository","initFilterSearchDropdown","$dropdown","fullTextSearch","selectOnKeydown","onChange","_text","_value","$choice","href","message","noResults","$data","searchTerm","canCreateBranch","menuVisible","active","branch","tag","selected","remove","Vue","delimiters","el","beforeMount","vm","$el","getAttribute","document","body","contains","set","watch","visible","focusSearchField","computed","filteredItems","filter","item","toLowerCase","showCreateNewBranch","showNoResults","methods","prev","getSelected","createNewBranch","$refs","newBranchForm","submit","nextTick","searchField","focus","j","getSelectedIndexInFiltered","scrollToActive","Array","isArray","cont","scrollContainer","offsetTop","scrollTop","clientHeight","keydown","keyCode","keyup","$prompt","toString","show","hide","change","checked","$newLabelPanel","minicolors","color_hex","modal","onApprove","$datepicker","datetimepicker","lang","inline","timepicker","startDate","formatDate","onSelectDate","ct","dateFormat","$issueTitle","$editInput","editTitleToggle","toggle","title","$segment","next","$editContentZone","$renderContent","$rawContent","$textarea","issuesTribute","attach","emojiTribute","$dropzone","$files","filenameDict","dropzone","headers","maxFiles","maxFilesize","acceptedFiles","addRemoveLinks","dictDefaultMessage","dictInvalidFileType","dictFileTooBig","dictRemoveFile","init","on","submitted","_csrf","getJSON","drop","removeAllFiles","empty","imgSrc","emit","files","$editContentForm","attr","$attachments","map","content","$content","attachments","confirm","$statusButton","$mergeButton","e","closest","initReactionSelector","reactions","popup","done","resp","react","insertBefore","appendTo","hasEmoji","$item","addLine","delLine","addPercent","parseFloat","localStorage","setItem","select","$repoComparePull","assingMenuAttributes","menu","id","Math","floor","random","initRepositoryCollaboration","initEditor","prop","$editFilename","$section","$divider","parts","getCursorPosition","last","setSelectionRange","element","trigger","$editArea","markdownFileExts","lineWrapExtensions","spec","extension","extWithDot","dataUrl","apiCall","exec","info","CodeMirror","findModeByExtension","previewLink","mime","toTextArea","SimpleMDE","autoDownloadFontAwesome","forceSync","renderingConfig","singleLineBreaks","indentWithTabs","tabSize","spellChecker","previewRender","plainText","preview","setTimeout","innerHTML","toolbar","setSimpleMDE","fromTextArea","lineNumbers","cm","_change","getValue","setCodeMirror","setOption","autoLoadMode","editorconfig","indent_style","Tab","spaces","parseInt","getOption","replaceSelection","indent_size","tab_width","$commitButton","$editForm","areYouSure","silent","dirtyClass","fieldSelector","dirty","initUserSettings","keypress","initCodeView","$select","siblings","selectRange","shiftKey","eq","getSelection","removeAllRanges","selection","hash","match","$first","offset","top","u2fSigned","stringify","contentType","fail","u2fError","u2fRegistered","errorCode","checkError","errorType","u2fErrors","1","2","3","4","5","u2fRegisterRequest","req","registeredKeys","u2fApi","register","appId","registerRequests","catch","reason","undefined","metaData","code","changeHash","history","pushState","$from","a","b","classes","showDeletePopup","dialog","closable","redirect","showAddAllPopup","Dropzone","autoDiscover","from","toStr","isCallable","fn","maxSafeInteger","pow","toLength","len","number","Number","isNaN","isFinite","abs","toInteger","min","max","arrayLike","C","TypeError","mapFn","arguments","T","A","kValue","k","assign","_varArgs","to","index","nextSource","nextKey","writable","configurable","String","endsWith","pattern","pos","Sel","createRange","SelLength","moveStart","ready","onShow","transition","direction","accordion","checkbox","progress","showActivity","slideToggle","nodes","slice","querySelectorAll","setConfig","img_dir","ignore_emoticons","getElementsByClassName","childNodes","nodeName","clipboard","Clipboard","clearSelection","setAttribute","node","encodeURIComponent","wrap","children","dataset","issueIDs","issueId","_","first","search","minCharacters","apiSettings","onResponse","response","_i","login","full_name","image","avatar_url","results","searchFields","$searchTeamBox","permission","searchTeams","$searchRepoBox","description","searchRepositories","dbType","dbDefaults","_type","defaultHost","is","toggleMigrations","authUserName","cloneAddr","startsWith","initMigration","simplemde","codemirror","cursorPos","getCursor","setCursor","line","ch","className","getInputField","initWikiForm","updateContentType","initWebhook","removeAttr","authType","onOAuth2Change","onSecurityProtocolChange","onUsePagedSearchChange","onOAuth2UseCustomURLChange","$detailModal","$checkboxes","ids","provider","initAdmin","getElementById","component","props","searchLimit","default","required","uid","organizations","isOrganization","Boolean","canCreateOrganization","organizationsTotalCount","moreReposLink","repos","reposTotalCount","reposFilter","searchQuery","isLoading","repoTypes","count","searchMode","showMoreReposLink","searchURL","repoTypeCount","mounted","searchRepos","self","changeTab","changeReposFilter","showRepo","repo","owner","mirror","fork","searchedMode","searchedURL","searchedQuery","result","_textStatus","request","getResponseHeader","always","repoClass","private","querySelector","initVueApp","ctrlKey","altKey","metaKey","isExpanded","initNavbarContentToggle","mgrBtn","editDiv","viewDiv","saveBtn","topicDropdown","topicForm","topicPrompts","hidePrompt","prompts","countPrompt","formatPrompt","getPrompts","topics","_data","responseJSON","topicArray","invalidTopics","topicLables","form","allowAdditions","forceSelection","fields","saveRemoteData","duration","variation","blue","basic","throttle","cache","formattedResponse","query","urlData","trim","found_query","current_topics","found","topic_name","unshift","sort","onLabelCreate","contents","replaceWith","onAdd","addedValue","_addedText","$addedChoice","settings","rules","validateTopic","_values","regExp","identifier","prompt","initTopicbar","ensureSupport","sign","challenge","err","allowMultiple","repolink","repoId","crossRepoSearch","issueSearchUrl","filteredResponse","currIssueId","issue","repository","regStr","newStr","RegExp","selectedItems","initIssueList","toUpperCase","wipPrefixes","sticky","isSplit","side","idx","path","tr","ntr","after","td","commentCloud","initRepoStatusChecker","migrating","repo_name","complete","$repoTemplate","checkTemplate","$templateUnits","$nonTemplate","changeOwner","_r","initTemplateSearch","getItem","routes","$cloneAddr","$repoName","arrays","$title","timeAddManual","toggleStopwatch","cancelStopwatch","initHeatmap","appElementId","heatmapUser","locale","contributions","no_contributions","vueDelimeters","user","colorRange","endDate","values","totalContributions","getColor","Date","loadHeatmap","userName","chartRawData","chartData","date","timestamp","createElement","appendChild","color","getComputedStyle","backgroundColor","removeChild","template","toggleDeadlineForm","fadeToggle","setDeadline","deadlineString","realDeadline","newDate","error","updateDeadline","deleteDependencyModal","cancelCodeComment","btn","onOAuthLoginClick","oauthLoader","oauthNav"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,+BC7ErD,SAASC,EAAWC,GACjB,OAAOC,OAAO,WAAWD,KAAKA,GAAME,OAGvC,IAAIC,EACAC,EACAC,EACAC,EACAC,EAoHJ,SAASC,EAAsBC,GAC3B,MAAMC,EAAWD,EAAME,KAAK,iBAC5BD,EAASC,KAAK,SAASC,MACvBF,EAASC,KAAK,mBAAqBD,EAASG,KAAK,WAAa,MAAMC,OAAM,WACtE,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CAClB,MAASV,EACT,KAAQ,MACR,QAAWY,EAAMF,KAAK,WACtB,KAAQJ,EAAME,KAAK,0BAA4BD,EAASG,KAAK,SAAW,eAAeM,QAE3F,SAAUN,GACN,MAAMO,EAAgBX,EAAME,KAAK,0BAA4BD,EAASG,KAAK,WAAa,MACxFO,EAAclB,KAAKW,GACnBQ,QAAQC,IAAIF,EAAc,IAC1BJ,EAAE,WAAYI,EAAc,IAAIG,MAAK,WACjCC,KAAKC,eAAeR,eAMpCS,IAkDJ,SAASC,IACyB,GAA1BX,EAAE,cAAcY,SAhDxB,SAA4BnB,GACxB,MAAMC,EAAWD,EAAME,KAAK,iBAC5BD,EAASC,KAAK,SAASC,MACvB,MAAMiB,EAAcnB,EAASC,KAAK,mBAAqBD,EAASG,KAAK,WAAa,MAC9EgB,EAAYD,SACZvB,EAAmBwB,EAAYhB,KAAK,sBAAsBiB,MAAM,KAChED,EAAYf,OAAM,WACd,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CAClB,MAASV,EACT,KAAQ,MACR,QAAWY,EAAMF,KAAK,WACtB,KAAQJ,EAAME,KAAK,0BAA4BD,EAASG,KAAK,SAAW,eAAeM,QAE3F,SAAUN,GACN,MAAMO,EAAgBX,EAAME,KAAK,0BAA4BD,EAASG,KAAK,WAAa,MACxFO,EAAclB,KAAKW,GACnBQ,QAAQC,IAAIF,EAAc,IAC1BJ,EAAE,WAAYI,EAAc,IAAIG,MAAK,WACjCC,KAAKC,eAAeR,gBAiCxCc,CAAmBf,EAAE,eAzBzB,SAAyBP,GACrB,MAAMC,EAAWD,EAAME,KAAK,iBAC5BD,EAASC,KAAK,SAASC,MACvBF,EAASC,KAAK,mBAAqBD,EAASG,KAAK,QAAU,MAAMC,OAAM,WACnE,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CAClB,MAASV,EACT,QAAWY,EAAMF,KAAK,WACtB,QAAWJ,EAAME,KAAK,0BAA4BD,EAASG,KAAK,SAAW,eAAeM,QAE9F,SAAUN,GACN,MAAMmB,EAAoBvB,EAAME,KAAK,0BAA4BD,EAASG,KAAK,QAAU,MACzFmB,EAAkB9B,KAAKW,GACvBQ,QAAQC,IAAIU,EAAkB,UAa1CC,CAAgBjB,EAAE,gBAoBtB,SAASkB,EAAiBC,EAAKC,EAAQC,EAAUC,GAC7C,OAAO,IAAIC,SAAQ,SAASC,GACxBxB,EAAEyB,KAAK,CACHC,KAAM,OACNP,IAAKA,EACLtB,KAAM,CACF,MAASV,EACT,OAAUiC,EACV,UAAaC,EACb,GAAMC,GAEVK,QAASH,OA8JrB,SAASI,IACLC,OAAOC,SAASF,SAGpB,SAASG,EAAeC,GACpBA,EAAOzB,MAAK,WACR,MAAM0B,EAAQhC,KACdgC,EAAMC,iBAAiB,SAAS,SAASC,IA7CjD,SAA0CC,EAAYC,GAClD,IAAKD,EAAWE,cACZ,OAGJ,MAAMC,EAAQH,EAAWE,cAAcC,MACvC,QAAsB,IAAZ,EAIV,IAAK,IAAIxF,EAAI,EAAGA,EAAIwF,EAAM3B,OAAQ7D,IAAK,CACnC,IAAwC,IAApCwF,EAAMxF,GAAG2E,KAAKc,QAAQ,SAAiB,SAC3C,MAAMC,EAAOF,EAAMxF,GAAG2F,YAEG,mBAAf,IACNN,EAAWO,iBACXP,EAAWQ,kBACXP,EAASI,KA6BTI,CAAiCV,GAAO,SAASW,GAC7C,MAAMxF,EAAOwF,EAAIxF,KAAKyF,OAAO,EAAGD,EAAIxF,KAAK0F,YAAY,OAzErE,SAAwBf,EAAOjE,GAC3B,GAAIiE,EAAMgB,gBAA2C,IAAzBhB,EAAMgB,eAAsB,CACpD,MAAMC,EAAWjB,EAAMgB,eACjBE,EAASlB,EAAMmB,aACrBnB,EAAMjE,MAAQiE,EAAMjE,MAAMqF,UAAU,EAAGH,GACjClF,EACAiE,EAAMjE,MAAMqF,UAAUF,EAAQlB,EAAMjE,MAAM4C,QAChDqB,EAAMgB,eAAiBC,EAAWlF,EAAM4C,OACxCqB,EAAMmB,aAAeF,EAAWlF,EAAM4C,YAEtCqB,EAAMjE,OAASA,EAgEPsF,CAAerB,EAAO,KAAO3E,EAAO,OA1BpD,SAAoBiG,EAAMlB,GACtB,MAAMmB,EAAM,IAAIC,eAEhBD,EAAIE,OAAS,WACS,KAAdF,EAAIG,QACJtB,EAASmB,EAAII,eAIrBJ,EAAIK,KAAK,OAAQzE,EAAS,gBAAgB,GAC1CoE,EAAIM,iBAAiB,eAAgB3E,GACrC,MAAM4E,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQV,EAAMA,EAAKjG,MACnCkG,EAAIU,KAAKH,GAcGI,CAAWrB,GAAK,SAASsB,GACrB,MAAMvE,EAAOwE,KAAKC,MAAMF,IA9D5C,SAA8BnC,EAAOsC,EAAQC,GACzC,GAAIvC,EAAMgB,gBAA2C,IAAzBhB,EAAMgB,eAAsB,CACpD,MAAMC,EAAWjB,EAAMgB,eACjBE,EAASlB,EAAMmB,aACrBnB,EAAMjE,MAAQiE,EAAMjE,MAAMyG,QAAQF,EAAQC,GAC1CvC,EAAMgB,eAAiBC,EAAWsB,EAAO5D,OAAS2D,EAAO3D,OACzDqB,EAAMmB,aAAeD,EAASqB,EAAO5D,OAAS2D,EAAO3D,YAErDqB,EAAMjE,MAAQiE,EAAMjE,MAAMyG,QAAQF,EAAQC,GAuD9BE,CAAqBzC,EAAO,KAAO3E,EAAO,MAAO,KAAOA,EAAO,KAAO8B,EAAS,gBAAkBS,EAAK8E,KAAO,KAC7G,MAAMC,EAAQ5E,EAAE,cAAgBH,EAAK8E,KAAO,iCAAiCxE,IAAIN,EAAK8E,MACtF3E,EAAE,UAAUiE,OAAOW,YAG5B,MAIX,SAASC,IAUL,SAASC,EAAgBC,EAAUC,GAC/B,MAAMC,EAAQjF,EAAE,OAASgF,EAAgB,SACnCE,EAAYD,EAAMtF,KAAK,cACvBwF,EAAYnF,EAAE,IAAM+E,EAAW,UACrC,IAAIK,EAAmD,UAA5BD,EAAUtF,KAAK,UAC1C,MAAMwF,EAAS,GAEfrF,EAAE,IAAM+E,GAAUO,SAAS,UAAW,UAAU,WAE5C,GADAF,EAAmD,UAA5BD,EAAUtF,KAAK,UACZ,CACtB,MAAM0F,EAAW,GACjB9H,OAAO+H,KAAKH,GAAQI,SAAQ,SAASnE,GACjC,MAAMoE,EAAQL,EAAO/D,GACfqE,EAAUzE,EACZwE,EAAM,cACNA,EAAc,OACdA,EAAM,YACNpE,GAEJiE,EAASK,KAAKD,MAElBpE,QAAQsE,IAAIN,GAAUO,KAAKlE,OAInCuD,EAAUxF,KAAK,yBAAyBG,OAAM,WAG1C,GAAgB,2BAAZiF,EAmBA,OAfI/E,EAAEC,MAAM8F,SAAS,YACjB/F,EAAEC,MAAM+F,YAAY,WACpBhG,EAAEC,MAAMN,KAAK,YAAYqG,YAAY,mBAErChG,EAAEC,MAAMgG,SAAS,WACjBjG,EAAEC,MAAMN,KAAK,YAAYsG,SAAS,kBAGtC/E,EACIiE,EAAUtF,KAAK,cACf,GACAsF,EAAUtF,KAAK,YACfG,EAAEC,MAAMJ,KAAK,OAEjBsF,EAAUtF,KAAK,SAAU,WAClB,EAGPG,EAAEC,MAAM8F,SAAS,YACjB/F,EAAEC,MAAM+F,YAAY,WACpBhG,EAAEC,MAAMN,KAAK,YAAYqG,YAAY,iBACjCZ,IACMpF,EAAEC,MAAMJ,KAAK,QAASwF,SAOjBA,EAAOrF,EAAEC,MAAMJ,KAAK,OAN3BwF,EAAOrF,EAAEC,MAAMJ,KAAK,OAAS,CACzB,aAAcsF,EAAUtF,KAAK,cAC7B,OAAU,SACV,WAAYsF,EAAUtF,KAAK,gBAOvCG,EAAEC,MAAMgG,SAAS,WACjBjG,EAAEC,MAAMN,KAAK,YAAYsG,SAAS,iBAC9Bb,IACMpF,EAAEC,MAAMJ,KAAK,QAASwF,SAOjBA,EAAOrF,EAAEC,MAAMJ,KAAK,OAN3BwF,EAAOrF,EAAEC,MAAMJ,KAAK,OAAS,CACzB,aAAcsF,EAAUtF,KAAK,cAC7B,OAAU,SACV,WAAYsF,EAAUtF,KAAK,eAQ3C,MAAMqG,EAAU,GAehB,OAdAlG,EAAEC,MAAMkG,SAASxG,KAAK,SAASY,MAAK,WAC5BP,EAAEC,MAAM8F,SAAS,YACjBG,EAAQN,KAAK5F,EAAEC,MAAMJ,KAAK,OAC1BG,EAAEA,EAAEC,MAAMJ,KAAK,gBAAgBmG,YAAY,SAE3ChG,EAAEA,EAAEC,MAAMJ,KAAK,gBAAgBoG,SAAS,WAG1B,GAAlBC,EAAQtF,OACRsE,EAAUc,YAAY,QAEtBd,EAAUe,SAAS,QAEvBjG,EAAEA,EAAEC,MAAMkG,SAAStG,KAAK,OAAOM,IAAI+F,EAAQE,KAAK,OACzC,KAEXjB,EAAUxF,KAAK,mBAAmBG,OAAM,YAChCsF,GAAoC,2BAAZL,IACxB7D,EACIiE,EAAUtF,KAAK,cACf,QACAsF,EAAUtF,KAAK,YACf,IACFiG,KAAKlE,GAGX5B,EAAEC,MAAMkG,SAASxG,KAAK,SAASY,MAAK,WAChCP,EAAEC,MAAM+F,YAAY,WACpBhG,EAAEC,MAAMN,KAAK,YAAYqG,YAAY,oBAGzCf,EAAMtF,KAAK,SAASY,MAAK,WACrBP,EAAEC,MAAMgG,SAAS,WAErBf,EAAUc,YAAY,QACtBhG,EAAEA,EAAEC,MAAMkG,SAAStG,KAAK,OAAOM,IAAI,OAU3C,SAASkG,EAAWC,EAAWC,GAC3B,MAAMC,EAAQxG,EAAEsG,EAAY,UACtBrB,EAAQjF,EAAE,MAAQsG,EAAY,SAC9BG,EAA0C,UAAxBD,EAAM3G,KAAK,UAEnC2G,EAAM7G,KAAK,yBAAyBG,OAAM,WActC,OAbAE,EAAEC,MAAMkG,SAASxG,KAAK,SAASY,MAAK,WAChCP,EAAEC,MAAM+F,YAAY,sBAGxBhG,EAAEC,MAAMgG,SAAS,mBACbQ,GACAvF,EACIsF,EAAM3G,KAAK,cACX,GACA2G,EAAM3G,KAAK,YACXG,EAAEC,MAAMJ,KAAK,OACfiG,KAAKlE,GAEH2E,GACJ,IAAK,gBACDtB,EAAMtF,KAAK,aAAaT,KAAK,wBAA0Bc,EAAEC,MAAMJ,KAAK,QAAU,IAC1Ed,EAAWiB,EAAEC,MAAMjB,QAAU,QACjC,MACJ,IAAK,eACDiG,EAAMtF,KAAK,aAAaT,KAAK,wBAA0Bc,EAAEC,MAAMJ,KAAK,QAAU,qCACpCG,EAAEC,MAAMJ,KAAK,UAAY,IAC/Dd,EAAWiB,EAAEC,MAAMjB,QAAU,QAEzCgB,EAAE,MAAQsG,EAAY,oBAAoBL,SAAS,QACnDjG,EAAEuG,GAAUpG,IAAIH,EAAEC,MAAMJ,KAAK,UAEjC2G,EAAM7G,KAAK,mBAAmBG,OAAM,WAChCE,EAAEC,MAAMkG,SAASxG,KAAK,yBAAyBY,MAAK,WAChDP,EAAEC,MAAM+F,YAAY,sBAGpBS,GACAvF,EACIsF,EAAM3G,KAAK,cACX,GACA2G,EAAM3G,KAAK,YACXG,EAAEC,MAAMJ,KAAK,OACfiG,KAAKlE,GAGXqD,EAAMtF,KAAK,aAAaT,KAAK,IAC7B+F,EAAMtF,KAAK,cAAcqG,YAAY,QACrChG,EAAEuG,GAAUpG,IAAI,OAvLS,GAA7BH,EAAE,iBAAiBY,UAjN3B,WACI,MAAM8F,EAAgB1G,EAAE,qBACJ0G,EAAc/G,KAAK,wBAC3BA,KAAK,yBAAyBG,OAAM,WAC5C,MAAM6G,EAAgB3G,EAAEC,MAAMJ,KAAK,MACnCG,EAAEA,EAAEC,MAAMJ,KAAK,gBAAgBM,IAAIwG,GACnCD,EAAc/G,KAAK,oBAAoBX,KAAK2H,MAEhDD,EAAc/G,KAAK,qBAAqBG,OAAM,WAK1C,OAJA4G,EAAc/G,KAAK,kCAAkCiH,IAAI,UAAW,QACpEF,EAAc/G,KAAK,oBAAoBqG,YAAY,SACnDhG,EAAEA,EAAEC,MAAMJ,KAAK,WAAW+G,IAAI,UAAW,SACzC5G,EAAEC,MAAMN,KAAK,SAASsG,SAAS,UACxB,KAwMXY,GACArH,EAAsBQ,EAAE,kBACxB+B,EAAe/B,EAAE,2BA6HjB8E,EAAgB,eAAgB,UAChCA,EAAgB,mBAAoB,aACpCA,EAAgB,0BAA2B,aAuD3CuB,EAAW,oBAAqB,iBAChCA,EAAW,mBAAoB,iBA+FnC,SAASS,IACL,GAA+B,GAA3B9G,EAAE,eAAeY,OACjB,OAGJ,SAASmG,EAAyBhC,GAC9B,MAAMiC,EAAYhH,EAAE+E,GACpBiC,EAAU1B,SAAS,CACf2B,gBAAgB,EAChBC,iBAAiB,EACjBC,SAAU,SAAUC,EAAOC,EAAQC,GAC3BA,EAAQzH,KAAK,SACbgC,OAAOC,SAASyF,KAAOD,EAAQzH,KAAK,SAG5C2H,QAAS,CAACC,UAAWT,EAAUnH,KAAK,iBAgD5C,IA3CIG,EAAE,yBAAyBY,OAAS,GACpC,sBAAwBA,OAAS,IAmnErCZ,EAlnEgC,+BAknEpBO,MAAK,WACb,MACMmH,EADY1H,EAAEC,MACIN,KAAK,SACvBE,EAAO,CACT0C,MAAO,GACPrE,KAAMwJ,EAAM7H,KAAK,QACjB8H,WAAY,GACZF,UAAW,GACXG,iBAAiB,EACjBC,aAAa,EACbC,OAAQ,GAEZJ,EAAM/H,KAAK,SAASY,MAAK,WACrBV,EAAK0C,MAAMqD,KAAK,CACZtI,KAAM0C,EAAEC,MAAMjB,OACdmC,IAAKnB,EAAEC,MAAMJ,KAAK,OAClBkI,OAAQ/H,EAAEC,MAAM8F,SAAS,UACzBiC,IAAKhI,EAAEC,MAAM8F,SAAS,OACtBkC,SAAUjI,EAAEC,MAAM8F,SAAS,iBAGnC2B,EAAMQ,SACN,IAAIC,IAAI,CACJC,WAAY,CAAC,KAAM,KACnBC,GAAIpI,KACJJ,KAAMA,EAENyI,YAAa,WACT,MAAMC,EAAKtI,KAEXA,KAAKwH,UAAYc,EAAGC,IAAIC,aAAa,mBACrCxI,KAAK2H,gBAAoE,SAAlDW,EAAGC,IAAIC,aAAa,0BAE3CC,SAASC,KAAKzG,iBAAiB,SAAS,SAASC,GACzCoG,EAAGC,IAAII,SAASzG,EAAMH,SAGtBuG,EAAGV,aACHM,IAAIU,IAAIN,EAAI,eAAe,OAKvCO,MAAO,CACHjB,YAAa,SAASkB,GACdA,GACA9I,KAAK+I,qBAKjBC,SAAU,CACNC,cAAe,WACX,MAAMX,EAAKtI,KAELsC,EAAQgG,EAAGhG,MAAM4G,QAAO,SAAUC,GACpC,OAAqB,aAAZb,EAAGrK,MAAuBkL,EAAKrB,QAChB,SAAZQ,EAAGrK,MAAmBkL,EAAKpB,QAC9BO,EAAGZ,YACDyB,EAAK9L,KAAK+L,cAAc7G,QAAQ+F,EAAGZ,WAAW0B,gBAAkB,MAK/E,OAFAd,EAAGT,OAA2B,IAAjBvF,EAAM3B,QAAgB2H,EAAGe,oBAAsB,GAAK,EAE1D/G,GAEXgH,cAAe,WACX,OAAqC,IAA9BtJ,KAAKiJ,cAActI,SACdX,KAAKqJ,qBAErBA,oBAAqB,WACjB,MAAMf,EAAKtI,KACX,SAAKA,KAAK2H,kBAAoBW,EAAGZ,YAA0B,SAAZY,EAAGrK,OAMpC,IAFPqK,EAAGhG,MAAM4G,QAAO,SAAUC,GAC7B,OAAOA,EAAK9L,KAAK+L,gBAAkBd,EAAGZ,WAAW0B,iBAClDzI,SAIX4I,QAAS,CACLnD,WAAY,SAAS+C,GACjB,MAAMK,EAAOxJ,KAAKyJ,cACL,OAATD,IACAA,EAAKxB,UAAW,GAEpBmB,EAAKnB,UAAW,EAChBpG,OAAOC,SAASyF,KAAO6B,EAAKjI,KAEhCwI,gBAAiB,WACR1J,KAAKqJ,qBAGVrJ,KAAK2J,MAAMC,cAAcC,UAE7Bd,iBAAkB,WACd,MAAMT,EAAKtI,KACXkI,IAAI4B,UAAS,WACTxB,EAAGqB,MAAMI,YAAYC,YAG7BP,YAAa,WACT,IAAK,IAAI3M,EAAI,EAAGmN,EAAIjK,KAAKsC,MAAM3B,OAAQ7D,EAAImN,IAAKnN,EAC5C,GAAIkD,KAAKsC,MAAMxF,GAAGkL,SACd,OAAOhI,KAAKsC,MAAMxF,GAE1B,OAAO,MAEXoN,2BAA4B,WACxB,IAAK,IAAIpN,EAAI,EAAGmN,EAAIjK,KAAKiJ,cAActI,OAAQ7D,EAAImN,IAAKnN,EACpD,GAAIkD,KAAKiJ,cAAcnM,GAAGkL,SACtB,OAAOlL,EAEf,OAAQ,GAEZqN,eAAgB,WACZ,IAAI/B,EAAKpI,KAAK2J,MAAM,WAAa3J,KAAK6H,QACtC,IAAKO,GAAoB,IAAdA,EAAGzH,OACV,OAEAyJ,MAAMC,QAAQjC,KACdA,EAAKA,EAAG,IAGZ,MAAMkC,EAAOtK,KAAK2J,MAAMY,gBAEnBnC,EAAGoC,UAAYF,EAAKG,UACpBH,EAAKG,UAAYrC,EAAGoC,UAEfpC,EAAGoC,UAAYpC,EAAGsC,aAAeJ,EAAKG,UAAYH,EAAKI,eAC7DJ,EAAKG,UAAYrC,EAAGoC,UAAYpC,EAAGsC,aAAeJ,EAAKI,eAG/DC,QAAS,SAASzI,GACd,MAAMoG,EAAKtI,KACX,GAAsB,KAAlBkC,EAAM0I,QAAgB,CAQtB,GANA1I,EAAMQ,kBAEa,IAAf4F,EAAGT,SACHS,EAAGT,OAASS,EAAG4B,8BAGf5B,EAAGT,QAAUS,EAAGe,oBAAsB,EAAI,IAAMf,EAAGW,cAActI,OACjE,OAEJ2H,EAAGT,SACHS,EAAG6B,iBAEP,GAAsB,KAAlBjI,EAAM0I,QAAgB,CAQrB,GAND1I,EAAMQ,kBAEc,IAAf4F,EAAGT,SACJS,EAAGT,OAASS,EAAG4B,8BAGd5B,EAAGT,QAAU,EACd,OAEJS,EAAGT,SACHS,EAAG6B,iBAEc,IAAjBjI,EAAM0I,UAEN1I,EAAMQ,iBAED4F,EAAGT,QAAUS,EAAGW,cAActI,OAC/B2H,EAAGoB,kBACIpB,EAAGT,QAAU,GACpBS,EAAGlC,WAAWkC,EAAGW,cAAcX,EAAGT,UAGrB,IAAjB3F,EAAM0I,UAEN1I,EAAMQ,iBACN4F,EAAGV,aAAc,UAhyEjC7H,EAAE,yBAAyBY,OAAS,GACpCmG,EAAyB,0BAIzB/G,EAAE,gCAAgCY,OAAS,IAC3CZ,EAAE,cAAc8K,OAAM,WAClB,MAAMC,EAAU/K,EAAE,4BACdA,EAAEC,MAAME,MAAM6K,WAAW3B,eAAiBrJ,EAAEC,MAAMJ,KAAK,QAAQmL,WAAW3B,cAC1E0B,EAAQE,OAERF,EAAQG,UAKhBlL,EAAE,kBAAkBmL,QAAO,WACnBlL,KAAKmL,SACLpL,EAAEA,EAAEC,MAAMJ,KAAK,WAAWmG,YAAY,YACjChG,EAAEC,MAAMJ,KAAK,YAAYG,EAAEA,EAAEC,MAAMJ,KAAK,YAAYoG,SAAS,cAElEjG,EAAEA,EAAEC,MAAMJ,KAAK,WAAWoG,SAAS,YAC9BjG,EAAEC,MAAMJ,KAAK,YAAYG,EAAEA,EAAEC,MAAMJ,KAAK,YAAYmG,YAAY,gBAG7EhG,EAAE,wBAAwBmL,QAAO,WACX,SAAdlL,KAAKjC,OACLgC,EAAEA,EAAEC,MAAMJ,KAAK,WAAWoG,SAAS,iBACI,IAA5BjG,EAAEC,MAAMJ,KAAK,YAA4BG,EAAEA,EAAEC,MAAMJ,KAAK,YAAYmG,YAAY,aACtE,QAAd/F,KAAKjC,QACZgC,EAAEA,EAAEC,MAAMJ,KAAK,WAAWmG,YAAY,iBACC,IAA5BhG,EAAEC,MAAMJ,KAAK,YAA6BG,EAAEA,EAAEC,MAAMJ,KAAK,YAAYoG,SAAS,iBAMjGjG,EAAE,sBAAsBY,OAAS,EAAG,CAEpC,MAAMyK,EAAiBrL,EAAE,sBACzBA,EAAE,qBAAqBF,OAAM,WACzBuL,EAAeJ,UAEnBjL,EAAE,8BAA8BF,OAAM,WAClCuL,EAAeH,UAGnBlL,EAAE,iBAAiBO,MAAK,WACpBP,EAAEC,MAAMqL,gBAEZtL,EAAE,qBAAqBF,OAAM,WACzB,MAAMyL,EAAYvL,EAAEC,MAAMJ,KAAK,aAC/BG,EAAE,iBAAiBG,IAAIoL,GACvBvL,EAAE,4BAA4B4G,IAAI,mBAAoB2E,MAE1DvL,EAAE,sBAAsBF,OAAM,WAW1B,OAVAE,EAAE,mBAAmBG,IAAIH,EAAEC,MAAMJ,KAAK,OACtCG,EAAE,gCAAgCG,IAAIH,EAAEC,MAAMJ,KAAK,UACnDG,EAAE,qCAAqCG,IAAIH,EAAEC,MAAMJ,KAAK,gBACxDG,EAAE,6BAA6BG,IAAIH,EAAEC,MAAMJ,KAAK,UAChDG,EAAE,4BAA4B4G,IAAI,mBAAoB5G,EAAEC,MAAMJ,KAAK,UACnEG,EAAE,qBAAqBwL,MAAM,CACzBC,UAAW,WACPzL,EAAE,oBAAoB8J,YAE3B0B,MAAM,SACF,KAKf,GAAIxL,EAAE,6BAA6BY,OAAS,EAAG,CAC3C,MAAM8K,EAAc1L,EAAE,yBACtB0L,EAAYC,eAAe,CACvBC,KAAMF,EAAY7L,KAAK,QACvBgM,QAAQ,EACRC,YAAY,EACZC,UAAWL,EAAY7L,KAAK,cAC5BmM,WAAY,QACZC,aAAc,SAAUC,GACpBlM,EAAE,aAAaG,IAAI+L,EAAGC,WAAW,aAGzCnM,EAAE,eAAeF,OAAM,WAEnB,OADAE,EAAE,aAAaG,IAAI,KACZ,KAKf,GAAIH,EAAE,0BAA0BY,OAAS,EAAG,CAExC,MAAMwL,EAAcpM,EAAE,gBAChBqM,EAAarM,EAAE,2BACfsM,EAAkB,WAMpB,OALAF,EAAYG,SACZvM,EAAE,gBAAgBuM,SAClBvM,EAAE,qBAAqBuM,SACvBvM,EAAE,YAAYuM,SACdF,EAAWpC,SACJ,GAEXjK,EAAE,eAAeF,MAAMwM,GACvBtM,EAAE,sBAAsBF,MAAMwM,GAC9BtM,EAAE,oBAAoBF,MAAMwM,GAAiBxM,OAAM,WAC/C,OAA+B,GAA3BuM,EAAWlM,MAAMS,QACjByL,EAAWlM,OAASiM,EAAYpN,QAChCqN,EAAWlM,IAAIiM,EAAYpN,SACpB,IAGXgB,EAAEE,KAAKF,EAAEC,MAAMJ,KAAK,cAAe,CAC3B,MAASV,EACT,MAASkN,EAAWlM,QAExB,SAAUN,GACNwM,EAAWlM,IAAIN,EAAK2M,OACpBJ,EAAYpN,KAAKa,EAAK2M,OACtB5K,QAED,MAIX5B,EAAE,iBAAiBF,OAAM,WACrB,MAAM2M,EAAWzM,EAAEC,MAAMkG,SAASA,SAASA,SAASuG,OAC9CC,EAAmBF,EAAS9M,KAAK,sBACjCiN,EAAiBH,EAAS9M,KAAK,mBAC/BkN,EAAcJ,EAAS9M,KAAK,gBAClC,IAAImN,EAGJ,GAAsC,GAAlCH,EAAiBzN,OAAO0B,OAAa,CACrC+L,EAAiBzN,KAAKc,EAAE,sBAAsBd,QAC9C4N,EAAYH,EAAiBhN,KAAK,YAClCoN,cAAcC,OAAOF,EAAUlP,OAC/BqP,aAAaD,OAAOF,EAAUlP,OAE9B,MAAMsP,EAAYP,EAAiBhN,KAAK,aACxCuN,EAAUrN,KAAK,SAAS,GACxB,MAAMsN,EAASR,EAAiBhN,KAAK,kBACrC,GAAIuN,EAAUtM,OAAS,EAAG,CACtB,MAAMwM,EAAe,GACrBF,EAAUG,SAAS,CACflM,IAAK+L,EAAUrN,KAAK,cACpByN,QAAS,CAAC,eAAgBnO,GAC1BoO,SAAUL,EAAUrN,KAAK,YACzB2N,YAAaN,EAAUrN,KAAK,YAC5B4N,cAA8C,QAA9BP,EAAUrN,KAAK,WAAwB,KAAOqN,EAAUrN,KAAK,WAC7E6N,gBAAgB,EAChBC,mBAAoBT,EAAUrN,KAAK,mBACnC+N,oBAAqBV,EAAUrN,KAAK,sBACpCgO,eAAgBX,EAAUrN,KAAK,gBAC/BiO,eAAgBZ,EAAUrN,KAAK,eAC/BkO,KAAM,WACF9N,KAAK+N,GAAG,WAAW,SAAUzK,EAAM1D,GAC/BuN,EAAa7J,EAAKjG,MAAQ,CACtB,KAAQuC,EAAK8E,KACb,WAAa,GAEjB,MAAMC,EAAQ5E,EAAE,cAAgBH,EAAK8E,KAAO,iCAAiCxE,IAAIN,EAAK8E,MACtFwI,EAAOlJ,OAAOW,MAElB3E,KAAK+N,GAAG,eAAe,SAAUzK,GACvBA,EAAKjG,QAAQ8P,IAGnBpN,EAAE,IAAMoN,EAAa7J,EAAKjG,MAAMqH,MAAMuD,SAClCgF,EAAUrN,KAAK,eAAiBqN,EAAUrN,KAAK,UAAYuN,EAAa7J,EAAKjG,MAAM2Q,WACnFjO,EAAEE,KAAKgN,EAAUrN,KAAK,cAAe,CACjC0D,KAAM6J,EAAa7J,EAAKjG,MAAMqH,KAC9BuJ,MAAOhB,EAAUrN,KAAK,cAIlCI,KAAK+N,GAAG,UAAU,WACdhO,EAAEO,KAAK6M,GAAc,SAAS9P,GAC1B8P,EAAa9P,GAAM2Q,WAAY,QAGvChO,KAAK+N,GAAG,UAAU,WACdhO,EAAEmO,QAAQxB,EAAiB9M,KAAK,mBAAmB,SAASA,GACxD,MAAMuO,EAAOlB,EAAUtP,IAAI,GAAGyP,SAC9Be,EAAKC,gBAAe,GACpBlB,EAAOmB,QACPtO,EAAEO,KAAKV,GAAM,WACT,MAAM0O,EAAUrB,EAAUrN,KAAK,cAAgB,IAAMI,KAAK0E,KAC1DyJ,EAAKI,KAAK,YAAavO,MACvBmO,EAAKI,KAAK,YAAavO,KAAMsO,GAC7BH,EAAKI,KAAK,WAAYvO,MACtBmO,EAAKK,MAAM7I,KAAK3F,MAChBmN,EAAanN,KAAK3C,MAAQ,CACtB,WAAa,EACb,KAAQ2C,KAAK0E,MAEjBuI,EAAUvN,KAAK,YAAc4O,EAAS,MAAM3H,IAAI,YAAa,QAC7D,MAAMhC,EAAQ5E,EAAE,cAAgBC,KAAK0E,KAAO,iCAAiCxE,IAAIF,KAAK0E,MACtFwI,EAAOlJ,OAAOW,eAMlCsI,EAAUtP,IAAI,GAAGyP,SAASmB,KAAK,UAGnC,MAAME,EAAmB/B,EAAiBhN,KAAK,oBACzCD,EAAWgP,EAAiB/O,KAAK,iBACvCD,EAASiP,KAAK,aAAchC,EAAiB9M,KAAK,UAClDH,EAASiP,KAAK,eAAgBhC,EAAiB9M,KAAK,YACpDH,EAASC,KAAK,eAAegP,KAAK,WAAYhC,EAAiB9M,KAAK,UACpEH,EAASC,KAAK,iBAAiBgP,KAAK,WAAYhC,EAAiB9M,KAAK,YACtE6O,EAAiB/O,KAAK,kBAAkBgP,KAAK,WAAYhC,EAAiB9M,KAAK,UAC/E6O,EAAiB/O,KAAK,oBAAoBgP,KAAK,WAAYhC,EAAiB9M,KAAK,YAEjFL,EAAsBkP,GAEtB/B,EAAiBhN,KAAK,kBAAkBG,OAAM,WAC1C8M,EAAe3B,OACf0B,EAAiBzB,OACjBgC,EAAUtP,IAAI,GAAGyP,SAASmB,KAAK,aAEnC7B,EAAiBhN,KAAK,gBAAgBG,OAAM,WACxC8M,EAAe3B,OACf0B,EAAiBzB,OACjB,MAAM0D,EAAezB,EAAOxN,KAAK,gBAAgBkP,KAAI,WACjD,OAAO7O,EAAEC,MAAME,SAChBvC,MACHoC,EAAEE,KAAKyM,EAAiB9M,KAAK,cAAe,CACxC,MAASV,EACT,QAAW2N,EAAU3M,MACrB,QAAWwM,EAAiB9M,KAAK,WACjC,MAAS+O,IAEb,SAAU/O,GACa,GAAfA,EAAKe,OACLgM,EAAe1N,KAAKc,EAAE,eAAed,SAErC0N,EAAe1N,KAAKW,EAAKiP,SACzBzO,QAAQC,IAAIsM,EAAe,IAC3B5M,EAAE,WAAY4M,EAAe,IAAIrM,MAAK,WAClCC,KAAKC,eAAeR,UAG5B,MAAM8O,EAAWtC,EAAStG,SACtB4I,EAASpP,KAAK,oBAAoBiB,OAUP,IAApBf,EAAKmP,YACZD,EAASpP,KAAK,oBAAoBwG,SAAS+B,SAE3C6G,EAASpP,KAAK,oBAAoBT,KAAKW,EAAKmP,aAZrB,IAApBnP,EAAKmP,cACJD,EAAS9K,OACT,6FAKA8K,EAASpP,KAAK,oBAAoBT,KAAKW,EAAKmP,cAOpD9B,EAAUtP,IAAI,GAAGyP,SAASmB,KAAK,UAC/BtB,EAAUtP,IAAI,GAAGyP,SAASmB,KAAK,qBAIvC1B,EAAYL,EAAS9M,KAAK,YAU9B,OANAgN,EAAiB1B,OACjB2B,EAAe1B,OACe,GAA1B4B,EAAU3M,MAAMS,QAChBkM,EAAU3M,IAAI0M,EAAY7N,QAE9B8N,EAAU7C,SACH,KAIXjK,EAAE,mBAAmBF,OAAM,WACvB,MAAMC,EAAQC,EAAEC,MAQhB,OAPIgP,QAAQlP,EAAMF,KAAK,YACnBG,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CACtB,MAASV,IACVwC,SAAQ,WACP3B,EAAE,IAAMD,EAAMF,KAAK,eAAeqI,aAGnC,KAIX,MAAMgH,EAAgBlP,EAAE,kBACxBA,EAAE,4BAA4B8K,OAAM,WACJ,GAAxB9K,EAAEC,MAAME,MAAMS,OACdsO,EAAclQ,KAAKkQ,EAAcrP,KAAK,WAEtCqP,EAAclQ,KAAKkQ,EAAcrP,KAAK,0BAG9CqP,EAAcpP,OAAM,WAChBE,EAAE,WAAWG,IAAI+O,EAAcrP,KAAK,eACpCG,EAAE,iBAAiB8J,YAIvB,MAAMqF,EAAenP,EAAE,0BACvBmP,EAAanB,GAAG,SAAS,SAASoB,GAC9BA,EAAEzM,iBACF3C,EAAE,IAAMA,EAAEC,MAAMJ,KAAK,MAAQ,WAAWoL,OACxCjL,EAAEC,MAAMkG,SAAS+E,UAErBlL,EAAE,6BAA6BsF,SAAS,CACpC6B,SAAU,SAAUC,EAAOC,EAAQC,GAC3BA,EAAQzH,KAAK,QACbsP,EAAaxP,KAAK,gBAAgBX,KAAKsI,EAAQtI,QAC/CmQ,EAAatP,KAAK,KAAMyH,EAAQzH,KAAK,WAIjDG,EAAE,iBAAiBgO,GAAG,SAAS,SAASoB,GACpCA,EAAEzM,iBACF3C,EAAEC,MAAMoP,QAAQ,SAASnE,OACzBiE,EAAahJ,SAAS8E,UAtwBlC,SAASqE,EAAqBnJ,GAC1B,IAAIoJ,EAAY,GACXpJ,IACDA,EAASnG,EAAE0I,UACX6G,EAAY,iBAGhBpJ,EAAOxG,KAAK4P,EAAY,WAAWC,MAAM,CAAC,SAAY,cAAe,SAAY,CAAC,QAAW,QAAS,MAAS,UAE/GrJ,EAAOxG,KAAK,qCAAuC4P,EAAY,WAAWvB,GAAG,SAAS,SAASoB,GAC3F,MAAM7G,EAAKtI,KAGX,GAFAmP,EAAEzM,iBAEE3C,EAAEC,MAAM8F,SAAS,YAAa,OAElC,MAGM5E,GAHYnB,EAAEC,MAAM8F,SAAS,QAC3B/F,EAAEC,MAAMoP,QAAQ,oBAAoBxP,KAAK,cACzCG,EAAEC,MAAMJ,KAAK,eACG,KAAOG,EAAEC,MAAM8F,SAAS,QAAU,UAAY,SACtE/F,EAAEyB,KAAK,CACHC,KAAM,OACNP,IAAKA,EACLtB,KAAM,CACF,MAASV,EACT,QAAWa,EAAEC,MAAMJ,KAAK,cAE7B4P,MAAK,SAASC,GACb,GAAIA,IAASA,EAAKxQ,MAAQwQ,EAAKpB,OAAQ,CACnC,MAAMQ,EAAU9O,EAAEuI,GAAI8G,QAAQ,YAC9B,IAAIM,EAAQb,EAAQnP,KAAK,sBAIzB,IAHK+P,EAAKpB,OAASqB,EAAM/O,OAAS,GAC9B+O,EAAMzH,UAELwH,EAAKpB,MAAO,CACbqB,EAAQ3P,EAAE,qDACV,MAAMgP,EAAcF,EAAQnP,KAAK,yBAC7BqP,EAAYpO,OAAS,EACrB+O,EAAMC,aAAaZ,GAEnBW,EAAME,SAASf,GAEnBa,EAAMzQ,KAAKwQ,EAAKxQ,MAChB,MAAM4Q,EAAWH,EAAMhQ,KAAK,cAC5B,IAAK,IAAI5C,EAAI,EAAGA,EAAI+S,EAASlP,OAAQ7D,IACjCsD,QAAQC,IAAIwP,EAASlS,IAAIb,IAE7B4S,EAAMhQ,KAAK,aAAa2F,WACxBgK,EAAqBK,WA0tBjCL,GAIAtP,EAAE,oBAAoBY,OAAS,GAC/BZ,EAAE,iBAAiBO,MAAK,WACpB,MAAMwP,EAAQ/P,EAAEC,MACV+P,EAAUD,EAAMpQ,KAAK,uBAAuBE,KAAK,QACjDoQ,EAAUF,EAAMpQ,KAAK,uBAAuBE,KAAK,QACjDqQ,EAAaC,WAAWH,IAAYG,WAAWH,GAAWG,WAAWF,IAAY,IACvFF,EAAMpQ,KAAK,aAAaiH,IAAI,QAASsJ,EAAa,QAK1DlQ,EAAE,mBAAmBF,OAAM,WACvBE,EAAE,cAAchB,KAAKgB,EAAEC,MAAMJ,KAAK,SAClCG,EAAE,mBAAmBG,IAAIH,EAAEC,MAAMJ,KAAK,SACtCG,EAAEC,MAAMgG,SAAS,QACjBjG,EAAE,qBAAqBgG,YAAY,QACnCoK,aAAaC,QAAQ,sBAAuB,UAEhDrQ,EAAE,qBAAqBF,OAAM,WACzBE,EAAE,cAAchB,KAAKgB,EAAEC,MAAMJ,KAAK,SAClCG,EAAE,mBAAmBG,IAAIH,EAAEC,MAAMJ,KAAK,SACtCG,EAAEC,MAAMgG,SAAS,QACjBjG,EAAE,mBAAmBgG,YAAY,QACjCoK,aAAaC,QAAQ,sBAAuB,YAEhDrQ,EAAE,mBAAmBF,OAAM,WACvBE,EAAEC,MAAMqQ,YAIZ,MAAMC,EAAmBvQ,EAAE,4BACvBuQ,EAAiB3P,OAAS,IAC1BmG,EAAyB,4BAEzBwJ,EAAiB5Q,KAAK,oBAAoBqO,GAAG,SAAS,SAASoB,GAC3DA,EAAEzM,iBACF4N,EAAiB5Q,KAAK,qBAAqBsL,OAC3CjL,EAAEC,MAAMkG,SAAS+E,WAKrBlL,EAAE,iCAAiCY,OAAS,IAC5CmG,EAAyB,iCACzB/G,EAAE,yCAAyCmL,QAAO,WAC1ClL,KAAKmL,QACLpL,EAAEA,EAAEC,MAAMJ,KAAK,WAAWmG,YAAY,YAEtChG,EAAEA,EAAEC,MAAMJ,KAAK,WAAWoG,SAAS,gBAgHnD,SAASuK,EAAqBC,GAC1B,MAAMC,EAAKC,KAAKC,MAAMD,KAAKE,SAAWF,KAAKC,MAAM,MAUjD,OATAH,EAAK9B,KAAK,aAAc8B,EAAK9B,KAAK,cAAgB+B,GAClDD,EAAK9B,KAAK,eAAgB8B,EAAK9B,KAAK,gBAAkB+B,GACtDD,EAAK9Q,KAAK,SAASY,MAAK,WACpB,MAAMX,EAAMI,EAAEC,MAAM0O,KAAK,YAAc+B,EACvC1Q,EAAEC,MAAM0O,KAAK,WAAY/O,MAE7B6Q,EAAKtK,SAASxG,KAAK,uBAAuBgP,KAAK,WAAY,QAAU+B,GACrED,EAAKtK,SAASxG,KAAK,yBAAyBgP,KAAK,WAAY,UAAY+B,GACzElR,EAAsBiR,EAAKtK,OAAO,UAC3BuK,EAGX,SAASI,IAEL9Q,EAAE,2BAA2BF,OAAM,WAC/B,MAAM0G,EAAQxG,EAAEC,MAAMkG,SACtBnG,EAAEE,KAAKsG,EAAM3G,KAAK,OAAQ,CACtB,MAASV,EACT,IAAOqH,EAAM3G,KAAK,OAClB,KAAQG,EAAEC,MAAMJ,KAAK,cAuLjC,SAASkR,IACL/Q,EAAE,gCAAgCmL,QAAO,WAChB,wBAAjBnL,EAAEC,MAAME,OACRH,EAAE,2BAA2BiL,OAC7BjL,EAAE,iCAAiCgR,KAAK,YAAW,KAEnDhR,EAAE,2BAA2BkL,OAC7BlL,EAAE,iCAAiCgR,KAAK,YAAW,IAEvDhR,EAAE,kBAAkBhB,KAAKgB,EAAEC,MAAM0O,KAAK,mBAG1C,MAAMsC,EAAgBjR,EAAE,cACxBiR,EAAcnG,OAAM,SAAUsE,GAC1B,MAAM8B,EAAWlR,EAAE,4BACbmR,EAAWnR,EAAE,2BACnB,IAAIhC,EACAoT,EAaJ,GAXiB,GAAbhC,EAAEvE,SACiC,GAA/B7K,EAAEC,MAAMoR,qBACJH,EAAStQ,OAAS,IAClB5C,EAAQkT,EAASI,OAAO3R,KAAK,KAAKX,OAClCgB,EAAEC,MAAME,IAAInC,EAAQgC,EAAEC,MAAME,OAC5BH,EAAEC,MAAM,GAAGsR,kBAAkBvT,EAAM4C,OAAQ5C,EAAM4C,QACjDsQ,EAASI,OAAOpJ,SAChBiJ,EAASG,OAAOpJ,UAIX,KAAbkH,EAAEvE,QAAgB,CAClBuG,EAAQpR,EAAEC,MAAME,MAAMW,MAAM,KAC5B,IAAK,IAAI/D,EAAI,EAAGA,EAAIqU,EAAMxQ,SAAU7D,EAChCiB,EAAQoT,EAAMrU,GACVA,EAAIqU,EAAMxQ,OAAS,EACf5C,EAAM4C,SACNZ,EAAE,qCAAuChC,EAAQ,eAAe4R,aAAa5P,EAAEC,OAC/ED,EAAE,kCAAkC4P,aAAa5P,EAAEC,QAIvDD,EAAEC,MAAME,IAAInC,GAEhBgC,EAAEC,MAAM,GAAGsR,kBAAkB,EAAG,GAGxCH,EAAQ,GACRpR,EAAE,4BAA4BO,MAAK,WAC/B,MAAMiR,EAAUxR,EAAEC,MACduR,EAAQ7R,KAAK,KAAKiB,OAClBwQ,EAAMxL,KAAK4L,EAAQ7R,KAAK,KAAKX,QAE7BoS,EAAMxL,KAAK4L,EAAQxS,WAGvBgB,EAAEC,MAAME,OACRiR,EAAMxL,KAAK5F,EAAEC,MAAME,OACvBH,EAAE,cAAcG,IAAIiR,EAAMhL,KAAK,SAChCqL,QAAQ,SAEX,MAAMC,EAAY1R,EAAE,yCACpB,IAAK0R,EAAU9Q,OACX,OAEJ,MAAM+Q,EAAmBD,EAAU7R,KAAK,sBAAsBiB,MAAM,KAC9D8Q,EAAqBF,EAAU7R,KAAK,wBAAwBiB,MAAM,KAExEmQ,EAAcjD,GAAG,SAAS,WACtB,MAAM7N,EAAM8Q,EAAc9Q,MAC1B,IAAIjC,EAAM2T,EAAMC,EAAWC,EAAYC,EAASC,EAEhDH,EAAYC,EAAa,GACzB,MAAM5U,EAAI,eAAe+U,KAAK/R,GAC1BhD,IAEA4U,EAAa,KADbD,EAAY3U,EAAE,KAIlB,MAAMgV,EAAOC,WAAWC,oBAAoBP,GACtCQ,EAActS,EAAE,uBAoBtB,GAnBImS,GACAjU,EAAOiU,EAAKjU,KACZ2T,EAAOM,EAAKI,KACZN,EAAU/T,GAGV+T,EAAUH,EAGVQ,EAAY1R,QAAUqR,GAAW5S,GAAoBA,EAAiBuB,QAAUvB,EAAiBmD,QAAQyP,IAAY,GACrHD,EAAUM,EAAYzS,KAAK,OAC3ByS,EAAYzS,KAAK,MAAOmS,EAAQvN,QAAQ,YAAa,MAAQvG,IAC7DoU,EAAYrH,QAGZqH,EAAYpH,OAIZyG,EAAiBnP,QAAQuP,IAAe,GAxKpD,SAAsBL,GAMlB,OALInS,IACAA,EAAiBiT,aACjBjT,EAAmB,QAGnBD,IAIJA,EAAiB,IAAImT,UAAU,CAC3BC,yBAAyB,EACzBlB,QAASE,EAAU,GACnBiB,WAAW,EACXC,gBAAiB,CACbC,kBAAkB,GAEtBC,gBAAgB,EAChBC,QAAS,EACTC,cAAc,EACdC,cAAe,SAAUC,EAAWC,GAgBhC,OAfAC,YAAW,WAEPpT,EAAEE,KAAKwR,EAAU7R,KAAK,OAAQ,CACtB,MAASV,EACT,KAAQ,MACR,QAAWuS,EAAU7R,KAAK,WAC1B,KAAQqT,IAEZ,SAAUrT,GACNsT,EAAQE,UAAY,oCAAsCxT,EAAO,SACjEQ,QAAQC,IAAIN,EAAE,mBAAmB,SAG1C,GAEI,cAEXsT,QAAS,CAAC,OAAQ,SAAU,gBAAiB,IACzC,YAAa,YAAa,YAAa,iBAAkB,kBAAmB,IAC5E,OAAQ,QAAS,IACjB,iBAAkB,eAAgB,IAClC,OAAQ,QAAS,QAAS,kBAAmB,IAC7C,cAAe,UAAW,aAAc,mBAGzC,GA2HKC,CAAa7B,GACb,OAKR,IAAKnS,IA9Hb,SAAuBmS,GAMnB,OALIpS,IACAA,EAAekT,aACflT,EAAiB,QAGjBC,KAIJA,EAAmB6S,WAAWoB,aAAa9B,EAAU,GAAI,CACrD+B,aAAa,KAEAzF,GAAG,UAAU,SAAU0F,EAAIC,GACxCjC,EAAUvR,IAAIuT,EAAGE,gBAGd,GA6GuBC,CAAcnC,GACpC,OAGAxT,IACAqB,EAAiBuU,UAAU,OAAQjC,GACnCO,WAAW2B,aAAaxU,EAAkBrB,IAG1C0T,EAAmBpP,QAAQuP,IAAe,EAC1CxS,EAAiBuU,UAAU,gBAAgB,GAG3CvU,EAAiBuU,UAAU,gBAAgB,GAI/C,IAAI9V,EAAQiT,EAAc9Q,MACL,IAAjBnC,EAAM4C,SAIV5C,GADAA,EAAQA,EAAM8C,MAAM,MACN9C,EAAM4C,OAAS,GAE7BZ,EAAEmO,QAAQ8C,EAAcpR,KAAK,iBAAiB7B,GAAO,SAASgW,GACxB,QAA9BA,EAAaC,cACb1U,EAAiBuU,UAAU,kBAAkB,GAC7CvU,EAAiBuU,UAAU,YAAa,MAExCvU,EAAiBuU,UAAU,kBAAkB,GAI7CvU,EAAiBuU,UAAU,YAAa,CACpCI,IAAK,SAASR,GACV,MAAMS,EAAS9J,MAAM+J,SAASV,EAAGW,UAAU,eAAiB,GAAGjO,KAAK,KACpEsN,EAAGY,iBAAiBH,OAIhC5U,EAAiBuU,UAAU,aAAcE,EAAaO,aAAe,GACrEhV,EAAiBuU,UAAU,UAAWE,EAAaQ,WAAa,UAErE/C,QAAQ,SAIX,MAAMgD,EAAgBzU,EAAE,kBAClB0U,EAAY1U,EAAE,iBAIpByU,EAAczD,KAAK,YAAY,GAG/B0D,EAAUC,WAAW,CACjBC,QAAQ,EACRC,WARmB,aASnBC,cAAe,0CACf3J,OAAQ,WACJ,MAAM4J,EAAQ/U,EAAEC,MAAM8F,SAXP,cAYf0O,EAAczD,KAAK,YAAa+D,MAIxCN,EAAc3U,OAAM,SAAUqC,GAEK,IAA3BuP,EAAUvR,MAAMS,SAChBZ,EAAE,6BAA6BwL,MAAM,CACjCC,UAAW,WACPzL,EAAE,cAAc8J,YAErB0B,MAAM,QACTrJ,EAAMQ,qBAuBlB,SAASqS,IAEDhV,EAAE,0BAA0BY,OAAS,GACrCZ,EAAE,aAAa8K,OAAM,WACjB,MAAMC,EAAU/K,EAAE,uBACdA,EAAEC,MAAME,MAAM6K,WAAW3B,eAAiBrJ,EAAEC,MAAMJ,KAAK,QAAQmL,WAAW3B,cAC1E0B,EAAQE,OAERF,EAAQG,UA4PxB,SAASxK,IACLV,EAAE,cAAciV,UAAS,SAAU7F,GACd,IAAbA,EAAEvE,SAA8B,IAAbuE,EAAEvE,SACrB7K,EAAEC,MAAMH,WA8EpB,SAASoV,IACDlV,EAAE,wBAAwBY,OAAS,IACnCZ,EAAE0I,UAAUsF,GAAG,QAAS,mBAAmB,SAAUoB,GACjD,MAAM+F,EAAUnV,EAAEC,MACZgF,EAAQkQ,EAAQhP,SAASiP,SAAS,eAAezV,KAAK,oBAC5D0V,EAAYpQ,EAAOA,EAAMkE,OAAO,QAAUgM,EAAQxG,KAAK,MAAQ,KAAOS,EAAEkG,SAAWrQ,EAAMkE,OAAO,WAAWoM,GAAG,GAAK,MAsfvH1T,OAAO2T,aACP3T,OAAO2T,eAAeC,kBAEtB/M,SAASgN,UAAUpH,WArfnBtO,EAAE6B,QAAQmM,GAAG,cAAc,WACvB,IAAI7Q,EAAI0E,OAAOC,SAAS6T,KAAKC,MAAM,oBACnC,MAAM3Q,EAAQjF,EAAE,+BAChB,IAAI6V,EACJ,GAAI1Y,EAIA,OAHA0Y,EAAS5Q,EAAMkE,OAAO,IAAMhM,EAAE,IAC9BkY,EAAYpQ,EAAO4Q,EAAQ5Q,EAAMkE,OAAO,IAAMhM,EAAE,UAChD6C,EAAE,cAAc0K,UAAUmL,EAAOC,SAASC,IAAM,MAGpD5Y,EAAI0E,OAAOC,SAAS6T,KAAKC,MAAM,oBAE3BC,EAAS5Q,EAAMkE,OAAO,KAAOhM,EAAE,IAC/BkY,EAAYpQ,EAAO4Q,GACnB7V,EAAE,cAAc0K,UAAUmL,EAAOC,SAASC,IAAM,SAErDtE,QAAQ,eA0BnB,SAASuE,EAAUtG,GACf1P,EAAEyB,KAAK,CACHN,IAAK/B,EAAS,iBACdsC,KAAM,OACN4L,QAAS,CAAC,eAAgBnO,GAC1BU,KAAMwE,KAAK4R,UAAUvG,GACrBwG,YAAa,oCACdzG,MAAK,SAASrL,GACbvC,OAAOC,SAAS2C,QAAQL,MACzB+R,MAAK,WACJC,EAAS,MAIjB,SAASC,EAAc3G,IAmBvB,SAAoBA,GAChB,KAAM,cAAeA,GACjB,OAAO,EAEX,GAAuB,IAAnBA,EAAK4G,UACL,OAAO,EAGX,OADAF,EAAS1G,EAAK4G,YACP,GA1BHC,CAAW7G,IAGf1P,EAAEyB,KAAK,CACHN,IAAK/B,EAAS,uCACdsC,KAAM,OACN4L,QAAS,CAAC,eAAgBnO,GAC1BU,KAAMwE,KAAK4R,UAAUvG,GACrBwG,YAAa,kCACbvU,QAAS,WACLC,KAEJuU,KAAM,WACFC,EAAS,MAiBrB,SAASA,EAASI,GACd,MAAMC,EAAY,CACd,QAAWzW,EAAE,wBACb0W,EAAG1W,EAAE,gBACL2W,EAAG3W,EAAE,gBACL4W,EAAG5W,EAAE,gBACL6W,EAAG7W,EAAE,gBACL8W,EAAG9W,EAAE,iBAETyW,EAAUD,GAAWxQ,YAAY,QACjC,IAAI,MAAMtE,KAAQ+U,EACX/U,GAAQ8U,GACPC,EAAU/U,GAAMuE,SAAS,QAGjCjG,EAAE,cAAcwL,MAAM,QAgB1B,SAASuL,IACL/W,EAAEE,KAAKd,EAAS,+CAAgD,CAC5D,MAASD,EACT,KAAQa,EAAE,aAAaG,QACxBwB,SAAQ,SAASqV,GAChBhX,EAAE,aAAaqP,QAAQ,aAAarJ,YAAY,SAChDhG,EAAE,oBAAoBwL,MAAM,QACF,OAAvBwL,EAAIC,iBACHD,EAAIC,eAAiB,IAEzBC,OAAOC,SAASH,EAAII,MAAOJ,EAAIK,iBAAkBL,EAAIC,eAAgB,IAChEnR,KAAKuQ,GACLiB,OAAM,SAAUC,GAKbnB,OAJcoB,IAAXD,EAIMA,EAAOE,SAASC,KAHZ,SAKtBvB,MAAK,SAAS3S,GACK,MAAfA,EAAIG,QACH3D,EAAE,aAAaqP,QAAQ,aAAapJ,SAAS,YA6VzD,SAAS0R,EAAWhC,GACZiC,QAAQC,UACRD,QAAQC,UAAU,KAAM,KAAMlC,GAG9B7T,SAAS6T,KAAOA,EAYxB,SAASN,EAAYpQ,EAAOkQ,EAAS2C,GAEjC,GADA7S,EAAMe,YAAY,UACd8R,EAAO,CACP,IAEI1a,EAFA2a,EAAI3D,SAASe,EAAQxG,KAAK,OAAO5L,OAAO,IACxCiV,EAAI5D,SAAS0D,EAAMnJ,KAAK,OAAO5L,OAAO,IAE1C,GAAIgV,GAAKC,EAAG,CACJD,EAAIC,IACJ5a,EAAI2a,EACJA,EAAIC,EACJA,EAAI5a,GAER,MAAM6a,EAAU,GAChB,IAAK,IAAIlb,EAAIgb,EAAGhb,GAAKib,EAAGjb,IACpBkb,EAAQrS,KAAK,KAAO7I,GAIxB,OAFAkI,EAAMkE,OAAO8O,EAAQ7R,KAAK,MAAMH,SAAS,eACzC0R,EAAW,KAAOI,EAAI,KAAYC,IAI1C7C,EAAQlP,SAAS,UACjB0R,EAAW,IAAMxC,EAAQxG,KAAK,QAoBlC,SAASuJ,IACL,MAAMnY,EAAQC,EAAEC,MAChB,IAAIkJ,EAAS,GACTpJ,EAAM4O,KAAK,QACXxF,GAAU,IAAMpJ,EAAM4O,KAAK,OAG/B,MAAMwJ,EAASnY,EAAE,gBAAkBmJ,GAmBnC,OAlBAgP,EAAOxY,KAAK,SAASX,KAAKe,EAAMF,KAAK,SAErCsY,EAAO3M,MAAM,CACT4M,UAAU,EACV3M,UAAW,WACmB,QAAtB1L,EAAMF,KAAK,QAKfG,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CACtB,MAASV,EACT,GAAMY,EAAMF,KAAK,QAClB4P,MAAK,SAAS5P,GACbgC,OAAOC,SAASyF,KAAO1H,EAAKwY,YAR5BrY,EAAED,EAAMF,KAAK,SAASiK,YAW/B0B,MAAM,SACF,EAGX,SAAS8M,IACL,MAAMvY,EAAQC,EAAEC,MAChB,IAAIkJ,EAAS,GACTpJ,EAAM4O,KAAK,QACXxF,GAAU,IAAMpJ,EAAM4O,KAAK,OAG/B,MAAMwJ,EAASnY,EAAE,gBAAkBmJ,GAmBnC,OAlBAgP,EAAOxY,KAAK,SAASX,KAAKe,EAAMF,KAAK,SAErCsY,EAAO3M,MAAM,CACT4M,UAAU,EACV3M,UAAW,WACmB,QAAtB1L,EAAMF,KAAK,QAKfG,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CACtB,MAASV,EACT,GAAMY,EAAMF,KAAK,QAClB4P,MAAK,SAAS5P,GACbgC,OAAOC,SAASyF,KAAO1H,EAAKwY,YAR5BrY,EAAED,EAAMF,KAAK,SAASiK,YAW/B0B,MAAM,SACF,EAjgFc,oBAAf,WACN+M,SAASC,cAAe,GAIvBnO,MAAMoO,OACPpO,MAAMoO,KAAQ,WACV,MAAMC,EAAQjb,OAAOkB,UAAUqM,SACzB2N,EAAa,SAAUC,GACzB,MAAqB,mBAAPA,GAAwC,sBAAnBF,EAAMxb,KAAK0b,IAQ5CC,EAAiBlI,KAAKmI,IAAI,EAAG,IAAM,EACnCC,EAAW,SAAU/a,GACvB,MAAMgb,EARQ,SAAUhb,GACxB,MAAMib,EAASC,OAAOlb,GACtB,OAAImb,MAAMF,GAAkB,EACb,IAAXA,GAAiBG,SAASH,IACtBA,EAAS,EAAI,GAAK,GAAKtI,KAAKC,MAAMD,KAAK0I,IAAIJ,IADHA,EAKpCK,CAAUtb,GACtB,OAAO2S,KAAK4I,IAAI5I,KAAK6I,IAAIR,EAAK,GAAIH,IAItC,OAAO,SAAcY,GAEjB,MAAMC,EAAIzZ,KAGJsC,EAAQ9E,OAAOgc,GAGrB,GAAiB,MAAbA,EACA,MAAM,IAAIE,UAAU,oEAIxB,MAAMC,EAAQC,UAAUjZ,OAAS,EAAIiZ,UAAU,QAAK,EACpD,IAAIC,EACJ,QAAqB,IAAVF,EAAuB,CAG9B,IAAKjB,EAAWiB,GACZ,MAAM,IAAID,UAAU,qEAIpBE,UAAUjZ,OAAS,IACnBkZ,EAAID,UAAU,IAMtB,MAAMb,EAAMD,EAASxW,EAAM3B,QAKrBmZ,EAAIpB,EAAWe,GAAKjc,OAAO,IAAIic,EAAEV,IAAQ,IAAI3O,MAAM2O,GAGzD,IAEIgB,EAFAC,EAAI,EAGR,KAAOA,EAAIjB,GACPgB,EAASzX,EAAM0X,GAEXF,EAAEE,GADFL,OACoB,IAANE,EAAoBF,EAAMI,EAAQC,GAAKL,EAAM1c,KAAK4c,EAAGE,EAAQC,GAEpED,EAEXC,GAAK,EAKT,OAFAF,EAAEnZ,OAASoY,EAEJe,GAvEF,IA6EW,mBAAjBtc,OAAOyc,QAEdzc,OAAOC,eAAeD,OAAQ,SAAU,CACpCO,MAAO,SAAgBgE,EAAQmY,GAE3B,GAAc,MAAVnY,EACA,MAAM,IAAI2X,UAAU,8CAGxB,MAAMS,EAAK3c,OAAOuE,GAElB,IAAK,IAAIqY,EAAQ,EAAGA,EAAQR,UAAUjZ,OAAQyZ,IAAS,CACnD,MAAMC,EAAaT,UAAUQ,GAE7B,GAAkB,MAAdC,EACA,IAAK,MAAMC,KAAWD,EAEd7c,OAAOkB,UAAUC,eAAe1B,KAAKod,EAAYC,KACjDH,EAAGG,GAAWD,EAAWC,IAKzC,OAAOH,GAEXI,UAAU,EACVC,cAAc,IAwrCtBC,OAAO/b,UAAUgc,SAAW,SAAUC,GAClC,MAAMvd,EAAI4C,KAAKW,OAASga,EAAQha,OAChC,OAAOvD,GAAK,GAAK4C,KAAK+C,YAAY4X,KAAavd,GAInD2C,EAAE4Y,GAAGvH,kBAAoB,WACrB,MAAMhJ,EAAKrI,EAAEC,MAAMrC,IAAI,GACvB,IAAIid,EAAM,EACV,GAAI,mBAAoBxS,EACpBwS,EAAMxS,EAAGpF,oBACN,GAAI,cAAeyF,SAAU,CAChCL,EAAG4B,QACH,MAAM6Q,EAAMpS,SAASgN,UAAUqF,cACzBC,EAAYtS,SAASgN,UAAUqF,cAAc/b,KAAK4B,OACxDka,EAAIG,UAAU,aAAc5S,EAAGrK,MAAM4C,QACrCia,EAAMC,EAAI9b,KAAK4B,OAASoa,EAE5B,OAAOH,GAg0BX7a,EAAE0I,UAAUwS,OAAM,WAiDd,GAhDA/b,EAAOa,EAAE,oBAAoB2O,KAAK,WAClCvP,EAASY,EAAE,sBAAsB2O,KAAK,WAGtC3O,EAAE,eAAeO,MAAK,WAClBP,EAAEC,MAAMgG,SAAS,aAAa0I,KAAK,eAAgB3O,EAAEC,MAAM0O,KAAK,UAAUA,KAAK,iBAAkB,iBAAiBA,KAAK,QAAS,OAIpI3O,EAAE,0BAA0BsF,WAC5BtF,EAAE,kBAAkBsF,SAAS,CACzBlE,OAAQ,OACR+Z,OAAQ,WACJnb,EAAE,cAAcwP,MAAM,WAG9BxP,EAAE,sBAAsBsF,SAAS,CAC7B8V,WAAY,aAEhBpb,EAAE,oBAAoBsF,SAAS,CAC3B+V,UAAW,WAEfrb,EAAE,iBAAiBsb,YACnBtb,EAAE,gBAAgBub,WAClBvb,EAAE,gBAAgBwb,SAAS,CACvBC,cAAc,IAElBzb,EAAE,cAAcwP,QAChBxP,EAAE,wBAAwBwP,MAAM,CAC5B2L,OAAQ,WACJ,GAAInb,EAAE,8BAA8B+F,SAAS,WACzC,OAAO,KAInB/F,EAAE,uBAAuBJ,MACzBI,EAAE,uBAAuBJ,MAEzBI,EAAE,kBAAkBF,OAAM,WACtBE,EAAEA,EAAEC,MAAMJ,KAAK,WAAW6b,YAAY,QAI1C1b,EAAE,iBAAiBF,OAAM,WACrB+B,OAAOC,SAAW9B,EAAEC,MAAMJ,KAAK,WAIhB,oBAARW,KAAqB,CAC5B,MAAMmb,EAAQ,GAAGC,MAAM1e,KAAKwL,SAASmT,iBAAiB,aAAe,IACrE,IAAK,IAAI9e,EAAI,EAAGA,EAAI4e,EAAM/a,OAAQ7D,IAC9ByD,KAAKC,eAAekb,EAAM5e,IAKlC,MAAMmQ,EAAYlN,EAAE,aACpB,GAAIkN,EAAUtM,OAAS,EAAG,CACtB,MAAMwM,EAAe,GAErB,IAAImL,SAAS,YAAa,CACtBpX,IAAK+L,EAAUrN,KAAK,cACpByN,QAAS,CAAC,eAAgBnO,GAC1BoO,SAAUL,EAAUrN,KAAK,YACzB2N,YAAaN,EAAUrN,KAAK,YAC5B4N,cAA8C,QAA9BP,EAAUrN,KAAK,WAAwB,KAAOqN,EAAUrN,KAAK,WAC7E6N,gBAAgB,EAChBC,mBAAoBT,EAAUrN,KAAK,mBACnC+N,oBAAqBV,EAAUrN,KAAK,sBACpCgO,eAAgBX,EAAUrN,KAAK,gBAC/BiO,eAAgBZ,EAAUrN,KAAK,eAC/BkO,KAAM,WACF9N,KAAK+N,GAAG,WAAW,SAAUzK,EAAM1D,GAC/BuN,EAAa7J,EAAKjG,MAAQuC,EAAK8E,KAC/B,MAAMC,EAAQ5E,EAAE,cAAgBH,EAAK8E,KAAO,iCAAiCxE,IAAIN,EAAK8E,MACtF3E,EAAE,UAAUiE,OAAOW,MAEvB3E,KAAK+N,GAAG,eAAe,SAAUzK,GACzBA,EAAKjG,QAAQ8P,GACbpN,EAAE,IAAMoN,EAAa7J,EAAKjG,OAAO4K,SAEjCgF,EAAUrN,KAAK,eAAiBqN,EAAUrN,KAAK,SAC/CG,EAAEE,KAAKgN,EAAUrN,KAAK,cAAe,CACjC0D,KAAM6J,EAAa7J,EAAKjG,MACxB4Q,MAAOhB,EAAUrN,KAAK,gBAS9CQ,QAAQyb,UAAU,CACdC,QAAS3c,EAAS,iCAClB4c,kBAAkB,IAEtB,MAAMlM,EAAWpH,SAASuT,uBAAuB,aACjD,IAAK,IAAIlf,EAAI,EAAGA,EAAI+S,EAASlP,OAAQ7D,IAAK,CACtCsD,QAAQC,IAAIwP,EAAS/S,IACrB,IAAK,IAAImN,EAAI,EAAGA,EAAI4F,EAAS/S,GAAGmf,WAAWtb,OAAQsJ,IACJ,MAAvC4F,EAAS/S,GAAGmf,WAAWhS,GAAGiS,UAC1B9b,QAAQC,IAAIwP,EAAS/S,GAAGmf,WAAWhS,IAM/C,MAAMkS,EAAY,IAAIC,UAAU,cAwIhC,GAvIAD,EAAUpO,GAAG,WAAW,SAAUoB,GAC9BA,EAAEkN,iBAEFtc,EAAE,IAAMoP,EAAEqC,QAAQhJ,aAAa,OAAO+G,MAAM,WAC5CJ,EAAEqC,QAAQ8K,aAAa,eAAgBnN,EAAEqC,QAAQhJ,aAAa,iBAC9DzI,EAAE,IAAMoP,EAAEqC,QAAQhJ,aAAa,OAAO+G,MAAM,QAC5CJ,EAAEqC,QAAQ8K,aAAa,eAAgBnN,EAAEqC,QAAQhJ,aAAa,qBAGlE2T,EAAUpO,GAAG,SAAS,SAAUoB,GAC5BpP,EAAE,IAAMoP,EAAEqC,QAAQhJ,aAAa,OAAO+G,MAAM,WAC5CJ,EAAEqC,QAAQ8K,aAAa,eAAgBnN,EAAEqC,QAAQhJ,aAAa,eAC9DzI,EAAE,IAAMoP,EAAEqC,QAAQhJ,aAAa,OAAO+G,MAAM,QAC5CJ,EAAEqC,QAAQ8K,aAAa,eAAgBnN,EAAEqC,QAAQhJ,aAAa,qBAIlEzI,EAAE,kBAAkBF,MAAMoY,GAC1BlY,EAAE,mBAAmBF,MAAMwY,GAE3BtY,EAAE,yBAAyBF,MAAMoY,GAEjClY,EAAE,gBAAgBF,OAAM,WACpB,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,OAAQ,CACtB,MAASV,EACT,GAAMY,EAAMF,KAAK,QAClB4P,MAAK,SAAS5P,GACbgC,OAAOC,SAASyF,KAAO1H,EAAKwY,eAGpCrY,EAAE,sBAAsBF,OAAM,WAC1BE,EAAEA,EAAEC,MAAMJ,KAAK,UAAUoL,UAE7BjL,EAAE,sBAAsBF,OAAM,WAC1BE,EAAEA,EAAEC,MAAMJ,KAAK,UAAU2L,MAAM,WAEnCxL,EAAE,uBAAuBF,OAAM,WAC3B,MAAMC,EAAQC,EAAEC,MAChBD,EAAEE,KAAKH,EAAMF,KAAK,eAAgB,CAC9B,MAASV,IACVsQ,MAAK,WACJ5N,OAAOC,SAASyF,KAAOxH,EAAMF,KAAK,kBAK1CG,EAAE,aAAaO,MAAK,WAChB,MAAM+M,EAAU,GAChBtN,EAAEC,MAAMN,KAAK,0BAA0BY,MAAK,WACxC,IAAIic,EAAOxc,EAAEC,MACb,MAAME,EAAMsc,mBAAmBD,EAAKxd,OAAOqK,cAAc5E,QAAQ,sCAAuC,IAAIA,QAAQ,OAAQ,MAC5H,IAAInH,EAAO6C,EACPmN,EAAQnN,GAAO,IACf7C,EAAO6C,EAAM,IAAMmN,EAAQnN,IAEXqX,MAAhBlK,EAAQnN,GACRmN,EAAQnN,GAAO,EAEfmN,EAAQnN,IAAQ,GAEpBqc,EAAOA,EAAKE,KAAK,YAAcpf,EAAO,kCACjC2G,OAAO,4BAA8B3G,EAAO,0DAIzD0C,EAAE,mBAAmBF,OAAM,WACJE,EAAE,mBAAmB2c,SAAS,iBAAiB/b,OACjD,GACbZ,EAAE,kBAAkBiG,SAAS,QAC7BjG,EAAE,kBAAkBgG,YAAY,UAEhChG,EAAE,kBAAkBgG,YAAY,QAChChG,EAAE,kBAAkBiG,SAAS,YAIrCjG,EAAE,iBAAiBF,OAAM,WACrB,IAAIsB,EAASnB,KAAK2c,QAAQxb,OACtBE,EAAYrB,KAAK2c,QAAQtb,UAC7B,MAAMub,EAAW7c,EAAE,mBAAmB2c,SAAS,iBAAiB9N,KAAI,WAChE,OAAO5O,KAAK2c,QAAQE,WACrBlf,MAAMwI,OACHjF,EAAMlB,KAAK2c,QAAQzb,IACP,MAAdG,GAAwC,cAAnBH,EAAI4B,QAAQ,KACjCzB,EAAY,GACZF,EAAS,SAEbF,EAAiBC,EAAKC,EAAQyb,EAAUvb,GAAWwE,MAAK,WAErC,UAAX1E,GAAiC,SAAXA,GAEtBpB,EAAE,0CAA0CO,MAAK,SAASwc,EAAE3N,GAAIA,EAAEhE,SAAU,KAEhFxJ,UAMR5B,EAAE,kDAAkDgd,QAAQzc,MAAK,SAASwc,EAAE3N,GACxEA,EAAEhE,SAAU,EACZpL,EAAEoP,GAAGtP,WAGTY,IAzfuBV,EAAE,oBACVid,OAAO,CAClBC,cAAe,EACfC,YAAa,CACThc,IAAK/B,EAAS,iCACdge,WAAY,SAASC,GACjB,MAAM9a,EAAQ,GAYd,OAXAvC,EAAEO,KAAK8c,EAASxd,MAAM,SAAUyd,EAAIlU,GAChC,IAAIoD,EAAQpD,EAAKmU,MACbnU,EAAKoU,WAAapU,EAAKoU,UAAU5c,OAAS,IAC1C4L,GAAS,KAAOzN,EAAWqK,EAAKoU,WAAa,KAEjDjb,EAAMqD,KAAK,CACP4G,MAAOA,EACPiR,MAAOrU,EAAKsU,gBAIb,CAAEC,QAASpb,KAG1Bqb,aAAc,CAAC,QAAS,aACxBrU,eAAe,IAIvB,WACI,MAAMsU,EAAiB7d,EAAE,oBACzB6d,EAAeZ,OAAO,CAClBC,cAAe,EACfC,YAAa,CACThc,IAAK/B,EAAS,gBAAkBye,EAAehe,KAAK,OAAS,0BAC7DyN,QAAS,CAAC,eAAgBnO,GAC1Bie,WAAY,SAASC,GACjB,MAAM9a,EAAQ,GAQd,OAPAvC,EAAEO,KAAK8c,EAASxd,MAAM,SAAUyd,EAAIlU,GAChC,MAAMoD,EAAQpD,EAAK9L,KAAO,KAAO8L,EAAK0U,WAAa,WACnDvb,EAAMqD,KAAK,CACP4G,MAAOA,OAIR,CAAEmR,QAASpb,KAG1Bqb,aAAc,CAAC,OAAQ,eACvBrU,eAAe,IA6cnBwU,GAzcJ,WACI,MAAMC,EAAiBhe,EAAE,oBACzBge,EAAef,OAAO,CAClBC,cAAe,EACfC,YAAa,CACThc,IAAK/B,EAAS,sCAAwC4e,EAAene,KAAK,OAC1Eud,WAAY,SAASC,GACjB,MAAM9a,EAAQ,GAQd,OAPAvC,EAAEO,KAAK8c,EAASxd,MAAM,SAAUyd,EAAIlU,GAChC7G,EAAMqD,KAAK,CACP4G,MAAOpD,EAAKoU,UAAU1c,MAAM,KAAK,GACjCmd,YAAa7U,EAAKoU,eAInB,CAAEG,QAASpb,KAG1Bqb,aAAc,CAAC,aACfrU,eAAe,IAubnB2U,GAEArZ,IA/vD4B,GAAxB7E,EAAE,YAAYY,SAIO,IAArBZ,EAAE,YAAYG,QACdH,EAAE,YAAYG,IAAI,kBAClBH,EAAE,YAAYG,IAAI,SAClBH,EAAE,YAAYG,IAAI,UAItBH,EAAE,YAAYmL,QAAO,WACjB,MAGMgT,EAASne,EAAEC,MAAME,MACvB,GAAe,YAAXge,EASA,OARAne,EAAE,iBAAiBkL,OACnBlL,EAAE,mBAAmBkL,OACrBlL,EAAE,mBAAmBkL,OACrBlL,EAAE,oBAAoBiL,YAEP,YAAXkT,GATY,mBASYne,EAAE,YAAYG,OACtCH,EAAE,YAAYG,IAXA,kBAgBtB,MAAMie,EAAa,CACf,MAAS,iBACT,WAAc,iBACd,MAAS,kBAGbpe,EAAE,oBAAoBkL,OACtBlL,EAAE,iBAAiBiL,OAEnBjL,EAAE,mBAAmBuM,OAAkB,eAAX4R,GAC5Bne,EAAE,mBAAmBuM,OAAkB,UAAX4R,GAC5Bne,EAAEO,KAAK6d,GAAY,SAASC,EAAOC,GAC/B,GAAIte,EAAE,YAAYG,OAASme,EAEvB,OADAte,EAAE,YAAYG,IAAIie,EAAWD,KACtB,QAMnBne,EAAE,uBAAuBmL,QAAO,WACxBnL,EAAEC,MAAMse,GAAG,cACXve,EAAE,qBAAqBub,SAAS,SAChCvb,EAAE,4BAA4Bub,SAAS,eAG/Cvb,EAAE,2BAA2BmL,QAAO,WAC5BnL,EAAEC,MAAMse,GAAG,YACXve,EAAE,4BAA4Bub,SAAS,WAEvCvb,EAAE,iBAAiBub,SAAS,cAGpCvb,EAAE,kCAAkCmL,QAAO,WACnCnL,EAAEC,MAAMse,GAAG,cACXve,EAAE,qBAAqBub,SAAS,WAChCvb,EAAE,iBAAiBub,SAAS,eAGpCvb,EAAE,+BAA+BmL,QAAO,WAChCnL,EAAEC,MAAMse,GAAG,YACNve,EAAE,+BAA+Bue,GAAG,aACrCve,EAAE,yBAAyBub,SAAS,SAGxCvb,EAAE,yBAAyBub,SAAS,cAG5Cvb,EAAE,+BAA+BmL,QAAO,WAChCnL,EAAEC,MAAMse,GAAG,aACXve,EAAE,mBAAmBub,SAAS,WAC9Bvb,EAAE,yBAAyBub,SAAS,YAEpCvb,EAAE,yBAAyBub,SAAS,YAG5Cvb,EAAE,yBAAyBmL,QAAO,WAC1BnL,EAAEC,MAAMse,GAAG,aACXve,EAAE,yBAAyBub,SAAS,eA2qD5CzU,IA5wCJ,WACI,MAAM0X,EAAmB,WACrB,MAAMC,EAAeze,EAAE,kBAAkBG,MACnCue,EAAY1e,EAAE,eAAeG,OAC9BH,EAAE,WAAWue,GAAG,aAA8B/G,MAAdiH,GAA2BA,EAAa7d,OAAS,GACvE4W,MAAXkH,IAAyBA,EAAUC,WAAW,uBAAyBD,EAAUC,WAAW,sBAC5F3e,EAAE,kBAAkBiL,OAEpBjL,EAAE,kBAAkBkL,QAI5BsT,IAEAxe,EAAE,eAAegO,GAAG,QAASwQ,GAC7Bxe,EAAE,kBAAkBgO,GAAG,QAASwQ,GAChCxe,EAAE,WAAWgO,GAAG,SAAUwQ,GA6vC1BI,GA7nCJ,WACI,MAAMlN,EAAY1R,EAAE,uCACpB,GAAI0R,EAAU9Q,OAAS,EAAG,CACtB,MAAMie,EAAY,IAAIpM,UAAU,CAC5BC,yBAAyB,EACzBlB,QAASE,EAAU,GACnBiB,WAAW,EACXM,cAAe,SAAUC,EAAWC,GAgBhC,OAfAC,YAAW,WAEPpT,EAAEE,KAAKwR,EAAU7R,KAAK,OAAQ,CACtB,MAASV,EACT,KAAQ,MACR,QAAWuS,EAAU7R,KAAK,WAC1B,KAAQqT,IAEZ,SAAUrT,GACNsT,EAAQE,UAAY,oCAAsCxT,EAAO,SACjEQ,QAAQC,IAAIN,EAAE,mBAAmB,SAG1C,GAEI,cAEX4S,gBAAiB,CACbC,kBAAkB,GAEtBC,gBAAgB,EAChBC,QAAS,EACTC,cAAc,EACdM,QAAS,CAAC,OAAQ,SAAU,gBAAiB,IACzC,YAAa,YAAa,YAAa,iBAAkB,kBAAmB,IAC5E,CACIhW,KAAM,cACN8D,OAAQ,SAASgO,GACb,MAAMsE,EAAKtE,EAAE0P,WACPpJ,EAAYhC,EAAG8B,eAErB,GADA9B,EAAGY,iBAAiB,IAAMoB,EAAY,MACjCA,EAAW,CACZ,MAAMqJ,EAAYrL,EAAGsL,YACrBtL,EAAGuL,UAAUF,EAAUG,KAAMH,EAAUI,GAAK,GAEhDzL,EAAGzJ,SAEPmV,UAAW,oBACX5S,MAAO,mBACT,OAAQ,QAAS,IAAK,CACpBlP,KAAM,iBACN8D,OAAQ,SAASgO,GACb,MAAMsE,EAAKtE,EAAE0P,WACbpL,EAAGY,iBAAiB,WAAaZ,EAAG8B,gBACpC9B,EAAGzJ,SAEPmV,UAAW,iBACX5S,MAAO,wBAEX,CACIlP,KAAM,mBACN8D,OAAQ,SAASgO,GACb,MAAMsE,EAAKtE,EAAE0P,WACbpL,EAAGY,iBAAiB,WAAaZ,EAAG8B,gBACpC9B,EAAGzJ,SAEPmV,UAAW,uBACX5S,MAAO,0BACR,IACH,iBAAkB,eAAgB,IAClC,OAAQ,QAAS,QAAS,kBAAmB,IAC7C,cAAe,UAAW,gBAElCxM,EAAE6e,EAAUC,WAAWO,iBAAiBpZ,SAAS,oBAujCrDqZ,GACA3e,IACAoQ,IAjyBiC,GAA7B/Q,EAAE,iBAAiBY,QAKnBZ,EAAE,kCAAkCY,OAAS,GAC7CZ,EAAE,aAAa8K,OAAM,WACjB,MAAMC,EAAU/K,EAAE,2BACdA,EAAEC,MAAME,MAAM6K,WAAW3B,eAAiBrJ,EAAEC,MAAMJ,KAAK,YAAYmL,WAAW3B,cAC9E0B,EAAQE,OAERF,EAAQG,UAoBxB,WACI,GAAgC,GAA5BlL,EAAE,gBAAgBY,OAClB,OAGJZ,EAAE,0BAA0BmL,QAAO,WAC3BnL,EAAEC,MAAMse,GAAG,aACXve,EAAE,kBAAkBiL,UAG5BjL,EAAE,8BAA8BmL,QAAO,WAC/BnL,EAAEC,MAAMse,GAAG,aACXve,EAAE,kBAAkBkL,UAI5B,MAAMqU,EAAoB,WACtB,MAAMxW,EAAsC,SAA5B/I,EAAE,gBAAgBG,MAClCH,EAAE,iBAAiBmG,SAASA,SAAS4C,EAAU,OAAS,WAE5DwW,IACAvf,EAAE,gBAAgBmL,QAAO,WACrBoU,OAIJvf,EAAE,kBAAkBF,OAAM,WACtB,MAAMC,EAAQC,EAAEC,MAChBF,EAAMkG,SAAS,oBACfjG,EAAEE,KAAKH,EAAMF,KAAK,QAAS,CACvB,MAASV,IACVsQ,KACC2D,YAAW,WACPvR,OAAOC,SAASyF,KAAOxH,EAAMF,KAAK,cACnC,SAkuBX2f,GA7tBJ,WACI,GAA0B,GAAtBxf,EAAE,UAAUY,OAAhB,CAmJA,IA9IIZ,EAAE,mBAAmBY,OAAS,GAC9BZ,EAAE,oBAAoBY,OAAS,IAC/BZ,EAAE,eAAemL,QAAO,WACiB,KAAjCnL,EAAEC,MAAME,MAAMkD,UAAU,EAAG,IAC3BrD,EAAE,eAAeyf,WAAW,YAC5Bzf,EAAE,cAAckL,OAChBlL,EAAE,UAAUiL,OACZjL,EAAE,cAAciK,QAEgB,YAA5BjK,EAAEC,MAAMJ,KAAK,aACbG,EAAE,aAAa2O,KAAK,WAAY,cAIpC3O,EAAE,eAAe2O,KAAK,WAAY,YAClC3O,EAAE,cAAciL,OAChBjL,EAAE,UAAUkL,OACZlL,EAAE,eAAeiK,QAEjBjK,EAAE,aAAayf,WAAW,gBA4ElCzf,EAAE,6BAA6BY,OAAS,IACxCZ,EAAE,cAAcmL,QAAO,WACnBnL,EAAE,mEAAmEkL,OAErElL,EAAE,kLAAkLyf,WAAW,YAC/Lzf,EAAE,mBAAmBgG,YAAY,YAEjC,MAAM0Z,EAAW1f,EAAEC,MAAME,MACzB,OAAQuf,GACJ,IAAK,IACD1f,EAAE,SAASiL,OACXjL,EAAE,+DAA+D2O,KAAK,WAAY,YAClF3O,EAAE,mBAAmBiG,SAAS,YAC9B,MACJ,IAAK,IACDjG,EAAE,SAASiL,OACXjL,EAAE,YAAYiL,OACdjL,EAAE,sCAAsC2O,KAAK,WAAY,YACzD,MACJ,IAAK,IACD3O,EAAE,QAAQiL,OACVjL,EAAE,cAAc2O,KAAK,WAAY,YACjC,MACJ,IAAK,IACD3O,EAAE,UAAUiL,OACZjL,EAAE,wCAAwC2O,KAAK,WAAY,YAC3D,MACJ,IAAK,IACD3O,EAAE,WAAWiL,OACbjL,EAAE,2HAA2H2O,KAAK,WAAY,YAC9IgR,IAGQ,KAAZD,GAA+B,KAAZA,GACnBE,IAEY,KAAZF,GACAG,OAGR7f,EAAE,cAAcmL,SAChBnL,EAAE,sBAAsBmL,OAAOyU,GAC/B5f,EAAE,qBAAqBmL,OAAO0U,GAC9B7f,EAAE,oBAAoBmL,OAAOwU,GAC7B3f,EAAE,0BAA0BmL,OAAO2U,IAGnC9f,EAAE,8BAA8BY,OAAS,EAAG,CAC5C,MAAM8e,EAAW1f,EAAE,cAAcG,MACjB,KAAZuf,GAA+B,KAAZA,GACnB1f,EAAE,sBAAsBmL,OAAOyU,GACf,KAAZF,GACA1f,EAAE,qBAAqBmL,OAAO0U,IAEf,KAAZH,IACP1f,EAAE,oBAAoBmL,OAAOwU,GAC7B3f,EAAE,0BAA0BmL,OAAO2U,GACnCH,KAKR,GAAI3f,EAAE,iBAAkB,CACpB,MAAM+f,EAAe/f,EAAE,iBAGvBA,EAAE,gBAAgBF,OAAM,WAGpB,OAFAigB,EAAapgB,KAAK,cAAcX,KAAKgB,EAAEC,MAAMJ,KAAK,YAClDkgB,EAAavU,MAAM,SACZ,KAIX,MAAMwU,EAAchgB,EAAE,8BACtBA,EAAE,kBAAkBF,OAAM,WACtB,OAAQE,EAAEC,MAAMJ,KAAK,WACjB,IAAK,aACDmgB,EAAYzE,SAAS,SACrB,MACJ,IAAK,eACDyE,EAAYzE,SAAS,WACrB,MACJ,IAAK,UACDyE,EAAYzE,SAAS,cAIjCvb,EAAE,qBAAqBF,OAAM,WACzB,MAAMC,EAAQC,EAAEC,MAChBF,EAAMkG,SAAS,oBACf,MAAMga,EAAM,GACZD,EAAYzf,MAAK,WACTP,EAAEC,MAAMsb,SAAS,eACjB0E,EAAIra,KAAK5F,EAAEC,MAAMJ,KAAK,UAG9BG,EAAEE,KAAKH,EAAMF,KAAK,QAAS,CACvB,MAASV,EACT,IAAO8gB,IACRxQ,MAAK,WACJ5N,OAAOC,SAASyF,KAAOxH,EAAMF,KAAK,mBA3K9C,SAAS+f,IACD5f,EAAE,sBAAsBG,MAAQ,EAChCH,EAAE,YAAYiL,OAEdjL,EAAE,YAAYkL,OAItB,SAAS2U,IACD7f,EAAE,qBAAqBgR,KAAK,WAC5BhR,EAAE,qBAAqBiL,OAClBtL,KAAK,SAASgP,KAAK,WAAY,YAEpC3O,EAAE,qBAAqBkL,OAClBvL,KAAK,SAAS8f,WAAW,YAItC,SAASE,IAKL,OAJA3f,EAAE,+DAA+DkL,OACjElL,EAAE,uDAAuDyf,WAAW,YAEnDzf,EAAE,oBAAoBG,OAEnC,IAAK,SACL,IAAK,SACL,IAAK,QACDH,EAAE,0BAA0BiL,OAC5B,MACJ,IAAK,gBACDjL,EAAE,6CAA6C2O,KAAK,WAAY,YAChE3O,EAAE,uCAAuCiL,OAGjD6U,IAGJ,SAASA,IACL,MAAMI,EAAWlgB,EAAE,oBAAoBG,MAIvC,GAHAH,EAAE,gCAAgCkL,OAClClL,EAAE,gDAAgDyf,WAAW,YAEzDzf,EAAE,0BAA0Bue,GAAG,YAa/B,OAZKve,EAAE,qBAAqBG,OACxBH,EAAE,qBAAqBG,IAAIH,EAAE,IAAMkgB,EAAW,cAAc/f,OAE3DH,EAAE,oBAAoBG,OACvBH,EAAE,oBAAoBG,IAAIH,EAAE,IAAMkgB,EAAW,aAAa/f,OAEzDH,EAAE,uBAAuBG,OAC1BH,EAAE,uBAAuBG,IAAIH,EAAE,IAAMkgB,EAAW,gBAAgB/f,OAE/DH,EAAE,qBAAqBG,OACxBH,EAAE,qBAAqBG,IAAIH,EAAE,IAAMkgB,EAAW,cAAc/f,OAExD+f,GACJ,IAAK,SACDlgB,EAAE,uGAAuG2O,KAAK,WAAY,YAC1H3O,EAAE,+EAA+EiL,OACjF,MACJ,IAAK,QACL,IAAK,SACDjL,EAAE,8EAA8E2O,KAAK,WAAY,YACjG3O,EAAE,4DAA4DiL,OAC9DjL,EAAE,qBAAqBG,IAAI,MAgoB3CggB,GACAjL,IAmVJ,WACI,MAAM7M,EAAKK,SAAS0X,eAAe,OACnC,IAAK/X,EACD,OA5KJF,IAAIkY,UAAU,cAAe,CACzBjY,WAHkB,CAAC,KAAM,KAKzBkY,MAAO,CACHC,YAAa,CACT7e,KAAMwX,OACNsH,QAAS,IAEbphB,OAAQ,CACJsC,KAAMgZ,OACN+F,UAAU,GAEdC,IAAK,CACDhf,KAAMwX,OACNuH,UAAU,GAEdE,cAAe,CACXjf,KAAM2I,MACNmW,QAAS,IAEbI,eAAgB,CACZlf,KAAMmf,QACNL,SAAS,GAEbM,sBAAuB,CACnBpf,KAAMmf,QACNL,SAAS,GAEbO,wBAAyB,CACrBrf,KAAMwX,OACNsH,QAAS,GAEbQ,cAAe,CACXtf,KAAMgZ,OACN8F,QAAS,KAIjB3gB,KAAM,WACF,MAAO,CACHD,IAAK,QACLqhB,MAAO,GACPC,gBAAiB,EACjBC,YAAa,MACbC,YAAa,GACbC,WAAW,EACXC,UAAW,CACP,IAAO,CACHC,MAAO,EACPC,WAAY,IAEhB,MAAS,CACLD,MAAO,EACPC,WAAY,QAEhB,QAAW,CACPD,MAAO,EACPC,WAAY,UAEhB,QAAW,CACPD,MAAO,EACPC,WAAY,UAEhB,cAAiB,CACbD,MAAO,EACPC,WAAY,oBAM5BvY,SAAU,CACNwY,kBAAmB,WACf,OAAOxhB,KAAKghB,MAAMrgB,OAAS,GAAKX,KAAKghB,MAAMrgB,OAASX,KAAKqhB,UAAUrhB,KAAKkhB,aAAaI,OAEzFG,UAAW,WACP,OAAOzhB,KAAKb,OAAS,oDAAsDa,KAAKygB,IAAM,MAAQzgB,KAAKmhB,YAC9E,UAAYnhB,KAAKsgB,YAAc,SAAWtgB,KAAKqhB,UAAUrhB,KAAKkhB,aAAaK,YACrD,QAArBvhB,KAAKkhB,YAAwB,eAAiB,KAExEQ,cAAe,WACX,OAAO1hB,KAAKqhB,UAAUrhB,KAAKkhB,aAAaI,QAIhDK,QAAS,WACL3hB,KAAK4hB,YAAY5hB,KAAKkhB,aAEtB,MAAMW,EAAO7hB,KACbkI,IAAI4B,UAAS,WACT+X,EAAKlY,MAAMqT,OAAOhT,YAI1BT,QAAS,CACLuY,UAAW,SAAS9jB,GAChBgC,KAAKL,IAAM3B,GAGf+jB,kBAAmB,SAAS7Y,GACxBlJ,KAAKkhB,YAAchY,EACnBlJ,KAAKghB,MAAQ,GACbhhB,KAAKqhB,UAAUnY,GAAQoY,MAAQ,EAC/BthB,KAAK4hB,YAAY1Y,IAGrB8Y,SAAU,SAASC,EAAM/Y,GACrB,OAAQA,GACJ,IAAK,UACD,OAAO+Y,EAAKC,MAAMzR,IAAMzQ,KAAKygB,MAAQwB,EAAKE,SAAWF,EAAKG,KAC9D,IAAK,QACD,OAAOH,EAAKC,MAAMzR,IAAMzQ,KAAKygB,MAAQwB,EAAKE,QAAUF,EAAKG,KAC7D,IAAK,UACD,OAAOH,EAAKE,OAChB,IAAK,gBACD,OAAOF,EAAKC,MAAMzR,IAAMzQ,KAAKygB,MAAQwB,EAAKE,OAC9C,QACI,OAAO,IAInBP,YAAa,SAASV,GAClB,MAAMW,EAAO7hB,KAEbA,KAAKohB,WAAY,EAEjB,MAAMiB,EAAeriB,KAAKqhB,UAAUH,GAAaK,WAC3Ce,EAActiB,KAAKyhB,UACnBc,EAAgBviB,KAAKmhB,YAE3BphB,EAAEmO,QAAQoU,GAAa,SAASE,EAAQC,EAAaC,GACjD,GAAIJ,GAAeT,EAAKJ,UAAW,CAC/BI,EAAKb,MAAQwB,EAAO5iB,KACpB,MAAM0hB,EAAQoB,EAAQC,kBAAkB,iBAClB,KAAlBJ,GAAyC,KAAjBF,IACxBR,EAAKZ,gBAAkBK,GAE3BO,EAAKR,UAAUH,GAAaI,MAAQA,MAEzCsB,QAAO,WACFN,GAAeT,EAAKJ,YACpBI,EAAKT,WAAY,OAK7ByB,UAAW,SAASZ,GAChB,OAAIA,EAAKG,KACE,8BACAH,EAAKE,OACL,6BACAF,EAAKa,QACL,uBAEA,2BAuBvB,IAAI5a,IAAI,CACJC,WAAY,CAAC,KAAM,KACnBC,GAAIA,EAEJxI,KAAM,CACF0gB,YAAa7X,SAASsa,cAAc,4BAA4BlU,QAChE1P,OAAQsJ,SAASsa,cAAc,sBAAsBlU,QACrD4R,IAAKhY,SAASsa,cAAc,2BAA2BlU,WAjW/DmU,GA/oCAjjB,EAAE,iDAAiDmL,QAAO,WAE1C,UADAnL,EAAE,iCAAkC,0BAA0BG,MAEtEH,EAAE,sCAAsCkL,OAExClL,EAAE,sCAAsCiL,UAq9ChDjL,EAAE,oBAAoB4K,SAAQ,SAASwE,KAC7BA,EAAE8T,UAAY9T,EAAE+T,QAAW/T,EAAEgU,UAA0B,IAAbhU,EAAEvE,SAA8B,IAAbuE,EAAEvE,SACjE7K,EAAEC,MAAMoP,QAAQ,QAAQvF,YA2UpC,WACI,MAAMgF,EAAU9O,EAAE,WACZuM,EAASvM,EAAE,yBACjB,IAAIqjB,GAAa,EACjB9W,EAAOzM,OAAM,YACTujB,GAAcA,IAEVvU,EAAQ7I,SAAS,SACjBsG,EAAOtG,SAAS,YAGhB6I,EAAQ9I,YAAY,SACpBuG,EAAOvG,YAAY,cAjqB3Bsd,GAsqBJ,WACI,MAAMC,EAASvjB,EAAE,iBACXwjB,EAAUxjB,EAAE,eACZyjB,EAAUzjB,EAAE,gBACZ0jB,EAAU1jB,EAAE,eACZ2jB,EAAgB3jB,EAAE,yBAClB4jB,EAAY5jB,EAAE,uBACd6jB,EAON,WACI,MAAMC,EAAa9jB,EAAE,4BACjB+jB,EAAU,CACNC,YAAaF,EAAWnH,SAAS,iBAAiB3d,OAClDilB,aAAcH,EAAWnH,SAAS,kBAAkB3d,QAG5D,OADA8kB,EAAW5b,SACJ6b,EAdUG,GAErBX,EAAOzjB,OAAM,WACT2jB,EAAQvY,OACRsY,EAAQ5c,IAAI,UAAW,OAa3B8c,EAAQ5jB,OAAM,WACV,MAAMqkB,EAASnkB,EAAE,sBAAsBG,MAEvCH,EAAEE,KAAKwjB,EAAQ7jB,KAAK,QAAS,CACzB,MAASV,EACT,OAAUglB,IACX,SAASC,EAAO1B,EAAalf,GAC5B,GAAgC,OAA5BA,EAAI6gB,aAAa1gB,OAAiB,CAElC,GADA8f,EAAQ9G,SAAS,UAAUzU,SACvBic,EAAOvjB,OAAQ,CACf,MAAM0jB,EAAaH,EAAOrjB,MAAM,KAE1BwQ,EAAOmS,EAAQ9G,SAAS,KAAKrL,OACnC,IAAK,IAAIvU,EAAE,EAAGA,EAAIunB,EAAW1jB,OAAQ7D,IACjCiD,EAAE,6DAA6DskB,EAAWvnB,GAAG,UAAU6S,aAAa0B,GAG5GkS,EAAQ5c,IAAI,UAAW,QACvB6c,EAAQxY,WAEbkL,MAAK,SAAS3S,GACb,GAAmB,MAAfA,EAAIG,OACJ,GAAIH,EAAI6gB,aAAaE,cAAc3jB,OAAS,EAAG,CAC3CijB,EAAaI,aAAezgB,EAAI6gB,aAAa7c,QAE7C,MAAM+c,EAAgB/gB,EAAI6gB,aAAaE,cACnCC,EAAcb,EAAchH,SAAS,cAEzCwH,EAAOrjB,MAAM,KAAK2E,SAAQ,SAASzH,EAAOqc,GACtC,IAAK,IAAItd,EAAE,EAAGA,EAAIwnB,EAAc3jB,OAAQ7D,IAChCwnB,EAAcxnB,KAAOiB,GACrBwmB,EAAYjP,GAAG8E,GAAOrU,YAAY,SAASC,SAAS,eAKhE4d,EAAaG,YAAcxgB,EAAI6gB,aAAa7c,WAGrDqb,QAAO,WACNe,EAAUa,KAAK,uBAIvBd,EAAcre,SAAS,CACnBof,gBAAgB,EAChBC,gBAAgB,EAChBC,OAAQ,CAAEtnB,KAAM,cAAeU,MAAO,cACtC6mB,gBAAgB,EAChBnf,MAAO,CACH0V,WAAa,kBACb0J,SAAa,IACbC,WAAa,EACbC,MAAO,EACPC,OAAO,GAEX7F,UAAW,CACP1Z,MAAO,kBAEXyX,YAAa,CACThc,IAAK/B,EAAS,kCACd8lB,SAAU,IACVC,OAAO,EACP/H,WAAY,SAAShZ,GACjB,MAAMghB,EAAoB,CACtBzjB,SAAS,EACTgc,QAAS,IAMP0H,EAAkBplB,KAAKqlB,QAAQD,MAAME,OAH3B9gB,QAAQ,aAAc,IAItC,IAAI+gB,GAAc,EAClB,MAAMC,EAAiB,GAGvB,GAFA9B,EAAchkB,KAAK,2CAA2CY,MAAK,SAASwc,EAAE3N,GAAIqW,EAAe7f,KAAKwJ,EAAEwN,QAAQ5e,UAE5GoG,EAAI+f,OAAQ,CACZ,IAAIuB,GAAQ,EACZ,IAAK,IAAI3oB,EAAE,EAAEA,EAAIqH,EAAI+f,OAAOvjB,OAAO7D,KAE0B,GAArD0oB,EAAejjB,QAAQ4B,EAAI+f,OAAOpnB,GAAG4oB,cAIrCvhB,EAAI+f,OAAOpnB,GAAG4oB,WAAWtc,gBAAkBgc,EAAMhc,gBACjDmc,GAAc,GAElBJ,EAAkBzH,QAAQ/X,KAAK,CAAC,YAAexB,EAAI+f,OAAOpnB,GAAG4oB,WAAY,aAAcvhB,EAAI+f,OAAOpnB,GAAG4oB,aACrGD,GAAQ,GAEZN,EAAkBzjB,QAAU+jB,EAiBhC,OAdIL,EAAMzkB,OAAS,IAAM4kB,GACrBJ,EAAkBzjB,SAAU,EAC5ByjB,EAAkBzH,QAAQiI,QAAQ,CAAC,YAAeP,EAAO,aAAcA,KAChEA,EAAMzkB,OAAS,GAAK4kB,GAC3BJ,EAAkBzH,QAAQkI,MAAK,SAAS9N,EAAGC,GACvC,OAAID,EAAEkG,YAAY5U,gBAAkBgc,EAAMhc,eAAuB,EAC7D2O,EAAEiG,YAAY5U,gBAAkBgc,EAAMhc,cAAsB,EAC5D0O,EAAEkG,YAAcjG,EAAEiG,aAAqB,EACvClG,EAAEkG,YAAcjG,EAAEiG,YAAoB,EACnC,KAKRmH,IAGfU,cAAe,SAAS9nB,GAGpB,OAFAA,EAAQA,EAAMqL,cAAckc,OAC5BtlB,KAAK0O,KAAK,aAAc3Q,GAAO+nB,WAAW/I,QAAQgJ,YAAYhoB,GACvDgC,EAAEC,OAEbgmB,MAAO,SAASC,EAAYC,EAAYC,GACpCF,EAAaA,EAAW7c,cAAckc,OACtCvlB,EAAEomB,GAAczX,KAAK,aAAcuX,GACnClmB,EAAEomB,GAAczX,KAAK,YAAauX,MAI1ClmB,EAAE4Y,GAAG6L,KAAK4B,SAASC,MAAMC,cAAgB,SAASC,EAASC,GACvD,MAAMtC,EAASR,EAAchH,SAAS,cAClChZ,EAA2B,IAAlBwgB,EAAOvjB,QAAgBujB,EAAO7S,OAAO3C,KAAK,cAAciH,MAAM6Q,GAI3E,OAHK9iB,GACDwgB,EAAO7S,OAAOtL,YAAY,SAASC,SAAS,OAEzCtC,GAA8D,IAApDggB,EAAchH,SAAS,kBAAkB/b,QAG9DgjB,EAAUa,KAAK,CACPzW,GAAI,SACJnC,QAAS,EACT+Y,OAAQ,CACJT,OAAQ,CACJuC,WAAY,SACZJ,MAAO,CACH,CACI5kB,KAAM,gBACN1D,MAAO,4BACP2oB,OAAQ9C,EAAaI,cAEzB,CACIviB,KAAM,eACNilB,OAAQ9C,EAAaG,kBA/0B7C4C,GAtaiC,IAA9B5mB,EAAE,iBAAiBY,QAGtBsW,OAAO2P,gBACF/gB,MAAK,WACF9F,EAAEmO,QAAQ/O,EAAS,uBAAuBuC,SAAQ,SAASqV,GACvDE,OAAO4P,KAAK9P,EAAII,MAAOJ,EAAI+P,UAAW/P,EAAIC,eAAgB,IACrDnR,KAAKkQ,GACLsB,OAAM,SAAU0P,GAKb5Q,OAJWoB,IAARwP,EAIMA,EAAIvP,SAASC,KAHT,YAM1BJ,OAAM,WAELzV,OAAOC,SAASyF,KAAOnI,EAAS,sBAmExCY,EAAE,oBAAoBwL,MAAM,CAACyb,eAAe,IAC5CjnB,EAAE,cAAcwL,MAAM,CAACyb,eAAe,IACtCjnB,EAAE,0BAA0BgO,GAAG,SAAS,SAASoB,GAC7CA,EAAEzM,iBACFuU,OAAO2P,gBACF/gB,KAAKiR,GACLO,OAAM,WACHlB,EAAS,iBA4tCzB,WACI,MAAM8Q,EAAWlnB,EAAE,aAAaG,MAC1BgnB,EAASnnB,EAAE,WAAWG,MACtBinB,EAAkBpnB,EAAE,oBAAoBG,MAC9C,IAAIknB,EAAiBjoB,EAAS,iBAAmB8nB,EAAW,oBACpC,SAApBE,IACAC,EAAiBjoB,EAAS,0DAA4D+nB,GAE1FnnB,EAAE,6BACGsF,SAAS,CACN6X,YAAa,CACThc,IAAKkmB,EACLjK,WAAY,SAASC,GACjB,MAAMiK,EAAmB,CAAC,SAAW,EAAM,QAAW,IAChDC,EAAcvnB,EAAE,6BAA6BH,KAAK,YAaxD,OAXAG,EAAEO,KAAK8c,GAAU,SAASC,EAAIkK,GAEvBA,EAAM9W,KAAO6W,GAGhBD,EAAiB3J,QAAQ/X,KAAK,CAC1B,KAAU,IAAM4hB,EAAMvO,OAAS,IAAMla,EAAWyoB,EAAMhb,OAClD,0CAA4CzN,EAAWyoB,EAAMC,WAAWjK,WAAa,SACzF,MAAUgK,EAAM9W,QAGjB4W,GAEXnC,OAAO,GAGXle,gBAAgB,IAGxBjH,EAAE,6BAA6BO,MAAK,WAChCP,EAAEC,MAAMH,OAAM,SAASsP,GACnB,GAAIA,EAAE+T,OAAQ,CACV/T,EAAEzM,iBAEF,MAAM4E,EAAOvH,EAAEC,MAAM0O,KAAK,QAGpB+Y,EAAS,yBAFJ1nB,EAAEC,MAAMJ,KAAK,YAEuB,mBACzC8nB,EAAS,kBAEf9lB,OAAOC,SAAWyF,EAAK9C,QAAQ,IAAImjB,OAAOF,GAASC,UAK/D3nB,EAAE,mCAAmC4K,SAAQ,SAASwE,GAClD,GAAIA,EAAE+T,QAAuB,IAAb/T,EAAEvE,QAAe,CAC7B,MAAMgd,EAAgB7nB,EAAE,wDAExB,GAAI6nB,EAAcjnB,OAAS,EAAG,CAC1B,MAAMwI,EAAOpJ,EAAE6nB,EAAc,IAEvBtgB,EAAO6B,EAAKuF,KAAK,QAGjB+Y,EAAS,yBAFJte,EAAKvJ,KAAK,YAE0B,mBACzC8nB,EAAS,kBAEf9lB,OAAOC,SAAWyF,EAAK9C,QAAQ,IAAImjB,OAAOF,GAASC,QA/8B/DG,GA7SA9nB,EAAE,uBAAuBF,OAAM,SAAUsP,GACrCA,EAAEzM,iBAEF,MAAMyJ,EAAcpM,EAAE,gBACtBoM,EAAYnC,QACZ,MAAMjM,EAAQoO,EAAYjM,MAAMolB,OAAOwC,cAEvC,IAAK,MAAMhrB,KAAKirB,YACZ,GAAIhqB,EAAM2gB,WAAWqJ,YAAYjrB,GAAGgrB,eAChC,OAIR3b,EAAYjM,IAAI6nB,YAAY,GAAK,IAAM5b,EAAYjM,UAx+BvDH,EAAE,kBAAkBgO,GAAG,SAAS,SAAUoB,GACtCA,EAAEzM,iBACF,MAAM+N,EAAK1Q,EAAEC,MAAMJ,KAAK,WACxBG,EAAEC,MAAMgG,SAAS,QACjBjG,EAAE,kBAAoB0Q,GAAI1K,YAAY,QACtChG,EAAE,iBAAmB0Q,GAAI1K,YAAY,QACrChG,EAAE,kBAAoB0Q,GAAI1K,YAAY,WAG1ChG,EAAE,kBAAkBgO,GAAG,SAAS,SAAUoB,GACtCA,EAAEzM,iBACF,MAAM+N,EAAK1Q,EAAEC,MAAMJ,KAAK,WACxBG,EAAEC,MAAMgG,SAAS,QACjBjG,EAAE,kBAAoB0Q,GAAIzK,SAAS,QACnCjG,EAAE,iBAAmB0Q,GAAIzK,SAAS,QAClCjG,EAAE,kBAAoB0Q,GAAI1K,YAAY,WAG1ChG,EAAE,6BAA6BgO,GAAG,SAAS,SAAUoB,GACjDA,EAAEzM,iBACF3C,EAAEC,MAAMiL,OACR,MAAMuZ,EAAOzkB,EAAEC,MAAMkG,SAASxG,KAAK,iBACnC8kB,EAAKze,YAAY,QACjBwK,EAAqBiU,EAAK9kB,KAAK,aAGM,GAArCK,EAAE,yBAAyBY,SAI/BZ,EAAE,8BAA8BioB,SAEhCjoB,EAAE,eAAegO,GAAG,SAAS,SAASoB,GAClCA,EAAEzM,iBACF3C,EAAEC,MAAMoP,QAAQ,aAAa1P,KAAK,SAAS4M,OAAO,cACnD8C,QAAQ,aAAa1P,KAAK,eAAeqO,GAAG,SAAS,SAASoB,GAC7DA,EAAEzM,iBACF3C,EAAEC,MAAMoP,QAAQ,SAAS9C,OAAO,cAGpCvM,EAAE,gDACGgO,GAAG,cAAc,WACd,MAAM7H,EAASnG,EAAEC,MAAMoP,QAAQ,MAC/BrP,EAAEC,MAAMoP,QAAQ,MAAMpJ,SAClBE,EAAOJ,SAAS,kBAAoBI,EAAOJ,SAAS,kBAC9C,kBAAoB,sBAGjCiI,GAAG,cAAc,WACdhO,EAAEC,MAAMoP,QAAQ,MAAMrJ,YAAY,sCAE1ChG,EAAE,qBAAqBgO,GAAG,SAAS,SAASoB,GAExC,GAAIpP,EAAEoP,EAAEpN,QAAQ+D,SAAS,kBACvB,OAEFqJ,EAAEzM,iBACF,MAAMulB,EAAUloB,EAAEC,MAAMoP,QAAQ,cAActJ,SAAS,mBACjDoiB,EAAOnoB,EAAEC,MAAMJ,KAAK,QACpBuoB,EAAMpoB,EAAEC,MAAMJ,KAAK,OACnBwoB,EAAOroB,EAAEC,MAAMJ,KAAK,QACpB4kB,EAAOzkB,EAAE,4BAA4Bd,OACrCopB,EAAKtoB,EAAEC,MAAMoP,QAAQ,MAC3B,IAAIkZ,EAAMD,EAAG5b,OACR6b,EAAIxiB,SAAS,iBACdwiB,EAAMvoB,EAAE,4BACGkoB,EAAU,oMACA,iJACX,SACVI,EAAGE,MAAMD,IAEb,MAAME,EAAKF,EAAI5oB,KAAK,gBAAkBwoB,GACtC,IAAIO,EAAeD,EAAG9oB,KAAK,uBACC,IAAxB+oB,EAAa9nB,SACb6nB,EAAGvpB,KAAKulB,GAERjU,GADAkY,EAAeD,EAAG9oB,KAAK,wBACWA,KAAK,UAEvC8oB,EAAG9oB,KAAK,sBAAsBQ,IAAIioB,GAClCK,EAAG9oB,KAAK,sBAAsBQ,IAAa,SAATgoB,EAAkB,WAAW,YAC/DM,EAAG9oB,KAAK,sBAAsBQ,IAAIkoB,IAEtCK,EAAa/oB,KAAK,YAAYsK,YA58BtC,SAAS0e,IACL,MAAMC,EAAY5oB,EAAE,mBAEpB,GADAA,EAAE,0BAA0BkL,OACxB0d,EAAW,CACX,MAAMC,EAAYD,EAAUja,KAAK,QACjC,QAAyB,IAAdka,EACP,OAEJ7oB,EAAEyB,KAAK,CACHC,KAAM,MACNP,IAAK/B,EAAQ,IAAIypB,EAAU,UAC3BhpB,KAAM,CACF,MAASV,GAEb2pB,SAAU,SAAStlB,GACf,GAAkB,KAAdA,EAAIG,QACAH,EAAI6gB,aACJ,OAAkC,GAA9B7gB,EAAI6gB,aAAqB,YACzBviB,SAASF,cAIbwR,YAAW,WACPuV,MACD,KAIX3oB,EAAE,4BAA4BkL,OAC9BlL,EAAE,0BAA0BiL,WAwmExC0d,GA/RJ,WACI,MAAMI,EAAgB/oB,EAAE,kBAClBgpB,EAAgB,WAClB,MAAMC,EAAiBjpB,EAAE,mBACnBkpB,EAAelpB,EAAE,iBACK,KAAxB+oB,EAAc5oB,OACd8oB,EAAehe,OACfie,EAAahe,SAEb+d,EAAe/d,OACfge,EAAaje,SAGrB8d,EAAc5d,OAAO6d,GACrBA,IAEA,MAAMG,EAAc,WAChBnpB,EAAE,yBACGsF,SAAS,CACN6X,YAAa,CACThc,IAAK/B,EAAS,kEAAoEY,EAAE,QAAQG,MAC5Fid,WAAY,SAASC,GACjB,MAAMiK,EAAmB,CAAC,SAAW,EAAM,QAAW,IAYtD,OAXAA,EAAiB3J,QAAQ/X,KAAK,CAC1B,KAAQ,GACR,MAAS,KAGb5F,EAAEO,KAAK8c,EAASxd,MAAM,SAASupB,EAAIlH,GAC/BoF,EAAiB3J,QAAQ/X,KAAK,CAC1B,KAAU7G,EAAWmjB,EAAK1E,WAC1B,MAAU0E,EAAKxR,QAGhB4W,GAEXnC,OAAO,GAGXle,gBAAgB,KAG5BjH,EAAE,QAAQmL,OAAOge,GACjBA,IAqPAE,GAGIrpB,EAAE,mBAAmBY,OAAS,EAC9B,OAAQwP,aAAakZ,QAAQ,wBACzB,IAAK,MAC2C,IAAxCtpB,EAAE,mBAAmBF,QAAQc,QAC7BZ,EAAE,qBAAqBF,QAE3B,MACJ,QACIE,EAAE,qBAAqBF,QAKnC,MAAMypB,EAAS,CACX,oBAAqBvU,EACrB,wCAAyClE,GAG7C,IAAI/L,EACJ,IAAKA,KAAYwkB,EACb,GAAIvpB,EAAE+E,GAAUnE,OAAS,EAAG,CACxB2oB,EAAOxkB,KACP,MAIR,MAAMykB,EAAaxpB,EAAE,eACrBwpB,EAAWre,QAAO,WACd,MAAMse,EAAYzpB,EAAE,cAChBwpB,EAAWrpB,MAAMS,OAAS,GAAgC,IAA3B6oB,EAAUtpB,MAAMS,QAC/C6oB,EAAUtpB,IAAIqpB,EAAWrpB,MAAMyV,MAAM,4BAA4B,UA+C7E5V,GAAE,WAGmC,IAA7BA,EAAE,gBAAgBY,QACpBZ,EAAE,2BAA2B2U,aAI/B3U,EAAE,oBAAoBgO,GAAG,sBAAqB,WAC1C,MAAM0b,EAAS1pB,EAAEC,MAAME,MAAMW,MAAM,KAC7B6oB,EAAS3pB,EAAE,kBACI,KAAjB2pB,EAAOxpB,OAAkC,IAAlBupB,EAAO9oB,QAA8B,KAAd8oB,EAAO,IACrDC,EAAOxpB,IAAIupB,EAAO,UA+P9B7nB,OAAO+nB,cAAgB,WACnB5pB,EAAE,eACGwL,MAAM,CACHsZ,SAAU,IACVrZ,UAAW,WACPzL,EAAE,yBAAyB8J,YAEhC0B,MAAM,SAIjB3J,OAAOgoB,gBAAkB,WACrB7pB,EAAE,0BAA0B8J,UAEhCjI,OAAOioB,gBAAkB,WACrB9pB,EAAE,0BAA0B8J,UAGhCjI,OAAOkoB,YAAc,SAASC,EAAcC,EAAaC,GACrD,MAAM7hB,EAAKK,SAAS0X,eAAe4J,GACnC,IAAK3hB,EACD,QAGJ6hB,EAASA,GAAU,IAEZC,cAAgBD,EAAOC,eAAiB,gBAC/CD,EAAOE,iBAAmBF,EAAOE,kBAAoB,mBAErD,MAAMC,EAAgB,CAAC,KAAM,KAE7BliB,IAAIkY,UAAU,mBAAoB,CAC9BjY,WAAYiiB,EAEZ/J,MAAO,CACHgK,KAAM,CACF5oB,KAAMgZ,OACN+F,UAAU,GAEdrhB,OAAQ,CACJsC,KAAMgZ,OACN+F,UAAU,GAEdyJ,OAAQ,CACJxoB,KAAMjE,OACNgjB,UAAU,IAIlB5gB,KAAM,WACF,MAAO,CACHwhB,WAAW,EACXkJ,WAAY,GACZC,QAAS,KACTC,OAAQ,GACRC,mBAAoB,IAI5B9I,QAAS,WACL3hB,KAAKsqB,WAAa,CACdtqB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,GACd1qB,KAAK0qB,SAAS,IAElB1qB,KAAKuqB,QAAU,IAAII,KACnB3qB,KAAK4qB,YAAY5qB,KAAKqqB,OAG1B9gB,QAAS,CACLqhB,YAAa,SAASC,GAClB,MAAMhJ,EAAO7hB,KACbD,EAAEpC,IAAIqC,KAAKb,OAAS,iBAAmB0rB,EAAW,YAAY,SAASC,GACnE,MAAMC,EAAY,GAClB,IAAK,IAAIjuB,EAAI,EAAGA,EAAIguB,EAAanqB,OAAQ7D,IACrC+kB,EAAK4I,oBAAsBK,EAAahuB,GAAGotB,cAC3Ca,EAAUjuB,GAAK,CAAEkuB,KAAM,IAAIL,KAAiC,IAA5BG,EAAahuB,GAAGmuB,WAAmB3J,MAAOwJ,EAAahuB,GAAGotB,eAE9FrI,EAAK2I,OAASO,EACdlJ,EAAKT,WAAY,MAIzBsJ,SAAU,SAASvC,GACf,MAAM/f,EAAKK,SAASyiB,cAAc,OAClC9iB,EAAG+W,UAAY,iBAAmBgJ,EAClC1f,SAASC,KAAKyiB,YAAY/iB,GAE1B,MAAMgjB,EAAQC,iBAAiBjjB,GAAIkjB,gBAInC,OAFA7iB,SAASC,KAAK6iB,YAAYnjB,GAEnBgjB,IAIfI,SAAU,mZAGd,IAAItjB,IAAI,CACJC,WAAYiiB,EACZhiB,GAAIA,EAEJxI,KAAM,CACFT,OAAQsJ,SAASsa,cAAc,sBAAsBlU,QACrDmb,YAAaA,EACbC,OAAQA,MAgMpBlqB,EAAE,kBAAkBF,OAAM,SAASsP,GAC/BA,EAAEzM,iBACF3C,EAAEC,MAAMkG,SAASxG,KAAK,gBAAgB4M,YAqM1C1K,OAAO6pB,mBAAqB,WACxB1rB,EAAE,iBAAiB2rB,WAAW,MAGlC9pB,OAAO+pB,YAAc,YAKrB,SAAwBC,GACpB7rB,EAAE,8BAA8BkL,OAChClL,EAAE,oBAAoBiG,SAAS,WAE/B,IAAI6lB,EAAe,KACnB,GAAuB,KAAnBD,EAAuB,CAEvB,MAAME,EAAUnB,KAAKtmB,MAAMunB,GAE3B,GAAI1S,MAAM4S,GAGN,OAFA/rB,EAAE,oBAAoBgG,YAAY,WAClChG,EAAE,8BAA8BiL,QACzB,EAEX6gB,EAAe,IAAIlB,KAAKmB,GAG5B/rB,EAAEyB,KAAKzB,EAAE,+BAA+B2O,KAAK,UAAY,YAAa,CAClE9O,KAAMwE,KAAK4R,UAAU,CACjB,SAAY6V,IAEhBxe,QAAS,CACL,eAAgBnO,EAChB,YAAY,GAEhB+W,YAAa,mBACbxU,KAAM,OACNC,QAAS,WACLC,KAEJoqB,MAAO,WACHhsB,EAAE,oBAAoBgG,YAAY,WAClChG,EAAE,8BAA8BiL,UAnCxCghB,CADiBjsB,EAAE,iBAAiBG,QAyCxC0B,OAAOqqB,sBAAwB,SAASxb,EAAIhP,GACxC1B,EAAE,sBACGwL,MAAM,CACH4M,UAAU,EACV0M,SAAU,IACVrZ,UAAW,WACPzL,EAAE,uBAAuBG,IAAIuQ,GAC7B1Q,EAAE,mBAAmBG,IAAIuB,GACzB1B,EAAE,yBAAyB8J,YAEhC0B,MAAM,SAyEjB3J,OAAOsqB,kBAAoB,SAASC,GAChC,MAAM3H,EAAOzkB,EAAEosB,GAAK/c,QAAQ,QACzBoV,EAAK7jB,OAAS,GAAK6jB,EAAK1e,SAAS,iBAChC0e,EAAKxe,SAAS,QACdwe,EAAKte,SAASxG,KAAK,6BAA6BsL,QAEhDwZ,EAAKpV,QAAQ,uBAAuBnH,UAG5CrG,OAAOwqB,kBAAoB,WACvB,MAAMC,EAActsB,EAAE,wBAChBusB,EAAWvsB,EAAE,2BAEnBusB,EAASrhB,OACTohB,EAAYtmB,YAAY,YAExBoN,YAAW,WAGPkZ,EAAYrmB,SAAS,YACrBsmB,EAASthB,SACX","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* globals wipPrefixes, issuesTribute, emojiTribute */\n/* exported timeAddManual, toggleStopwatch, cancelStopwatch, initHeatmap */\n/* exported toggleDeadlineForm, setDeadline, deleteDependencyModal, cancelCodeComment, onOAuthLoginClick */\n'use strict';\n\nfunction htmlEncode(text) {\n   return jQuery('<div />').text(text).html()\n}\n\nlet csrf;\nlet suburl;\nlet previewFileModes;\nlet simpleMDEditor;\nlet codeMirrorEditor;\n\n// Disable Dropzone auto-discover because it's manually initialized\nif (typeof(Dropzone) !== \"undefined\") {\n    Dropzone.autoDiscover = false;\n}\n\n// Polyfill for IE9+ support (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)\nif (!Array.from) {\n    Array.from = (function () {\n        const toStr = Object.prototype.toString;\n        const isCallable = function (fn) {\n            return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n        };\n        const toInteger = function (value) {\n            const number = Number(value);\n            if (isNaN(number)) { return 0; }\n            if (number === 0 || !isFinite(number)) { return number; }\n            return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n        };\n        const maxSafeInteger = Math.pow(2, 53) - 1;\n        const toLength = function (value) {\n            const len = toInteger(value);\n            return Math.min(Math.max(len, 0), maxSafeInteger);\n        };\n\n        // The length property of the from method is 1.\n        return function from(arrayLike/*, mapFn, thisArg */) {\n            // 1. Let C be the this value.\n            const C = this;\n\n            // 2. Let items be ToObject(arrayLike).\n            const items = Object(arrayLike);\n\n            // 3. ReturnIfAbrupt(items).\n            if (arrayLike == null) {\n                throw new TypeError(\"Array.from requires an array-like object - not null or undefined\");\n            }\n\n            // 4. If mapfn is undefined, then let mapping be false.\n            const mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n            let T;\n            if (typeof mapFn !== 'undefined') {\n                // 5. else\n                // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n                if (!isCallable(mapFn)) {\n                    throw new TypeError('Array.from: when provided, the second argument must be a function');\n                }\n\n                // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n                if (arguments.length > 2) {\n                    T = arguments[2];\n                }\n            }\n\n            // 10. Let lenValue be Get(items, \"length\").\n            // 11. Let len be ToLength(lenValue).\n            const len = toLength(items.length);\n\n            // 13. If IsConstructor(C) is true, then\n            // 13. a. Let A be the result of calling the [[Construct]] internal method of C with an argument list containing the single item len.\n            // 14. a. Else, Let A be ArrayCreate(len).\n            const A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n            // 16. Let k be 0.\n            let k = 0;\n            // 17. Repeat, while k < len (also steps a - h)\n            let kValue;\n            while (k < len) {\n                kValue = items[k];\n                if (mapFn) {\n                    A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n                } else {\n                    A[k] = kValue;\n                }\n                k += 1;\n            }\n            // 18. Let putStatus be Put(A, \"length\", len, true).\n            A.length = len;\n            // 20. Return A.\n            return A;\n        };\n    }());\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nif (typeof Object.assign != 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, \"assign\", {\n        value: function assign(target, _varArgs) { // .length of function is 2\n            'use strict';\n            if (target == null) { // TypeError if undefined or null\n                throw new TypeError('Cannot convert undefined or null to object');\n            }\n\n            const to = Object(target);\n\n            for (let index = 1; index < arguments.length; index++) {\n                const nextSource = arguments[index];\n\n                if (nextSource != null) { // Skip over if undefined or null\n                    for (const nextKey in nextSource) {\n                        // Avoid bugs when hasOwnProperty is shadowed\n                        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                            to[nextKey] = nextSource[nextKey];\n                        }\n                    }\n                }\n            }\n            return to;\n        },\n        writable: true,\n        configurable: true\n    });\n}\n\nfunction initCommentPreviewTab($form) {\n    const $tabMenu = $form.find('.tabular.menu');\n    $tabMenu.find('.item').tab();\n    $tabMenu.find('.item[data-tab=\"' + $tabMenu.data('preview') + '\"]').click(function () {\n        const $this = $(this);\n        $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"mode\": \"gfm\",\n                \"context\": $this.data('context'),\n                \"text\": $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('write') + '\"] textarea').val()\n            },\n            function (data) {\n                const $previewPanel = $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('preview') + '\"]');\n                $previewPanel.html(data);\n                emojify.run($previewPanel[0]);\n                $('pre code', $previewPanel[0]).each(function () {\n                    hljs.highlightBlock(this);\n                });\n            }\n        );\n    });\n\n    buttonsClickOnEnter();\n}\n\nfunction initEditPreviewTab($form) {\n    const $tabMenu = $form.find('.tabular.menu');\n    $tabMenu.find('.item').tab();\n    const $previewTab = $tabMenu.find('.item[data-tab=\"' + $tabMenu.data('preview') + '\"]');\n    if ($previewTab.length) {\n        previewFileModes = $previewTab.data('preview-file-modes').split(',');\n        $previewTab.click(function () {\n            const $this = $(this);\n            $.post($this.data('url'), {\n                    \"_csrf\": csrf,\n                    \"mode\": \"gfm\",\n                    \"context\": $this.data('context'),\n                    \"text\": $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('write') + '\"] textarea').val()\n                },\n                function (data) {\n                    const $previewPanel = $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('preview') + '\"]');\n                    $previewPanel.html(data);\n                    emojify.run($previewPanel[0]);\n                    $('pre code', $previewPanel[0]).each(function () {\n                        hljs.highlightBlock(this);\n                    });\n                }\n            );\n        });\n    }\n}\n\nfunction initEditDiffTab($form) {\n    const $tabMenu = $form.find('.tabular.menu');\n    $tabMenu.find('.item').tab();\n    $tabMenu.find('.item[data-tab=\"' + $tabMenu.data('diff') + '\"]').click(function () {\n        const $this = $(this);\n        $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"context\": $this.data('context'),\n                \"content\": $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('write') + '\"] textarea').val()\n            },\n            function (data) {\n                const $diffPreviewPanel = $form.find('.tab.segment[data-tab=\"' + $tabMenu.data('diff') + '\"]');\n                $diffPreviewPanel.html(data);\n                emojify.run($diffPreviewPanel[0]);\n            }\n        );\n    });\n}\n\n\nfunction initEditForm() {\n    if ($('.edit.form').length == 0) {\n        return;\n    }\n\n    initEditPreviewTab($('.edit.form'));\n    initEditDiffTab($('.edit.form'));\n}\n\nfunction initBranchSelector() {\n    const $selectBranch = $('.ui.select-branch')\n    const $branchMenu = $selectBranch.find('.reference-list-menu');\n    $branchMenu.find('.item:not(.no-select)').click(function () {\n        const selectedValue = $(this).data('id');\n        $($(this).data('id-selector')).val(selectedValue);\n        $selectBranch.find('.ui .branch-name').text(selectedValue);\n    });\n    $selectBranch.find('.reference.column').click(function () {\n        $selectBranch.find('.scrolling.reference-list-menu').css('display', 'none');\n        $selectBranch.find('.reference .text').removeClass('black');\n        $($(this).data('target')).css('display', 'block');\n        $(this).find('.text').addClass('black');\n        return false;\n    });\n}\n\nfunction updateIssuesMeta(url, action, issueIds, elementId) {\n    return new Promise(function(resolve) {\n        $.ajax({\n            type: \"POST\",\n            url: url,\n            data: {\n                \"_csrf\": csrf,\n                \"action\": action,\n                \"issue_ids\": issueIds,\n                \"id\": elementId\n            },\n            success: resolve\n        })\n    })\n}\n\nfunction initRepoStatusChecker() {\n    const migrating = $(\"#repo_migrating\");\n    $('#repo_migrating_failed').hide();\n    if (migrating) {\n        const repo_name = migrating.attr('repo');\n        if (typeof repo_name === 'undefined') {\n            return\n        }\n        $.ajax({\n            type: \"GET\",\n            url: suburl +\"/\"+repo_name+\"/status\",\n            data: {\n                \"_csrf\": csrf,\n            },\n            complete: function(xhr) {\n                if (xhr.status == 200) {\n                    if (xhr.responseJSON) {\n                        if (xhr.responseJSON[\"status\"] == 0) {\n                            location.reload();\n                            return\n                        }\n\n                        setTimeout(function () {\n                            initRepoStatusChecker()\n                        }, 2000);\n                        return\n                    }\n                }\n                $('#repo_migrating_progress').hide();\n                $('#repo_migrating_failed').show();\n            }\n        })\n    }\n}\n\nfunction initReactionSelector(parent) {\n    let reactions = '';\n    if (!parent) {\n        parent = $(document);\n        reactions = '.reactions > ';\n    }\n\n    parent.find(reactions + 'a.label').popup({'position': 'bottom left', 'metadata': {'content': 'title', 'title': 'none'}});\n\n    parent.find('.select-reaction > .menu > .item, ' + reactions + 'a.label').on('click', function(e){\n        const vm = this;\n        e.preventDefault();\n\n        if ($(this).hasClass('disabled')) return;\n\n        const actionURL = $(this).hasClass('item') ?\n                $(this).closest('.select-reaction').data('action-url') :\n                $(this).data('action-url');\n        const url = actionURL + '/' + ($(this).hasClass('blue') ? 'unreact' : 'react');\n        $.ajax({\n            type: 'POST',\n            url: url,\n            data: {\n                '_csrf': csrf,\n                'content': $(this).data('content')\n            }\n        }).done(function(resp) {\n            if (resp && (resp.html || resp.empty)) {\n                const content = $(vm).closest('.content');\n                let react = content.find('.segment.reactions');\n                if (!resp.empty && react.length > 0) {\n                    react.remove();\n                }\n                if (!resp.empty) {\n                    react = $('<div class=\"ui attached segment reactions\"></div>');\n                    const attachments = content.find('.segment.bottom:first');\n                    if (attachments.length > 0) {\n                        react.insertBefore(attachments);\n                    } else {\n                        react.appendTo(content);\n                    }\n                    react.html(resp.html);\n                    const hasEmoji = react.find('.has-emoji');\n                    for (let i = 0; i < hasEmoji.length; i++) {\n                        emojify.run(hasEmoji.get(i));\n                    }\n                    react.find('.dropdown').dropdown();\n                    initReactionSelector(react);\n                }\n            }\n        });\n    });\n}\n\nfunction insertAtCursor(field, value) {\n    if (field.selectionStart || field.selectionStart === 0) {\n        const startPos = field.selectionStart;\n        const endPos = field.selectionEnd;\n        field.value = field.value.substring(0, startPos)\n            + value\n            + field.value.substring(endPos, field.value.length);\n        field.selectionStart = startPos + value.length;\n        field.selectionEnd = startPos + value.length;\n    } else {\n        field.value += value;\n    }\n}\n\nfunction replaceAndKeepCursor(field, oldval, newval) {\n    if (field.selectionStart || field.selectionStart === 0) {\n        const startPos = field.selectionStart;\n        const endPos = field.selectionEnd;\n        field.value = field.value.replace(oldval, newval);\n        field.selectionStart = startPos + newval.length - oldval.length;\n        field.selectionEnd = endPos + newval.length - oldval.length;\n    } else {\n        field.value = field.value.replace(oldval, newval);\n    }\n}\n\nfunction retrieveImageFromClipboardAsBlob(pasteEvent, callback){\n    if (!pasteEvent.clipboardData) {\n        return;\n    }\n\n    const items = pasteEvent.clipboardData.items;\n    if (typeof(items) === \"undefined\") {\n        return;\n    }\n\n    for (let i = 0; i < items.length; i++) {\n        if (items[i].type.indexOf(\"image\") === -1) continue;\n        const blob = items[i].getAsFile();\n\n        if (typeof(callback) === \"function\") {\n            pasteEvent.preventDefault();\n            pasteEvent.stopPropagation();\n            callback(blob);\n        }\n    }\n}\n\nfunction uploadFile(file, callback) {\n    const xhr = new XMLHttpRequest();\n\n    xhr.onload = function() {\n        if (xhr.status == 200) {\n            callback(xhr.responseText);\n        }\n    };\n\n    xhr.open(\"post\", suburl + \"/attachments\", true);\n    xhr.setRequestHeader(\"X-Csrf-Token\", csrf);\n    const formData = new FormData();\n    formData.append('file', file, file.name);\n    xhr.send(formData);\n}\n\nfunction reload() {\n    window.location.reload();\n}\n\nfunction initImagePaste(target) {\n    target.each(function() {\n        const field = this;\n        field.addEventListener('paste', function(event){\n            retrieveImageFromClipboardAsBlob(event, function(img) {\n                const name = img.name.substr(0, img.name.lastIndexOf('.'));\n                insertAtCursor(field, '![' + name + ']()');\n                uploadFile(img, function(res) {\n                    const data = JSON.parse(res);\n                    replaceAndKeepCursor(field, '![' + name + ']()', '![' + name + '](' + suburl + '/attachments/' + data.uuid + ')');\n                    const input = $('<input id=\"' + data.uuid + '\" name=\"files\" type=\"hidden\">').val(data.uuid);\n                    $('.files').append(input);\n                });\n            });\n        }, false);\n    });\n}\n\nfunction initCommentForm() {\n    if ($('.comment.form').length == 0) {\n        return\n    }\n\n    initBranchSelector();\n    initCommentPreviewTab($('.comment.form'));\n    initImagePaste($('.comment.form textarea'));\n\n    // Listsubmit\n    function initListSubmits(selector, outerSelector) {\n        const $list = $('.ui.' + outerSelector + '.list');\n        const $noSelect = $list.find('.no-select');\n        const $listMenu = $('.' + selector + ' .menu');\n        let hasLabelUpdateAction = $listMenu.data('action') == 'update';\n        const labels = {};\n\n        $('.' + selector).dropdown('setting', 'onHide', function(){\n            hasLabelUpdateAction = $listMenu.data('action') == 'update'; // Update the var\n            if (hasLabelUpdateAction) {\n                const promises = [];\n                Object.keys(labels).forEach(function(elementId) {\n                    const label = labels[elementId];\n                    const promise = updateIssuesMeta(\n                        label[\"update-url\"],\n                        label[\"action\"],\n                        label[\"issue-id\"],\n                        elementId\n                    );\n                    promises.push(promise);\n                });\n                Promise.all(promises).then(reload);\n            }\n        });\n\n        $listMenu.find('.item:not(.no-select)').click(function () {\n\n            // we don't need the action attribute when updating assignees\n            if (selector == 'select-assignees-modify') {\n\n                // UI magic. We need to do this here, otherwise it would destroy the functionality of\n                // adding/removing labels\n                if ($(this).hasClass('checked')) {\n                    $(this).removeClass('checked');\n                    $(this).find('.octicon').removeClass('octicon-check');\n                } else {\n                    $(this).addClass('checked');\n                    $(this).find('.octicon').addClass('octicon-check');\n                }\n\n                updateIssuesMeta(\n                    $listMenu.data('update-url'),\n                    \"\",\n                    $listMenu.data('issue-id'),\n                    $(this).data('id')\n                );\n                $listMenu.data('action', 'update'); // Update to reload the page when we updated items\n                return false;\n            }\n\n            if ($(this).hasClass('checked')) {\n                $(this).removeClass('checked');\n                $(this).find('.octicon').removeClass('octicon-check');\n                if (hasLabelUpdateAction) {\n                    if (!($(this).data('id') in labels)) {\n                        labels[$(this).data('id')] = {\n                            \"update-url\": $listMenu.data('update-url'),\n                            \"action\": \"detach\",\n                            \"issue-id\": $listMenu.data('issue-id'),\n                        };\n                    } else {\n                        delete labels[$(this).data('id')];\n                    }\n                }\n            } else {\n                $(this).addClass('checked');\n                $(this).find('.octicon').addClass('octicon-check');\n                if (hasLabelUpdateAction) {\n                    if (!($(this).data('id') in labels)) {\n                        labels[$(this).data('id')] = {\n                            \"update-url\": $listMenu.data('update-url'),\n                            \"action\": \"attach\",\n                            \"issue-id\": $listMenu.data('issue-id'),\n                        };\n                    } else {\n                        delete labels[$(this).data('id')];\n                    }\n                }\n            }\n\n            const listIds = [];\n            $(this).parent().find('.item').each(function () {\n                if ($(this).hasClass('checked')) {\n                    listIds.push($(this).data('id'));\n                    $($(this).data('id-selector')).removeClass('hide');\n                } else {\n                    $($(this).data('id-selector')).addClass('hide');\n                }\n            });\n            if (listIds.length == 0) {\n                $noSelect.removeClass('hide');\n            } else {\n                $noSelect.addClass('hide');\n            }\n            $($(this).parent().data('id')).val(listIds.join(\",\"));\n            return false;\n        });\n        $listMenu.find('.no-select.item').click(function () {\n            if (hasLabelUpdateAction || selector == 'select-assignees-modify') {\n                updateIssuesMeta(\n                    $listMenu.data('update-url'),\n                    \"clear\",\n                    $listMenu.data('issue-id'),\n                    \"\"\n                ).then(reload);\n            }\n\n            $(this).parent().find('.item').each(function () {\n                $(this).removeClass('checked');\n                $(this).find('.octicon').removeClass('octicon-check');\n            });\n\n            $list.find('.item').each(function () {\n                $(this).addClass('hide');\n            });\n            $noSelect.removeClass('hide');\n            $($(this).parent().data('id')).val('');\n\n        });\n    }\n\n    // Init labels and assignees\n    initListSubmits('select-label', 'labels');\n    initListSubmits('select-assignees', 'assignees');\n    initListSubmits('select-assignees-modify', 'assignees');\n\n    function selectItem(select_id, input_id) {\n        const $menu = $(select_id + ' .menu');\n        const $list = $('.ui' + select_id + '.list');\n        const hasUpdateAction = $menu.data('action') == 'update';\n\n        $menu.find('.item:not(.no-select)').click(function () {\n            $(this).parent().find('.item').each(function () {\n                $(this).removeClass('selected active')\n            });\n\n            $(this).addClass('selected active');\n            if (hasUpdateAction) {\n                updateIssuesMeta(\n                    $menu.data('update-url'),\n                    \"\",\n                    $menu.data('issue-id'),\n                    $(this).data('id')\n                ).then(reload);\n            }\n            switch (input_id) {\n                case '#milestone_id':\n                    $list.find('.selected').html('<a class=\"item\" href=' + $(this).data('href') + '>' +\n                        htmlEncode($(this).text()) + '</a>');\n                    break;\n                case '#assignee_id':\n                    $list.find('.selected').html('<a class=\"item\" href=' + $(this).data('href') + '>' +\n                        '<img class=\"ui avatar image\" src=' + $(this).data('avatar') + '>' +\n                        htmlEncode($(this).text()) + '</a>');\n            }\n            $('.ui' + select_id + '.list .no-select').addClass('hide');\n            $(input_id).val($(this).data('id'));\n        });\n        $menu.find('.no-select.item').click(function () {\n            $(this).parent().find('.item:not(.no-select)').each(function () {\n                $(this).removeClass('selected active')\n            });\n\n            if (hasUpdateAction) {\n                updateIssuesMeta(\n                    $menu.data('update-url'),\n                    \"\",\n                    $menu.data('issue-id'),\n                    $(this).data('id')\n                ).then(reload);\n            }\n\n            $list.find('.selected').html('');\n            $list.find('.no-select').removeClass('hide');\n            $(input_id).val('');\n        });\n    }\n\n    // Milestone and assignee\n    selectItem('.select-milestone', '#milestone_id');\n    selectItem('.select-assignee', '#assignee_id');\n}\n\nfunction initInstall() {\n    if ($('.install').length == 0) {\n        return;\n    }\n\n    if ($('#db_host').val()==\"\") {\n        $('#db_host').val(\"127.0.0.1:3306\");\n        $('#db_user').val(\"gitea\");\n        $('#db_name').val(\"gitea\");\n    }\n\n    // Database type change detection.\n    $(\"#db_type\").change(function () {\n        const sqliteDefault = 'data/gitea.db';\n        const tidbDefault = 'data/gitea_tidb';\n\n        const dbType = $(this).val();\n        if (dbType === \"SQLite3\") {\n            $('#sql_settings').hide();\n            $('#pgsql_settings').hide();\n            $('#mysql_settings').hide();\n            $('#sqlite_settings').show();\n\n            if (dbType === \"SQLite3\" && $('#db_path').val() == tidbDefault) {\n                $('#db_path').val(sqliteDefault);\n            }\n            return;\n        }\n\n        const dbDefaults = {\n            \"MySQL\": \"127.0.0.1:3306\",\n            \"PostgreSQL\": \"127.0.0.1:5432\",\n            \"MSSQL\": \"127.0.0.1:1433\"\n        };\n\n        $('#sqlite_settings').hide();\n        $('#sql_settings').show();\n\n        $('#pgsql_settings').toggle(dbType === \"PostgreSQL\");\n        $('#mysql_settings').toggle(dbType === \"MySQL\");\n        $.each(dbDefaults, function(_type, defaultHost) {\n            if ($('#db_host').val() == defaultHost) {\n                $('#db_host').val(dbDefaults[dbType]);\n                return false;\n            }\n        });\n    });\n\n    // TODO: better handling of exclusive relations.\n    $('#offline-mode input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#disable-gravatar').checkbox('check');\n            $('#federated-avatar-lookup').checkbox('uncheck');\n        }\n    });\n    $('#disable-gravatar input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#federated-avatar-lookup').checkbox('uncheck');\n        } else {\n            $('#offline-mode').checkbox('uncheck');\n        }\n    });\n    $('#federated-avatar-lookup input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#disable-gravatar').checkbox('uncheck');\n            $('#offline-mode').checkbox('uncheck');\n        }\n    });\n    $('#enable-openid-signin input').change(function () {\n        if ($(this).is(':checked')) {\n            if (!$('#disable-registration input').is(':checked')) {\n                $('#enable-openid-signup').checkbox('check');\n            }\n        } else {\n            $('#enable-openid-signup').checkbox('uncheck');\n        }\n    });\n    $('#disable-registration input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#enable-captcha').checkbox('uncheck');\n            $('#enable-openid-signup').checkbox('uncheck');\n        } else {\n            $('#enable-openid-signup').checkbox('check');\n        }\n    });\n    $('#enable-captcha input').change(function () {\n        if ($(this).is(':checked')) {\n            $('#disable-registration').checkbox('uncheck');\n        }\n    });\n}\n\nfunction initRepository() {\n    if ($('.repository').length == 0) {\n        return;\n    }\n\n    function initFilterSearchDropdown(selector) {\n        const $dropdown = $(selector);\n        $dropdown.dropdown({\n            fullTextSearch: true,\n            selectOnKeydown: false,\n            onChange: function (_text, _value, $choice) {\n                if ($choice.data('url')) {\n                    window.location.href = $choice.data('url');\n                }\n            },\n            message: {noResults: $dropdown.data('no-results')}\n        });\n    }\n\n    // File list and commits\n    if ($('.repository.file.list').length > 0 ||\n        ('.repository.commits').length > 0) {\n        initFilterBranchTagDropdown('.choose.reference .dropdown');\n    }\n\n    // Wiki\n    if ($('.repository.wiki.view').length > 0) {\n        initFilterSearchDropdown('.choose.page .dropdown');\n    }\n\n    // Options\n    if ($('.repository.settings.options').length > 0) {\n        $('#repo_name').keyup(function () {\n            const $prompt = $('#repo-name-change-prompt');\n            if ($(this).val().toString().toLowerCase() != $(this).data('name').toString().toLowerCase()) {\n                $prompt.show();\n            } else {\n                $prompt.hide();\n            }\n        });\n\n        // Enable or select internal/external wiki system and issue tracker.\n        $('.enable-system').change(function () {\n            if (this.checked) {\n                $($(this).data('target')).removeClass('disabled');\n                if (!$(this).data('context')) $($(this).data('context')).addClass('disabled');\n            } else {\n                $($(this).data('target')).addClass('disabled');\n                if (!$(this).data('context')) $($(this).data('context')).removeClass('disabled');\n            }\n        });\n        $('.enable-system-radio').change(function () {\n            if (this.value == 'false') {\n                $($(this).data('target')).addClass('disabled');\n                if (typeof $(this).data('context') !== 'undefined') $($(this).data('context')).removeClass('disabled');\n            } else if (this.value == 'true') {\n                $($(this).data('target')).removeClass('disabled');\n                if (typeof $(this).data('context') !== 'undefined')  $($(this).data('context')).addClass('disabled');\n            }\n        });\n    }\n\n    // Labels\n    if ($('.repository.labels').length > 0) {\n        // Create label\n        const $newLabelPanel = $('.new-label.segment');\n        $('.new-label.button').click(function () {\n            $newLabelPanel.show();\n        });\n        $('.new-label.segment .cancel').click(function () {\n            $newLabelPanel.hide();\n        });\n\n        $('.color-picker').each(function () {\n            $(this).minicolors();\n        });\n        $('.precolors .color').click(function () {\n            const color_hex = $(this).data('color-hex');\n            $('.color-picker').val(color_hex);\n            $('.minicolors-swatch-color').css(\"background-color\", color_hex);\n        });\n        $('.edit-label-button').click(function () {\n            $('#label-modal-id').val($(this).data('id'));\n            $('.edit-label .new-label-input').val($(this).data('title'));\n            $('.edit-label .new-label-desc-input').val($(this).data('description'));\n            $('.edit-label .color-picker').val($(this).data('color'));\n            $('.minicolors-swatch-color').css(\"background-color\", $(this).data('color'));\n            $('.edit-label.modal').modal({\n                onApprove: function () {\n                    $('.edit-label.form').submit();\n                }\n            }).modal('show');\n            return false;\n        });\n    }\n\n    // Milestones\n    if ($('.repository.new.milestone').length > 0) {\n        const $datepicker = $('.milestone.datepicker');\n        $datepicker.datetimepicker({\n            lang: $datepicker.data('lang'),\n            inline: true,\n            timepicker: false,\n            startDate: $datepicker.data('start-date'),\n            formatDate: 'Y-m-d',\n            onSelectDate: function (ct) {\n                $('#deadline').val(ct.dateFormat('Y-m-d'));\n            }\n        });\n        $('#clear-date').click(function () {\n            $('#deadline').val('');\n            return false;\n        });\n    }\n\n    // Issues\n    if ($('.repository.view.issue').length > 0) {\n        // Edit issue title\n        const $issueTitle = $('#issue-title');\n        const $editInput = $('#edit-title-input input');\n        const editTitleToggle = function () {\n            $issueTitle.toggle();\n            $('.not-in-edit').toggle();\n            $('#edit-title-input').toggle();\n            $('.in-edit').toggle();\n            $editInput.focus();\n            return false;\n        };\n        $('#edit-title').click(editTitleToggle);\n        $('#cancel-edit-title').click(editTitleToggle);\n        $('#save-edit-title').click(editTitleToggle).click(function () {\n            if ($editInput.val().length == 0 ||\n                $editInput.val() == $issueTitle.text()) {\n                $editInput.val($issueTitle.text());\n                return false;\n            }\n\n            $.post($(this).data('update-url'), {\n                    \"_csrf\": csrf,\n                    \"title\": $editInput.val()\n                },\n                function (data) {\n                    $editInput.val(data.title);\n                    $issueTitle.text(data.title);\n                    reload();\n                });\n            return false;\n        });\n\n        // Edit issue or comment content\n        $('.edit-content').click(function () {\n            const $segment = $(this).parent().parent().parent().next();\n            const $editContentZone = $segment.find('.edit-content-zone');\n            const $renderContent = $segment.find('.render-content');\n            const $rawContent = $segment.find('.raw-content');\n            let $textarea;\n\n            // Setup new form\n            if ($editContentZone.html().length == 0) {\n                $editContentZone.html($('#edit-content-form').html());\n                $textarea = $editContentZone.find('textarea');\n                issuesTribute.attach($textarea.get());\n                emojiTribute.attach($textarea.get());\n\n                const $dropzone = $editContentZone.find('.dropzone');\n                $dropzone.data(\"saved\", false);\n                const $files = $editContentZone.find('.comment-files');\n                if ($dropzone.length > 0) {\n                    const filenameDict = {};\n                    $dropzone.dropzone({\n                        url: $dropzone.data('upload-url'),\n                        headers: {\"X-Csrf-Token\": csrf},\n                        maxFiles: $dropzone.data('max-file'),\n                        maxFilesize: $dropzone.data('max-size'),\n                        acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n                        addRemoveLinks: true,\n                        dictDefaultMessage: $dropzone.data('default-message'),\n                        dictInvalidFileType: $dropzone.data('invalid-input-type'),\n                        dictFileTooBig: $dropzone.data('file-too-big'),\n                        dictRemoveFile: $dropzone.data('remove-file'),\n                        init: function () {\n                            this.on(\"success\", function (file, data) {\n                                filenameDict[file.name] = {\n                                    \"uuid\": data.uuid,\n                                    \"submitted\": false\n                                }\n                                const input = $('<input id=\"' + data.uuid + '\" name=\"files\" type=\"hidden\">').val(data.uuid);\n                                $files.append(input);\n                            });\n                            this.on(\"removedfile\", function (file) {\n                                if (!(file.name in filenameDict)) {\n                                    return;\n                                }\n                                $('#' + filenameDict[file.name].uuid).remove();\n                                if ($dropzone.data('remove-url') && $dropzone.data('csrf') && !filenameDict[file.name].submitted) {\n                                    $.post($dropzone.data('remove-url'), {\n                                        file: filenameDict[file.name].uuid,\n                                        _csrf: $dropzone.data('csrf')\n                                    });\n                                }\n                            });\n                            this.on(\"submit\", function () {\n                                $.each(filenameDict, function(name){\n                                    filenameDict[name].submitted = true;\n                                });\n                            });\n                            this.on(\"reload\", function (){\n                                $.getJSON($editContentZone.data('attachment-url'), function(data){\n                                    const drop = $dropzone.get(0).dropzone;\n                                    drop.removeAllFiles(true);\n                                    $files.empty();\n                                    $.each(data, function(){\n                                        const imgSrc =  $dropzone.data('upload-url') + \"/\" + this.uuid;\n                                        drop.emit(\"addedfile\", this);\n                                        drop.emit(\"thumbnail\", this, imgSrc);\n                                        drop.emit(\"complete\", this);\n                                        drop.files.push(this);\n                                        filenameDict[this.name] = {\n                                            \"submitted\": true,\n                                            \"uuid\": this.uuid\n                                        }\n                                        $dropzone.find(\"img[src='\" + imgSrc + \"']\").css(\"max-width\", \"100%\");\n                                        const input = $('<input id=\"' + this.uuid + '\" name=\"files\" type=\"hidden\">').val(this.uuid);\n                                        $files.append(input);\n                                    });\n                                });\n                            });\n                        }\n                    });\n                    $dropzone.get(0).dropzone.emit(\"reload\");\n                }\n                // Give new write/preview data-tab name to distinguish from others\n                const $editContentForm = $editContentZone.find('.ui.comment.form');\n                const $tabMenu = $editContentForm.find('.tabular.menu');\n                $tabMenu.attr('data-write', $editContentZone.data('write'));\n                $tabMenu.attr('data-preview', $editContentZone.data('preview'));\n                $tabMenu.find('.write.item').attr('data-tab', $editContentZone.data('write'));\n                $tabMenu.find('.preview.item').attr('data-tab', $editContentZone.data('preview'));\n                $editContentForm.find('.write.segment').attr('data-tab', $editContentZone.data('write'));\n                $editContentForm.find('.preview.segment').attr('data-tab', $editContentZone.data('preview'));\n\n                initCommentPreviewTab($editContentForm);\n\n                $editContentZone.find('.cancel.button').click(function () {\n                    $renderContent.show();\n                    $editContentZone.hide();\n                    $dropzone.get(0).dropzone.emit(\"reload\");\n                });\n                $editContentZone.find('.save.button').click(function () {\n                    $renderContent.show();\n                    $editContentZone.hide();\n                    const $attachments = $files.find(\"[name=files]\").map(function(){\n                        return $(this).val();\n                    }).get();\n                    $.post($editContentZone.data('update-url'), {\n                        \"_csrf\": csrf,\n                        \"content\": $textarea.val(),\n                        \"context\": $editContentZone.data('context'),\n                        \"files\": $attachments\n                    },\n                    function (data) {\n                        if (data.length == 0) {\n                            $renderContent.html($('#no-content').html());\n                        } else {\n                            $renderContent.html(data.content);\n                            emojify.run($renderContent[0]);\n                            $('pre code', $renderContent[0]).each(function () {\n                                hljs.highlightBlock(this);\n                            });\n                        }\n                        const $content = $segment.parent();\n                        if(!$content.find(\".ui.small.images\").length){\n                            if(data.attachments != \"\"){\n                                $content.append(\n                                '<div class=\"ui bottom attached segment\">' +\n                                '    <div class=\"ui small images\">' +\n                                '    </div>' +\n                                '</div>'\n                                );\n                                $content.find(\".ui.small.images\").html(data.attachments);\n                            }\n                        } else if (data.attachments == \"\") {\n                            $content.find(\".ui.small.images\").parent().remove();\n                        } else {\n                            $content.find(\".ui.small.images\").html(data.attachments);\n                        }\n                        $dropzone.get(0).dropzone.emit(\"submit\");\n                        $dropzone.get(0).dropzone.emit(\"reload\");\n                    });\n                });\n            } else {\n                $textarea = $segment.find('textarea');\n            }\n\n            // Show write/preview tab and copy raw content as needed\n            $editContentZone.show();\n            $renderContent.hide();\n            if ($textarea.val().length == 0) {\n                $textarea.val($rawContent.text());\n            }\n            $textarea.focus();\n            return false;\n        });\n\n        // Delete comment\n        $('.delete-comment').click(function () {\n            const $this = $(this);\n            if (confirm($this.data('locale'))) {\n                $.post($this.data('url'), {\n                    \"_csrf\": csrf\n                }).success(function () {\n                    $('#' + $this.data('comment-id')).remove();\n                });\n            }\n            return false;\n        });\n\n        // Change status\n        const $statusButton = $('#status-button');\n        $('#comment-form .edit_area').keyup(function () {\n            if ($(this).val().length == 0) {\n                $statusButton.text($statusButton.data('status'))\n            } else {\n                $statusButton.text($statusButton.data('status-and-comment'))\n            }\n        });\n        $statusButton.click(function () {\n            $('#status').val($statusButton.data('status-val'));\n            $('#comment-form').submit();\n        });\n\n        // Pull Request merge button\n        const $mergeButton = $('.merge-button > button');\n        $mergeButton.on('click', function(e) {\n            e.preventDefault();\n            $('.' + $(this).data('do') + '-fields').show();\n            $(this).parent().hide();\n        });\n        $('.merge-button > .dropdown').dropdown({\n            onChange: function (_text, _value, $choice) {\n                if ($choice.data('do')) {\n                    $mergeButton.find('.button-text').text($choice.text());\n                    $mergeButton.data('do', $choice.data('do'));\n                }\n            }\n        });\n        $('.merge-cancel').on('click', function(e) {\n            e.preventDefault();\n            $(this).closest('.form').hide();\n            $mergeButton.parent().show();\n        });\n\n        initReactionSelector();\n    }\n\n    // Diff\n    if ($('.repository.diff').length > 0) {\n        $('.diff-counter').each(function () {\n            const $item = $(this);\n            const addLine = $item.find('span[data-line].add').data(\"line\");\n            const delLine = $item.find('span[data-line].del').data(\"line\");\n            const addPercent = parseFloat(addLine) / (parseFloat(addLine) + parseFloat(delLine)) * 100;\n            $item.find(\".bar .add\").css(\"width\", addPercent + \"%\");\n        });\n    }\n\n    // Quick start and repository home\n    $('#repo-clone-ssh').click(function () {\n        $('.clone-url').text($(this).data('link'));\n        $('#repo-clone-url').val($(this).data('link'));\n        $(this).addClass('blue');\n        $('#repo-clone-https').removeClass('blue');\n        localStorage.setItem('repo-clone-protocol', 'ssh');\n    });\n    $('#repo-clone-https').click(function () {\n        $('.clone-url').text($(this).data('link'));\n        $('#repo-clone-url').val($(this).data('link'));\n        $(this).addClass('blue');\n        $('#repo-clone-ssh').removeClass('blue');\n        localStorage.setItem('repo-clone-protocol', 'https');\n    });\n    $('#repo-clone-url').click(function () {\n        $(this).select();\n    });\n\n    // Pull request\n    const $repoComparePull = $('.repository.compare.pull');\n    if ($repoComparePull.length > 0) {\n        initFilterSearchDropdown('.choose.branch .dropdown');\n        // show pull request form\n        $repoComparePull.find('button.show-form').on('click', function(e) {\n            e.preventDefault();\n            $repoComparePull.find('.pullrequest-form').show();\n            $(this).parent().hide();\n        });\n    }\n\n    // Branches\n    if ($('.repository.settings.branches').length > 0) {\n        initFilterSearchDropdown('.protected-branches .dropdown');\n        $('.enable-protection, .enable-whitelist').change(function () {\n            if (this.checked) {\n                $($(this).data('target')).removeClass('disabled');\n            } else {\n                $($(this).data('target')).addClass('disabled');\n            }\n        });\n    }\n}\n\nfunction initMigration() {\n    const toggleMigrations = function() {\n        const authUserName = $('#auth_username').val();\n        const cloneAddr = $('#clone_addr').val();\n        if (!$('#mirror').is(\":checked\") && (authUserName!=undefined && authUserName.length > 0)\n        && (cloneAddr!=undefined && (cloneAddr.startsWith(\"https://github.com\") || cloneAddr.startsWith(\"http://github.com\")))) {\n            $('#migrate_items').show();\n        } else {\n            $('#migrate_items').hide();\n        }\n    }\n\n    toggleMigrations();\n\n    $('#clone_addr').on('input', toggleMigrations)\n    $('#auth_username').on('input', toggleMigrations)\n    $('#mirror').on('change', toggleMigrations)\n}\n\nfunction initPullRequestReview() {\n    $('.show-outdated').on('click', function (e) {\n        e.preventDefault();\n        const id = $(this).data('comment');\n        $(this).addClass(\"hide\");\n        $(\"#code-comments-\" + id).removeClass('hide');\n        $(\"#code-preview-\" + id).removeClass('hide');\n        $(\"#hide-outdated-\" + id).removeClass('hide');\n    });\n\n    $('.hide-outdated').on('click', function (e) {\n        e.preventDefault();\n        const id = $(this).data('comment');\n        $(this).addClass(\"hide\");\n        $(\"#code-comments-\" + id).addClass('hide');\n        $(\"#code-preview-\" + id).addClass('hide');\n        $(\"#show-outdated-\" + id).removeClass('hide');\n    });\n\n    $('button.comment-form-reply').on('click', function (e) {\n        e.preventDefault();\n        $(this).hide();\n        const form = $(this).parent().find('.comment-form')\n        form.removeClass('hide');\n        assingMenuAttributes(form.find('.menu'));\n    });\n    // The following part is only for diff views\n    if ($('.repository.pull.diff').length == 0) {\n        return;\n    }\n\n    $('.diff-detail-box.ui.sticky').sticky();\n\n    $('.btn-review').on('click', function(e) {\n        e.preventDefault();\n        $(this).closest('.dropdown').find('.menu').toggle('visible');\n    }).closest('.dropdown').find('.link.close').on('click', function(e) {\n        e.preventDefault();\n        $(this).closest('.menu').toggle('visible');\n    });\n\n    $('.code-view .lines-code,.code-view .lines-num')\n        .on('mouseenter', function() {\n            const parent = $(this).closest('td');\n            $(this).closest('tr').addClass(\n                parent.hasClass('lines-num-old') || parent.hasClass('lines-code-old')\n                    ? 'focus-lines-old' : 'focus-lines-new'\n            );\n        })\n        .on('mouseleave', function() {\n            $(this).closest('tr').removeClass('focus-lines-new focus-lines-old');\n        });\n    $('.add-code-comment').on('click', function(e) {\n        // https://github.com/go-gitea/gitea/issues/4745\n        if ($(e.target).hasClass('btn-add-single')) {\n          return;\n        }\n        e.preventDefault();\n        const isSplit = $(this).closest('.code-diff').hasClass('code-diff-split');\n        const side = $(this).data('side');\n        const idx = $(this).data('idx');\n        const path = $(this).data('path');\n        const form = $('#pull_review_add_comment').html();\n        const tr = $(this).closest('tr');\n        let ntr = tr.next();\n        if (!ntr.hasClass('add-comment')) {\n            ntr = $('<tr class=\"add-comment\">'\n                    + (isSplit ? '<td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-right\"></td>'\n                               : '<td class=\"lines-num\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left add-comment-right\"></td>')\n                    + '</tr>');\n            tr.after(ntr);\n        }\n        const td = ntr.find('.add-comment-' + side);\n        let commentCloud = td.find('.comment-code-cloud');\n        if (commentCloud.length === 0) {\n            td.html(form);\n            commentCloud = td.find('.comment-code-cloud');\n            assingMenuAttributes(commentCloud.find('.menu'));\n\n            td.find(\"input[name='line']\").val(idx);\n            td.find(\"input[name='side']\").val(side === \"left\" ? \"previous\":\"proposed\");\n            td.find(\"input[name='path']\").val(path);\n        }\n        commentCloud.find('textarea').focus();\n    });\n}\n\nfunction assingMenuAttributes(menu) {\n    const id = Math.floor(Math.random() * Math.floor(1000000));\n    menu.attr('data-write', menu.attr('data-write') + id);\n    menu.attr('data-preview', menu.attr('data-preview') + id);\n    menu.find('.item').each(function() {\n        const tab = $(this).attr('data-tab') + id;\n        $(this).attr('data-tab', tab);\n    });\n    menu.parent().find(\"*[data-tab='write']\").attr('data-tab', 'write' + id);\n    menu.parent().find(\"*[data-tab='preview']\").attr('data-tab', 'preview' + id);\n    initCommentPreviewTab(menu.parent(\".form\"));\n    return id;\n}\n\nfunction initRepositoryCollaboration() {\n    // Change collaborator access mode\n    $('.access-mode.menu .item').click(function () {\n        const $menu = $(this).parent();\n        $.post($menu.data('url'), {\n            \"_csrf\": csrf,\n            \"uid\": $menu.data('uid'),\n            \"mode\": $(this).data('value')\n        })\n    });\n}\n\nfunction initTeamSettings() {\n    // Change team access mode\n    $('.organization.new.team input[name=permission]').change(function () {\n        const val = $('input[name=permission]:checked', '.organization.new.team').val()\n        if (val === 'admin') {\n            $('.organization.new.team .team-units').hide();\n        } else {\n            $('.organization.new.team .team-units').show();\n        }\n    });\n}\n\nfunction initWikiForm() {\n    const $editArea = $('.repository.wiki textarea#edit_area');\n    if ($editArea.length > 0) {\n        const simplemde = new SimpleMDE({\n            autoDownloadFontAwesome: false,\n            element: $editArea[0],\n            forceSync: true,\n            previewRender: function (plainText, preview) { // Async method\n                setTimeout(function () {\n                    // FIXME: still send render request when return back to edit mode\n                    $.post($editArea.data('url'), {\n                            \"_csrf\": csrf,\n                            \"mode\": \"gfm\",\n                            \"context\": $editArea.data('context'),\n                            \"text\": plainText\n                        },\n                        function (data) {\n                            preview.innerHTML = '<div class=\"markdown ui segment\">' + data + '</div>';\n                            emojify.run($('.editor-preview')[0]);\n                        }\n                    );\n                }, 0);\n\n                return \"Loading...\";\n            },\n            renderingConfig: {\n                singleLineBreaks: false\n            },\n            indentWithTabs: false,\n            tabSize: 4,\n            spellChecker: false,\n            toolbar: [\"bold\", \"italic\", \"strikethrough\", \"|\",\n                \"heading-1\", \"heading-2\", \"heading-3\", \"heading-bigger\", \"heading-smaller\", \"|\",\n                {\n                    name: \"code-inline\",\n                    action: function(e){\n                        const cm = e.codemirror;\n                        const selection = cm.getSelection();\n                        cm.replaceSelection(\"`\" + selection + \"`\");\n                        if (!selection) {\n                            const cursorPos = cm.getCursor();\n                            cm.setCursor(cursorPos.line, cursorPos.ch - 1);\n                        }\n                        cm.focus();\n                    },\n                    className: \"fa fa-angle-right\",\n                    title: \"Add Inline Code\",\n                },\"code\", \"quote\", \"|\", {\n                    name: \"checkbox-empty\",\n                    action: function(e){\n                        const cm = e.codemirror;\n                        cm.replaceSelection(\"\\n- [ ] \" + cm.getSelection());\n                        cm.focus();\n                    },\n                    className: \"fa fa-square-o\",\n                    title: \"Add Checkbox (empty)\",\n                },\n                {\n                    name: \"checkbox-checked\",\n                    action: function(e){\n                        const cm = e.codemirror;\n                        cm.replaceSelection(\"\\n- [x] \" + cm.getSelection());\n                        cm.focus();\n                    },\n                    className: \"fa fa-check-square-o\",\n                    title: \"Add Checkbox (checked)\",\n                }, \"|\",\n                \"unordered-list\", \"ordered-list\", \"|\",\n                \"link\", \"image\", \"table\", \"horizontal-rule\", \"|\",\n                \"clean-block\", \"preview\", \"fullscreen\"]\n        })\n        $(simplemde.codemirror.getInputField()).addClass(\"js-quick-submit\");\n    }\n}\n\n// For IE\nString.prototype.endsWith = function (pattern) {\n    const d = this.length - pattern.length;\n    return d >= 0 && this.lastIndexOf(pattern) === d;\n};\n\n// Adding function to get the cursor position in a text field to jQuery object.\n$.fn.getCursorPosition = function () {\n    const el = $(this).get(0);\n    let pos = 0;\n    if ('selectionStart' in el) {\n        pos = el.selectionStart;\n    } else if ('selection' in document) {\n        el.focus();\n        const Sel = document.selection.createRange();\n        const SelLength = document.selection.createRange().text.length;\n        Sel.moveStart('character', -el.value.length);\n        pos = Sel.text.length - SelLength;\n    }\n    return pos;\n}\n\nfunction setSimpleMDE($editArea) {\n    if (codeMirrorEditor) {\n        codeMirrorEditor.toTextArea();\n        codeMirrorEditor = null;\n    }\n\n    if (simpleMDEditor) {\n        return true;\n    }\n\n    simpleMDEditor = new SimpleMDE({\n        autoDownloadFontAwesome: false,\n        element: $editArea[0],\n        forceSync: true,\n        renderingConfig: {\n            singleLineBreaks: false\n        },\n        indentWithTabs: false,\n        tabSize: 4,\n        spellChecker: false,\n        previewRender: function (plainText, preview) { // Async method\n            setTimeout(function () {\n                // FIXME: still send render request when return back to edit mode\n                $.post($editArea.data('url'), {\n                        \"_csrf\": csrf,\n                        \"mode\": \"gfm\",\n                        \"context\": $editArea.data('context'),\n                        \"text\": plainText\n                    },\n                    function (data) {\n                        preview.innerHTML = '<div class=\"markdown ui segment\">' + data + '</div>';\n                        emojify.run($('.editor-preview')[0]);\n                    }\n                );\n            }, 0);\n\n            return \"Loading...\";\n        },\n        toolbar: [\"bold\", \"italic\", \"strikethrough\", \"|\",\n            \"heading-1\", \"heading-2\", \"heading-3\", \"heading-bigger\", \"heading-smaller\", \"|\",\n            \"code\", \"quote\", \"|\",\n            \"unordered-list\", \"ordered-list\", \"|\",\n            \"link\", \"image\", \"table\", \"horizontal-rule\", \"|\",\n            \"clean-block\", \"preview\", \"fullscreen\", \"side-by-side\"]\n    });\n\n    return true;\n}\n\nfunction setCodeMirror($editArea) {\n    if (simpleMDEditor) {\n        simpleMDEditor.toTextArea();\n        simpleMDEditor = null;\n    }\n\n    if (codeMirrorEditor) {\n        return true;\n    }\n\n    codeMirrorEditor = CodeMirror.fromTextArea($editArea[0], {\n        lineNumbers: true\n    });\n    codeMirrorEditor.on(\"change\", function (cm, _change) {\n        $editArea.val(cm.getValue());\n    });\n\n    return true;\n}\n\nfunction initEditor() {\n    $('.js-quick-pull-choice-option').change(function () {\n        if ($(this).val() == 'commit-to-new-branch') {\n            $('.quick-pull-branch-name').show();\n            $('.quick-pull-branch-name input').prop('required',true);\n        } else {\n            $('.quick-pull-branch-name').hide();\n            $('.quick-pull-branch-name input').prop('required',false);\n        }\n        $('#commit-button').text($(this).attr('button_text'));\n    });\n\n    const $editFilename = $(\"#file-name\");\n    $editFilename.keyup(function (e) {\n        const $section = $('.breadcrumb span.section');\n        const $divider = $('.breadcrumb div.divider');\n        let value;\n        let parts;\n\n        if (e.keyCode == 8) {\n            if ($(this).getCursorPosition() == 0) {\n                if ($section.length > 0) {\n                    value = $section.last().find('a').text();\n                    $(this).val(value + $(this).val());\n                    $(this)[0].setSelectionRange(value.length, value.length);\n                    $section.last().remove();\n                    $divider.last().remove();\n                }\n            }\n        }\n        if (e.keyCode == 191) {\n            parts = $(this).val().split('/');\n            for (let i = 0; i < parts.length; ++i) {\n                value = parts[i];\n                if (i < parts.length - 1) {\n                    if (value.length) {\n                        $('<span class=\"section\"><a href=\"#\">' + value + '</a></span>').insertBefore($(this));\n                        $('<div class=\"divider\"> / </div>').insertBefore($(this));\n                    }\n                }\n                else {\n                    $(this).val(value);\n                }\n                $(this)[0].setSelectionRange(0, 0);\n            }\n        }\n        parts = [];\n        $('.breadcrumb span.section').each(function () {\n            const element = $(this);\n            if (element.find('a').length) {\n                parts.push(element.find('a').text());\n            } else {\n                parts.push(element.text());\n            }\n        });\n        if ($(this).val())\n            parts.push($(this).val());\n        $('#tree_path').val(parts.join('/'));\n    }).trigger('keyup');\n\n    const $editArea = $('.repository.editor textarea#edit_area');\n    if (!$editArea.length)\n        return;\n\n    const markdownFileExts = $editArea.data(\"markdown-file-exts\").split(\",\");\n    const lineWrapExtensions = $editArea.data(\"line-wrap-extensions\").split(\",\");\n\n    $editFilename.on(\"keyup\", function () {\n        const val = $editFilename.val();\n        let mode, spec, extension, extWithDot, dataUrl, apiCall;\n\n        extension = extWithDot = \"\";\n        const m = /.+\\.([^.]+)$/.exec(val);\n        if (m) {\n            extension = m[1];\n            extWithDot = \".\" + extension;\n        }\n\n        const info = CodeMirror.findModeByExtension(extension);\n        const previewLink = $('a[data-tab=preview]');\n        if (info) {\n            mode = info.mode;\n            spec = info.mime;\n            apiCall = mode;\n        }\n        else {\n            apiCall = extension\n        }\n\n        if (previewLink.length && apiCall && previewFileModes && previewFileModes.length && previewFileModes.indexOf(apiCall) >= 0) {\n            dataUrl = previewLink.data('url');\n            previewLink.data('url', dataUrl.replace(/(.*)\\/.*/i, '$1/' + mode));\n            previewLink.show();\n        }\n        else {\n            previewLink.hide();\n        }\n\n        // If this file is a Markdown extensions, we will load that editor and return\n        if (markdownFileExts.indexOf(extWithDot) >= 0) {\n            if (setSimpleMDE($editArea)) {\n                return;\n            }\n        }\n\n        // Else we are going to use CodeMirror\n        if (!codeMirrorEditor && !setCodeMirror($editArea)) {\n            return;\n        }\n\n        if (mode) {\n            codeMirrorEditor.setOption(\"mode\", spec);\n            CodeMirror.autoLoadMode(codeMirrorEditor, mode);\n        }\n\n        if (lineWrapExtensions.indexOf(extWithDot) >= 0) {\n            codeMirrorEditor.setOption(\"lineWrapping\", true);\n        }\n        else {\n            codeMirrorEditor.setOption(\"lineWrapping\", false);\n        }\n\n        // get the filename without any folder\n        let value = $editFilename.val();\n        if (value.length === 0) {\n            return;\n        }\n        value = value.split('/');\n        value = value[value.length - 1];\n\n        $.getJSON($editFilename.data('ec-url-prefix')+value, function(editorconfig) {\n            if (editorconfig.indent_style === 'tab') {\n                codeMirrorEditor.setOption(\"indentWithTabs\", true);\n                codeMirrorEditor.setOption('extraKeys', {});\n            } else {\n                codeMirrorEditor.setOption(\"indentWithTabs\", false);\n                // required because CodeMirror doesn't seems to use spaces correctly for {\"indentWithTabs\": false}:\n                // - https://github.com/codemirror/CodeMirror/issues/988\n                // - https://codemirror.net/doc/manual.html#keymaps\n                codeMirrorEditor.setOption('extraKeys', {\n                    Tab: function(cm) {\n                        const spaces = Array(parseInt(cm.getOption(\"indentUnit\")) + 1).join(\" \");\n                        cm.replaceSelection(spaces);\n                    }\n                });\n            }\n            codeMirrorEditor.setOption(\"indentUnit\", editorconfig.indent_size || 4);\n            codeMirrorEditor.setOption(\"tabSize\", editorconfig.tab_width || 4);\n        });\n    }).trigger('keyup');\n\n    // Using events from https://github.com/codedance/jquery.AreYouSure#advanced-usage\n    // to enable or disable the commit button\n    const $commitButton = $('#commit-button');\n    const $editForm = $('.ui.edit.form');\n    const dirtyFileClass = 'dirty-file';\n\n    // Disabling the button at the start\n    $commitButton.prop('disabled', true);\n\n    // Registering a custom listener for the file path and the file content\n    $editForm.areYouSure({\n        silent: true,\n        dirtyClass: dirtyFileClass,\n        fieldSelector: ':input:not(.commit-form-wrapper :input)',\n        change: function () {\n            const dirty = $(this).hasClass(dirtyFileClass);\n            $commitButton.prop('disabled', !dirty);\n        }\n    });\n\n    $commitButton.click(function (event) {\n        // A modal which asks if an empty file should be committed\n        if ($editArea.val().length === 0) {\n            $('#edit-empty-content-modal').modal({\n                onApprove: function () {\n                    $('.edit.form').submit();\n                }\n            }).modal('show');\n            event.preventDefault();\n        }\n    });\n}\n\nfunction initOrganization() {\n    if ($('.organization').length == 0) {\n        return;\n    }\n\n    // Options\n    if ($('.organization.settings.options').length > 0) {\n        $('#org_name').keyup(function () {\n            const $prompt = $('#org-name-change-prompt');\n            if ($(this).val().toString().toLowerCase() != $(this).data('org-name').toString().toLowerCase()) {\n                $prompt.show();\n            } else {\n                $prompt.hide();\n            }\n        });\n    }\n}\n\nfunction initUserSettings() {\n    // Options\n    if ($('.user.settings.profile').length > 0) {\n        $('#username').keyup(function () {\n            const $prompt = $('#name-change-prompt');\n            if ($(this).val().toString().toLowerCase() != $(this).data('name').toString().toLowerCase()) {\n                $prompt.show();\n            } else {\n                $prompt.hide();\n            }\n        });\n    }\n}\n\nfunction initWebhook() {\n    if ($('.new.webhook').length == 0) {\n        return;\n    }\n\n    $('.events.checkbox input').change(function () {\n        if ($(this).is(':checked')) {\n            $('.events.fields').show();\n        }\n    });\n    $('.non-events.checkbox input').change(function () {\n        if ($(this).is(':checked')) {\n            $('.events.fields').hide();\n        }\n    });\n\n    const updateContentType = function () {\n        const visible = $('#http_method').val() === 'POST';\n        $('#content_type').parent().parent()[visible ? 'show' : 'hide']();\n    };\n    updateContentType();\n    $('#http_method').change(function () {\n        updateContentType();\n    });\n\n    // Test delivery\n    $('#test-delivery').click(function () {\n        const $this = $(this);\n        $this.addClass('loading disabled');\n        $.post($this.data('link'), {\n            \"_csrf\": csrf\n        }).done(\n            setTimeout(function () {\n                window.location.href = $this.data('redirect');\n            }, 5000)\n        )\n    });\n}\n\nfunction initAdmin() {\n    if ($('.admin').length == 0) {\n        return;\n    }\n\n    // New user\n    if ($('.admin.new.user').length > 0 ||\n        $('.admin.edit.user').length > 0) {\n        $('#login_type').change(function () {\n            if ($(this).val().substring(0, 1) == '0') {\n                $('#login_name').removeAttr('required');\n                $('.non-local').hide();\n                $('.local').show();\n                $('#user_name').focus();\n\n                if ($(this).data('password') == \"required\") {\n                    $('#password').attr('required', 'required');\n                }\n\n            } else {\n                $('#login_name').attr('required', 'required');\n                $('.non-local').show();\n                $('.local').hide();\n                $('#login_name').focus();\n\n                $('#password').removeAttr('required');\n            }\n        });\n    }\n\n    function onSecurityProtocolChange() {\n        if ($('#security_protocol').val() > 0) {\n            $('.has-tls').show();\n        } else {\n            $('.has-tls').hide();\n        }\n    }\n\n    function onUsePagedSearchChange() {\n        if ($('#use_paged_search').prop('checked')) {\n            $('.search-page-size').show()\n                .find('input').attr('required', 'required');\n        } else {\n            $('.search-page-size').hide()\n                .find('input').removeAttr('required');\n        }\n    }\n\n    function onOAuth2Change() {\n        $('.open_id_connect_auto_discovery_url, .oauth2_use_custom_url').hide();\n        $('.open_id_connect_auto_discovery_url input[required]').removeAttr('required');\n\n        const provider = $('#oauth2_provider').val();\n        switch (provider) {\n            case 'github':\n            case 'gitlab':\n            case 'gitea':\n                $('.oauth2_use_custom_url').show();\n                break;\n            case 'openidConnect':\n                $('.open_id_connect_auto_discovery_url input').attr('required', 'required');\n                $('.open_id_connect_auto_discovery_url').show();\n                break;\n        }\n        onOAuth2UseCustomURLChange();\n    }\n\n    function onOAuth2UseCustomURLChange() {\n        const provider = $('#oauth2_provider').val();\n        $('.oauth2_use_custom_url_field').hide();\n        $('.oauth2_use_custom_url_field input[required]').removeAttr('required');\n\n        if ($('#oauth2_use_custom_url').is(':checked')) {\n            if (!$('#oauth2_token_url').val()) {\n                $('#oauth2_token_url').val($('#' + provider + '_token_url').val());\n            }\n            if (!$('#oauth2_auth_url').val()) {\n                $('#oauth2_auth_url').val($('#' + provider + '_auth_url').val());\n            }\n            if (!$('#oauth2_profile_url').val()) {\n                $('#oauth2_profile_url').val($('#' + provider + '_profile_url').val());\n            }\n            if (!$('#oauth2_email_url').val()) {\n                $('#oauth2_email_url').val($('#' + provider + '_email_url').val());\n            }\n            switch (provider) {\n                case 'github':\n                    $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input, .oauth2_email_url input').attr('required', 'required');\n                    $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url, .oauth2_email_url').show();\n                    break;\n                case 'gitea':\n                case 'gitlab':\n                    $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input').attr('required', 'required');\n                    $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url').show();\n                    $('#oauth2_email_url').val('');\n                    break;\n            }\n        }\n    }\n\n    // New authentication\n    if ($('.admin.new.authentication').length > 0) {\n        $('#auth_type').change(function () {\n            $('.ldap, .dldap, .smtp, .pam, .oauth2, .has-tls .search-page-size').hide();\n\n            $('.ldap input[required], .binddnrequired input[required], .dldap input[required], .smtp input[required], .pam input[required], .oauth2 input[required], .has-tls input[required]').removeAttr('required');\n            $('.binddnrequired').removeClass(\"required\");\n\n            const authType = $(this).val();\n            switch (authType) {\n                case '2':     // LDAP\n                    $('.ldap').show();\n                    $('.binddnrequired input, .ldap div.required:not(.dldap) input').attr('required', 'required');\n                    $('.binddnrequired').addClass(\"required\");\n                    break;\n                case '3':     // SMTP\n                    $('.smtp').show();\n                    $('.has-tls').show();\n                    $('.smtp div.required input, .has-tls').attr('required', 'required');\n                    break;\n                case '4':     // PAM\n                    $('.pam').show();\n                    $('.pam input').attr('required', 'required');\n                    break;\n                case '5':     // LDAP\n                    $('.dldap').show();\n                    $('.dldap div.required:not(.ldap) input').attr('required', 'required');\n                    break;\n                case '6':     // OAuth2\n                    $('.oauth2').show();\n                    $('.oauth2 div.required:not(.oauth2_use_custom_url,.oauth2_use_custom_url_field,.open_id_connect_auto_discovery_url) input').attr('required', 'required');\n                    onOAuth2Change();\n                    break;\n            }\n            if (authType == '2' || authType == '5') {\n                onSecurityProtocolChange()\n            }\n            if (authType == '2') {\n                onUsePagedSearchChange();\n            }\n        });\n        $('#auth_type').change();\n        $('#security_protocol').change(onSecurityProtocolChange);\n        $('#use_paged_search').change(onUsePagedSearchChange);\n        $('#oauth2_provider').change(onOAuth2Change);\n        $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n    }\n    // Edit authentication\n    if ($('.admin.edit.authentication').length > 0) {\n        const authType = $('#auth_type').val();\n        if (authType == '2' || authType == '5') {\n            $('#security_protocol').change(onSecurityProtocolChange);\n            if (authType == '2') {\n                $('#use_paged_search').change(onUsePagedSearchChange);\n            }\n        } else if (authType == '6') {\n            $('#oauth2_provider').change(onOAuth2Change);\n            $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n            onOAuth2Change();\n        }\n    }\n\n    // Notice\n    if ($('.admin.notice')) {\n        const $detailModal = $('#detail-modal');\n\n        // Attach view detail modals\n        $('.view-detail').click(function () {\n            $detailModal.find('.content p').text($(this).data('content'));\n            $detailModal.modal('show');\n            return false;\n        });\n\n        // Select actions\n        const $checkboxes = $('.select.table .ui.checkbox');\n        $('.select.action').click(function () {\n            switch ($(this).data('action')) {\n                case 'select-all':\n                    $checkboxes.checkbox('check');\n                    break;\n                case 'deselect-all':\n                    $checkboxes.checkbox('uncheck');\n                    break;\n                case 'inverse':\n                    $checkboxes.checkbox('toggle');\n                    break;\n            }\n        });\n        $('#delete-selection').click(function () {\n            const $this = $(this);\n            $this.addClass(\"loading disabled\");\n            const ids = [];\n            $checkboxes.each(function () {\n                if ($(this).checkbox('is checked')) {\n                    ids.push($(this).data('id'));\n                }\n            });\n            $.post($this.data('link'), {\n                \"_csrf\": csrf,\n                \"ids\": ids\n            }).done(function () {\n                window.location.href = $this.data('redirect');\n            });\n        });\n    }\n}\n\nfunction buttonsClickOnEnter() {\n    $('.ui.button').keypress(function (e) {\n        if (e.keyCode == 13 || e.keyCode == 32) // enter key or space bar\n            $(this).click();\n    });\n}\n\nfunction searchUsers() {\n    const $searchUserBox = $('#search-user-box');\n    $searchUserBox.search({\n        minCharacters: 2,\n        apiSettings: {\n            url: suburl + '/api/v1/users/search?q={query}',\n            onResponse: function(response) {\n                const items = [];\n                $.each(response.data, function (_i, item) {\n                    let title = item.login;\n                    if (item.full_name && item.full_name.length > 0) {\n                        title += ' (' + htmlEncode(item.full_name) + ')';\n                    }\n                    items.push({\n                        title: title,\n                        image: item.avatar_url\n                    })\n                });\n\n                return { results: items }\n            }\n        },\n        searchFields: ['login', 'full_name'],\n        showNoResults: false\n    });\n}\n\nfunction searchTeams() {\n    const $searchTeamBox = $('#search-team-box');\n    $searchTeamBox.search({\n        minCharacters: 2,\n        apiSettings: {\n            url: suburl + '/api/v1/orgs/' + $searchTeamBox.data('org') + '/teams/search?q={query}',\n            headers: {\"X-Csrf-Token\": csrf},\n            onResponse: function(response) {\n                const items = [];\n                $.each(response.data, function (_i, item) {\n                    const title = item.name + ' (' + item.permission + ' access)';\n                    items.push({\n                        title: title,\n                    })\n                });\n\n                return { results: items }\n            }\n        },\n        searchFields: ['name', 'description'],\n        showNoResults: false\n    });\n}\n\nfunction searchRepositories() {\n    const $searchRepoBox = $('#search-repo-box');\n    $searchRepoBox.search({\n        minCharacters: 2,\n        apiSettings: {\n            url: suburl + '/api/v1/repos/search?q={query}&uid=' + $searchRepoBox.data('uid'),\n            onResponse: function(response) {\n                const items = [];\n                $.each(response.data, function (_i, item) {\n                    items.push({\n                        title: item.full_name.split(\"/\")[1],\n                        description: item.full_name\n                    })\n                });\n\n                return { results: items }\n            }\n        },\n        searchFields: ['full_name'],\n        showNoResults: false\n    });\n}\n\nfunction initCodeView() {\n    if ($('.code-view .linenums').length > 0) {\n        $(document).on('click', '.lines-num span', function (e) {\n            const $select = $(this);\n            const $list = $select.parent().siblings('.lines-code').find('ol.linenums > li');\n            selectRange($list, $list.filter('[rel=' + $select.attr('id') + ']'), (e.shiftKey ? $list.filter('.active').eq(0) : null));\n            deSelect();\n        });\n\n        $(window).on('hashchange', function () {\n            let m = window.location.hash.match(/^#(L\\d+)-(L\\d+)$/);\n            const $list = $('.code-view ol.linenums > li');\n            let $first;\n            if (m) {\n                $first = $list.filter('.' + m[1]);\n                selectRange($list, $first, $list.filter('.' + m[2]));\n                $(\"html, body\").scrollTop($first.offset().top - 200);\n                return;\n            }\n            m = window.location.hash.match(/^#(L|n)(\\d+)$/);\n            if (m) {\n                $first = $list.filter('.L' + m[2]);\n                selectRange($list, $first);\n                $(\"html, body\").scrollTop($first.offset().top - 200);\n            }\n        }).trigger('hashchange');\n    }\n}\n\nfunction initU2FAuth() {\n    if($('#wait-for-key').length === 0) {\n        return\n    }\n    u2fApi.ensureSupport()\n        .then(function () {\n            $.getJSON(suburl + '/user/u2f/challenge').success(function(req) {\n                u2fApi.sign(req.appId, req.challenge, req.registeredKeys, 30)\n                    .then(u2fSigned)\n                    .catch(function (err) {\n                        if(err === undefined) {\n                            u2fError(1);\n                            return\n                        }\n                        u2fError(err.metaData.code);\n                    });\n            });\n        }).catch(function () {\n            // Fallback in case browser do not support U2F\n            window.location.href = suburl + \"/user/two_factor\"\n        })\n}\nfunction u2fSigned(resp) {\n    $.ajax({\n        url: suburl + '/user/u2f/sign',\n        type: \"POST\",\n        headers: {\"X-Csrf-Token\": csrf},\n        data: JSON.stringify(resp),\n        contentType: \"application/json; charset=utf-8\",\n    }).done(function(res){\n        window.location.replace(res);\n    }).fail(function () {\n        u2fError(1);\n    });\n}\n\nfunction u2fRegistered(resp) {\n    if (checkError(resp)) {\n        return;\n    }\n    $.ajax({\n        url: suburl + '/user/settings/security/u2f/register',\n        type: \"POST\",\n        headers: {\"X-Csrf-Token\": csrf},\n        data: JSON.stringify(resp),\n        contentType: \"application/json; charset=utf-8\",\n        success: function(){\n            reload();\n        },\n        fail: function () {\n            u2fError(1);\n        }\n    });\n}\n\nfunction checkError(resp) {\n    if (!('errorCode' in resp)) {\n        return false;\n    }\n    if (resp.errorCode === 0) {\n        return false;\n    }\n    u2fError(resp.errorCode);\n    return true;\n}\n\n\nfunction u2fError(errorType) {\n    const u2fErrors = {\n        'browser': $('#unsupported-browser'),\n        1: $('#u2f-error-1'),\n        2: $('#u2f-error-2'),\n        3: $('#u2f-error-3'),\n        4: $('#u2f-error-4'),\n        5: $('.u2f-error-5')\n    };\n    u2fErrors[errorType].removeClass('hide');\n    for(const type in u2fErrors){\n        if(type != errorType){\n            u2fErrors[type].addClass('hide');\n        }\n    }\n    $('#u2f-error').modal('show');\n}\n\nfunction initU2FRegister() {\n    $('#register-device').modal({allowMultiple: false});\n    $('#u2f-error').modal({allowMultiple: false});\n    $('#register-security-key').on('click', function(e) {\n        e.preventDefault();\n        u2fApi.ensureSupport()\n            .then(u2fRegisterRequest)\n            .catch(function() {\n                u2fError('browser');\n            })\n    })\n}\n\nfunction u2fRegisterRequest() {\n    $.post(suburl + \"/user/settings/security/u2f/request_register\", {\n        \"_csrf\": csrf,\n        \"name\": $('#nickname').val()\n    }).success(function(req) {\n        $(\"#nickname\").closest(\"div.field\").removeClass(\"error\");\n        $('#register-device').modal('show');\n        if(req.registeredKeys === null) {\n            req.registeredKeys = []\n        }\n        u2fApi.register(req.appId, req.registerRequests, req.registeredKeys, 30)\n            .then(u2fRegistered)\n            .catch(function (reason) {\n                if(reason === undefined) {\n                    u2fError(1);\n                    return\n                }\n                u2fError(reason.metaData.code);\n            });\n    }).fail(function(xhr) {\n        if(xhr.status === 409) {\n            $(\"#nickname\").closest(\"div.field\").addClass(\"error\");\n        }\n    });\n}\n\nfunction initWipTitle() {\n    $(\".title_wip_desc > a\").click(function (e) {\n        e.preventDefault();\n\n        const $issueTitle = $(\"#issue_title\");\n        $issueTitle.focus();\n        const value = $issueTitle.val().trim().toUpperCase();\n\n        for (const i in wipPrefixes) {\n            if (value.startsWith(wipPrefixes[i].toUpperCase())) {\n                return;\n            }\n        }\n\n        $issueTitle.val(wipPrefixes[0] + \" \" + $issueTitle.val());\n    });\n}\n\nfunction initTemplateSearch() {\n    const $repoTemplate = $(\"#repo_template\");\n    const checkTemplate = function() {\n        const $templateUnits = $(\"#template_units\");\n        const $nonTemplate = $(\"#non_template\");\n        if ($repoTemplate.val() !== \"\") {\n            $templateUnits.show();\n            $nonTemplate.hide();\n        } else {\n            $templateUnits.hide();\n            $nonTemplate.show();\n        }\n    };\n    $repoTemplate.change(checkTemplate);\n    checkTemplate();\n\n    const changeOwner = function() {\n        $(\"#repo_template_search\")\n            .dropdown({\n                apiSettings: {\n                    url: suburl + '/api/v1/repos/search?q={query}&template=true&priority_owner_id=' + $(\"#uid\").val(),\n                    onResponse: function(response) {\n                        const filteredResponse = {'success': true, 'results': []};\n                        filteredResponse.results.push({\n                            'name': '',\n                            'value': ''\n                        });\n                        // Parse the response from the api to work with our dropdown\n                        $.each(response.data, function(_r, repo) {\n                            filteredResponse.results.push({\n                                'name'  : htmlEncode(repo.full_name) ,\n                                'value' : repo.id\n                            });\n                        });\n                        return filteredResponse;\n                    },\n                    cache: false,\n                },\n\n                fullTextSearch: true\n            });\n    };\n    $(\"#uid\").change(changeOwner);\n    changeOwner();\n}\n\n$(document).ready(function () {\n    csrf = $('meta[name=_csrf]').attr(\"content\");\n    suburl = $('meta[name=_suburl]').attr(\"content\");\n\n    // Show exact time\n    $('.time-since').each(function () {\n        $(this).addClass('poping up').attr('data-content', $(this).attr('title')).attr('data-variation', 'inverted tiny').attr('title', '');\n    });\n\n    // Semantic UI modules.\n    $('.dropdown:not(.custom)').dropdown();\n    $('.jump.dropdown').dropdown({\n        action: 'hide',\n        onShow: function () {\n            $('.poping.up').popup('hide');\n        }\n    });\n    $('.slide.up.dropdown').dropdown({\n        transition: 'slide up'\n    });\n    $('.upward.dropdown').dropdown({\n        direction: 'upward'\n    });\n    $('.ui.accordion').accordion();\n    $('.ui.checkbox').checkbox();\n    $('.ui.progress').progress({\n        showActivity: false\n    });\n    $('.poping.up').popup();\n    $('.top.menu .poping.up').popup({\n        onShow: function () {\n            if ($('.top.menu .menu.transition').hasClass('visible')) {\n                return false;\n            }\n        }\n    });\n    $('.tabular.menu .item').tab();\n    $('.tabable.menu .item').tab();\n\n    $('.toggle.button').click(function () {\n        $($(this).data('target')).slideToggle(100);\n    });\n\n    // make table <tr> element clickable like a link\n    $('tr[data-href]').click(function() {\n        window.location = $(this).data('href');\n    });\n\n    // Highlight JS\n    if (typeof hljs != 'undefined') {\n        const nodes = [].slice.call(document.querySelectorAll('pre code') || []);\n        for (let i = 0; i < nodes.length; i++) {\n            hljs.highlightBlock(nodes[i]);\n        }\n    }\n\n    // Dropzone\n    const $dropzone = $('#dropzone');\n    if ($dropzone.length > 0) {\n        const filenameDict = {};\n\n        new Dropzone(\"#dropzone\", {\n            url: $dropzone.data('upload-url'),\n            headers: {\"X-Csrf-Token\": csrf},\n            maxFiles: $dropzone.data('max-file'),\n            maxFilesize: $dropzone.data('max-size'),\n            acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n            addRemoveLinks: true,\n            dictDefaultMessage: $dropzone.data('default-message'),\n            dictInvalidFileType: $dropzone.data('invalid-input-type'),\n            dictFileTooBig: $dropzone.data('file-too-big'),\n            dictRemoveFile: $dropzone.data('remove-file'),\n            init: function () {\n                this.on(\"success\", function (file, data) {\n                    filenameDict[file.name] = data.uuid;\n                    const input = $('<input id=\"' + data.uuid + '\" name=\"files\" type=\"hidden\">').val(data.uuid);\n                    $('.files').append(input);\n                });\n                this.on(\"removedfile\", function (file) {\n                    if (file.name in filenameDict) {\n                        $('#' + filenameDict[file.name]).remove();\n                    }\n                    if ($dropzone.data('remove-url') && $dropzone.data('csrf')) {\n                        $.post($dropzone.data('remove-url'), {\n                            file: filenameDict[file.name],\n                            _csrf: $dropzone.data('csrf')\n                        });\n                    }\n                })\n            },\n        });\n    }\n\n    // Emojify\n    emojify.setConfig({\n        img_dir: suburl + '/vendor/plugins/emojify/images',\n        ignore_emoticons: true\n    });\n    const hasEmoji = document.getElementsByClassName('has-emoji');\n    for (let i = 0; i < hasEmoji.length; i++) {\n        emojify.run(hasEmoji[i]);\n        for (let j = 0; j < hasEmoji[i].childNodes.length; j++) {\n            if (hasEmoji[i].childNodes[j].nodeName === \"A\") {\n                emojify.run(hasEmoji[i].childNodes[j])\n            }\n        }\n    }\n\n    // Clipboard JS\n    const clipboard = new Clipboard('.clipboard');\n    clipboard.on('success', function (e) {\n        e.clearSelection();\n\n        $('#' + e.trigger.getAttribute('id')).popup('destroy');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-success'))\n        $('#' + e.trigger.getAttribute('id')).popup('show');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'))\n    });\n\n    clipboard.on('error', function (e) {\n        $('#' + e.trigger.getAttribute('id')).popup('destroy');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-error'))\n        $('#' + e.trigger.getAttribute('id')).popup('show');\n        e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'))\n    });\n\n    // Helpers.\n    $('.delete-button').click(showDeletePopup);\n    $('.add-all-button').click(showAddAllPopup);\n\n    $('.delete-branch-button').click(showDeletePopup);\n\n    $('.undo-button').click(function() {\n        const $this = $(this);\n        $.post($this.data('url'), {\n            \"_csrf\": csrf,\n            \"id\": $this.data(\"id\")\n        }).done(function(data) {\n            window.location.href = data.redirect;\n        });\n    });\n    $('.show-panel.button').click(function () {\n        $($(this).data('panel')).show();\n    });\n    $('.show-modal.button').click(function () {\n        $($(this).data('modal')).modal('show');\n    });\n    $('.delete-post.button').click(function () {\n        const $this = $(this);\n        $.post($this.data('request-url'), {\n            \"_csrf\": csrf\n        }).done(function () {\n            window.location.href = $this.data('done-url');\n        });\n    });\n\n    // Set anchor.\n    $('.markdown').each(function () {\n        const headers = {};\n        $(this).find('h1, h2, h3, h4, h5, h6').each(function () {\n            let node = $(this);\n            const val = encodeURIComponent(node.text().toLowerCase().replace(/[^\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w\\- ]/g, '').replace(/[ ]/g, '-'));\n            let name = val;\n            if (headers[val] > 0) {\n                name = val + '-' + headers[val];\n            }\n            if (headers[val] == undefined) {\n                headers[val] = 1;\n            } else {\n                headers[val] += 1;\n            }\n            node = node.wrap('<div id=\"' + name + '\" class=\"anchor-wrap\" ></div>');\n            node.append('<a class=\"anchor\" href=\"#' + name + '\"><span class=\"octicon octicon-link\"></span></a>');\n        });\n    });\n\n    $('.issue-checkbox').click(function() {\n        const numChecked = $('.issue-checkbox').children('input:checked').length;\n        if (numChecked > 0) {\n            $('#issue-filters').addClass(\"hide\");\n            $('#issue-actions').removeClass(\"hide\");\n        } else {\n            $('#issue-filters').removeClass(\"hide\");\n            $('#issue-actions').addClass(\"hide\");\n        }\n    });\n\n    $('.issue-action').click(function () {\n        let action = this.dataset.action;\n        let elementId = this.dataset.elementId;\n        const issueIDs = $('.issue-checkbox').children('input:checked').map(function() {\n            return this.dataset.issueId;\n        }).get().join();\n        const url = this.dataset.url;\n        if (elementId === '0' && url.substr(-9) === '/assignee'){\n            elementId = '';\n            action = 'clear';\n        }\n        updateIssuesMeta(url, action, issueIDs, elementId).then(function() {\n            // NOTICE: This reset of checkbox state targets Firefox caching behaviour, as the checkboxes stay checked after reload\n            if (action === \"close\" || action === \"open\" ){\n                //uncheck all checkboxes\n                $('.issue-checkbox input[type=\"checkbox\"]').each(function(_,e){ e.checked = false; });\n            }\n            reload();\n        });\n    });\n\n    // NOTICE: This event trigger targets Firefox caching behaviour, as the checkboxes stay checked after reload\n    // trigger ckecked event, if checkboxes are checked on load\n    $('.issue-checkbox input[type=\"checkbox\"]:checked').first().each(function(_,e) {\n        e.checked = false;\n        $(e).click();\n    });\n\n    buttonsClickOnEnter();\n    searchUsers();\n    searchTeams();\n    searchRepositories();\n\n    initCommentForm();\n    initInstall();\n    initRepository();\n    initMigration();\n    initWikiForm();\n    initEditForm();\n    initEditor();\n    initOrganization();\n    initWebhook();\n    initAdmin();\n    initCodeView();\n    initVueApp();\n    initTeamSettings();\n    initCtrlEnterSubmit();\n    initNavbarContentToggle();\n    initTopicbar();\n    initU2FAuth();\n    initU2FRegister();\n    initIssueList();\n    initWipTitle();\n    initPullRequestReview();\n    initRepoStatusChecker();\n    initTemplateSearch();\n\n    // Repo clone url.\n    if ($('#repo-clone-url').length > 0) {\n        switch (localStorage.getItem('repo-clone-protocol')) {\n            case 'ssh':\n                if ($('#repo-clone-ssh').click().length === 0) {\n                    $('#repo-clone-https').click();\n                }\n                break;\n            default:\n                $('#repo-clone-https').click();\n                break;\n        }\n    }\n\n    const routes = {\n        'div.user.settings': initUserSettings,\n        'div.repository.settings.collaboration': initRepositoryCollaboration\n    };\n\n    let selector;\n    for (selector in routes) {\n        if ($(selector).length > 0) {\n            routes[selector]();\n            break;\n        }\n    }\n\n    const $cloneAddr = $('#clone_addr');\n    $cloneAddr.change(function() {\n        const $repoName = $('#repo_name');\n        if ($cloneAddr.val().length > 0 && $repoName.val().length === 0) { // Only modify if repo_name input is blank\n            $repoName.val($cloneAddr.val().match(/^(.*\\/)?((.+?)(\\.git)?)$/)[3]);\n        }\n    });\n});\n\nfunction changeHash(hash) {\n    if (history.pushState) {\n        history.pushState(null, null, hash);\n    }\n    else {\n        location.hash = hash;\n    }\n}\n\nfunction deSelect() {\n    if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n    } else {\n        document.selection.empty();\n    }\n}\n\nfunction selectRange($list, $select, $from) {\n    $list.removeClass('active');\n    if ($from) {\n        let a = parseInt($select.attr('rel').substr(1));\n        let b = parseInt($from.attr('rel').substr(1));\n        let c;\n        if (a != b) {\n            if (a > b) {\n                c = a;\n                a = b;\n                b = c;\n            }\n            const classes = [];\n            for (let i = a; i <= b; i++) {\n                classes.push('.L' + i);\n            }\n            $list.filter(classes.join(',')).addClass('active');\n            changeHash('#L' + a + '-' + 'L' + b);\n            return\n        }\n    }\n    $select.addClass('active');\n    changeHash('#' + $select.attr('rel'));\n}\n\n$(function () {\n    // Warn users that try to leave a page after entering data into a form.\n    // Except on sign-in pages, and for forms marked as 'ignore-dirty'.\n    if ($('.user.signin').length === 0) {\n      $('form:not(.ignore-dirty)').areYouSure();\n    }\n\n    // Parse SSH Key\n    $(\"#ssh-key-content\").on('change paste keyup',function(){\n        const arrays = $(this).val().split(\" \");\n        const $title = $(\"#ssh-key-title\")\n        if ($title.val() === \"\" && arrays.length === 3 && arrays[2] !== \"\") {\n            $title.val(arrays[2]);\n        }\n    });\n});\n\nfunction showDeletePopup() {\n    const $this = $(this);\n    let filter = \"\";\n    if ($this.attr(\"id\")) {\n        filter += \"#\" + $this.attr(\"id\")\n    }\n\n    const dialog = $('.delete.modal' + filter);\n    dialog.find('.name').text($this.data('name'));\n\n    dialog.modal({\n        closable: false,\n        onApprove: function() {\n            if ($this.data('type') == \"form\") {\n                $($this.data('form')).submit();\n                return;\n            }\n\n            $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"id\": $this.data(\"id\")\n            }).done(function(data) {\n                window.location.href = data.redirect;\n            });\n        }\n    }).modal('show');\n    return false;\n}\n\nfunction showAddAllPopup() {\n    const $this = $(this);\n    let filter = \"\";\n    if ($this.attr(\"id\")) {\n        filter += \"#\" + $this.attr(\"id\")\n    }\n\n    const dialog = $('.addall.modal' + filter);\n    dialog.find('.name').text($this.data('name'));\n\n    dialog.modal({\n        closable: false,\n        onApprove: function() {\n            if ($this.data('type') == \"form\") {\n                $($this.data('form')).submit();\n                return;\n            }\n\n            $.post($this.data('url'), {\n                \"_csrf\": csrf,\n                \"id\": $this.data(\"id\")\n            }).done(function(data) {\n                window.location.href = data.redirect;\n            });\n        }\n    }).modal('show');\n    return false;\n}\n\nfunction initVueComponents(){\n    const vueDelimeters = ['${', '}'];\n\n    Vue.component('repo-search', {\n        delimiters: vueDelimeters,\n\n        props: {\n            searchLimit: {\n                type: Number,\n                default: 10\n            },\n            suburl: {\n                type: String,\n                required: true\n            },\n            uid: {\n                type: Number,\n                required: true\n            },\n            organizations: {\n                type: Array,\n                default: []\n            },\n            isOrganization: {\n                type: Boolean,\n                default: true\n            },\n            canCreateOrganization: {\n                type: Boolean,\n                default: false\n            },\n            organizationsTotalCount: {\n                type: Number,\n                default: 0\n            },\n            moreReposLink: {\n                type: String,\n                default: ''\n            }\n        },\n\n        data: function() {\n            return {\n                tab: 'repos',\n                repos: [],\n                reposTotalCount: 0,\n                reposFilter: 'all',\n                searchQuery: '',\n                isLoading: false,\n                repoTypes: {\n                    'all': {\n                        count: 0,\n                        searchMode: '',\n                    },\n                    'forks': {\n                        count: 0,\n                        searchMode: 'fork',\n                    },\n                    'mirrors': {\n                        count: 0,\n                        searchMode: 'mirror',\n                    },\n                    'sources': {\n                        count: 0,\n                        searchMode: 'source',\n                    },\n                    'collaborative': {\n                        count: 0,\n                        searchMode: 'collaborative',\n                    },\n                }\n            }\n        },\n\n        computed: {\n            showMoreReposLink: function() {\n                return this.repos.length > 0 && this.repos.length < this.repoTypes[this.reposFilter].count;\n            },\n            searchURL: function() {\n                return this.suburl + '/api/v1/repos/search?sort=updated&order=desc&uid=' + this.uid + '&q=' + this.searchQuery\n                                   + '&limit=' + this.searchLimit + '&mode=' + this.repoTypes[this.reposFilter].searchMode\n                                   + (this.reposFilter !== 'all' ? '&exclusive=1' : '');\n            },\n            repoTypeCount: function() {\n                return this.repoTypes[this.reposFilter].count;\n            }\n        },\n\n        mounted: function() {\n            this.searchRepos(this.reposFilter);\n\n            const self = this;\n            Vue.nextTick(function() {\n                self.$refs.search.focus();\n            });\n        },\n\n        methods: {\n            changeTab: function(t) {\n                this.tab = t;\n            },\n\n            changeReposFilter: function(filter) {\n                this.reposFilter = filter;\n                this.repos = [];\n                this.repoTypes[filter].count = 0;\n                this.searchRepos(filter);\n            },\n\n            showRepo: function(repo, filter) {\n                switch (filter) {\n                    case 'sources':\n                        return repo.owner.id == this.uid && !repo.mirror && !repo.fork;\n                    case 'forks':\n                        return repo.owner.id == this.uid && !repo.mirror && repo.fork;\n                    case 'mirrors':\n                        return repo.mirror;\n                    case 'collaborative':\n                        return repo.owner.id != this.uid && !repo.mirror;\n                    default:\n                        return true;\n                }\n            },\n\n            searchRepos: function(reposFilter) {\n                const self = this;\n\n                this.isLoading = true;\n\n                const searchedMode = this.repoTypes[reposFilter].searchMode;\n                const searchedURL = this.searchURL;\n                const searchedQuery = this.searchQuery;\n\n                $.getJSON(searchedURL, function(result, _textStatus, request) {\n                    if (searchedURL == self.searchURL) {\n                        self.repos = result.data;\n                        const count = request.getResponseHeader('X-Total-Count');\n                        if (searchedQuery === '' && searchedMode === '') {\n                            self.reposTotalCount = count;\n                        }\n                        self.repoTypes[reposFilter].count = count;\n                    }\n                }).always(function() {\n                    if (searchedURL == self.searchURL) {\n                        self.isLoading = false;\n                    }\n                });\n            },\n\n            repoClass: function(repo) {\n                if (repo.fork) {\n                    return 'octicon octicon-repo-forked';\n                } else if (repo.mirror) {\n                    return 'octicon octicon-repo-clone';\n                } else if (repo.private) {\n                    return 'octicon octicon-lock';\n                } else {\n                    return 'octicon octicon-repo';\n                }\n            }\n        }\n    })\n}\n\nfunction initCtrlEnterSubmit() {\n    $(\".js-quick-submit\").keydown(function(e) {\n        if (((e.ctrlKey && !e.altKey) || e.metaKey) && (e.keyCode == 13 || e.keyCode == 10)) {\n            $(this).closest(\"form\").submit();\n        }\n    });\n}\n\nfunction initVueApp() {\n    const el = document.getElementById('app');\n    if (!el) {\n        return;\n    }\n\n    initVueComponents();\n\n    new Vue({\n        delimiters: ['${', '}'],\n        el: el,\n\n        data: {\n            searchLimit: document.querySelector('meta[name=_search_limit]').content,\n            suburl: document.querySelector('meta[name=_suburl]').content,\n            uid: document.querySelector('meta[name=_context_uid]').content,\n        },\n    });\n}\n\nwindow.timeAddManual = function() {\n    $('.mini.modal')\n        .modal({\n            duration: 200,\n            onApprove: function() {\n                $('#add_time_manual_form').submit();\n            }\n        }).modal('show')\n    ;\n}\n\nwindow.toggleStopwatch = function() {\n    $(\"#toggle_stopwatch_form\").submit();\n}\nwindow.cancelStopwatch = function() {\n    $(\"#cancel_stopwatch_form\").submit();\n}\n\nwindow.initHeatmap = function(appElementId, heatmapUser, locale) {\n    const el = document.getElementById(appElementId);\n    if (!el) {\n        return;\n    }\n\n    locale = locale || {};\n\n    locale.contributions = locale.contributions || 'contributions';\n    locale.no_contributions = locale.no_contributions || 'No contributions';\n\n    const vueDelimeters = ['${', '}'];\n\n    Vue.component('activity-heatmap', {\n        delimiters: vueDelimeters,\n\n        props: {\n            user: {\n                type: String,\n                required: true\n            },\n            suburl: {\n                type: String,\n                required: true\n            },\n            locale: {\n                type: Object,\n                required: true\n            }\n        },\n\n        data: function () {\n            return {\n                isLoading: true,\n                colorRange: [],\n                endDate: null,\n                values: [],\n                totalContributions: 0,\n            };\n        },\n\n        mounted: function() {\n            this.colorRange = [\n                this.getColor(0),\n                this.getColor(1),\n                this.getColor(2),\n                this.getColor(3),\n                this.getColor(4),\n                this.getColor(5)\n            ];\n            this.endDate = new Date();\n            this.loadHeatmap(this.user);\n        },\n\n        methods: {\n            loadHeatmap: function(userName) {\n                const self = this;\n                $.get(this.suburl + '/api/v1/users/' + userName + '/heatmap', function(chartRawData) {\n                    const chartData = [];\n                    for (let i = 0; i < chartRawData.length; i++) {\n                        self.totalContributions += chartRawData[i].contributions;\n                        chartData[i] = { date: new Date(chartRawData[i].timestamp * 1000), count: chartRawData[i].contributions };\n                    }\n                    self.values = chartData;\n                    self.isLoading = false;\n                });\n            },\n\n            getColor: function(idx) {\n                const el = document.createElement('div');\n                el.className = 'heatmap-color-' + idx;\n                document.body.appendChild(el);\n\n                const color = getComputedStyle(el).backgroundColor;\n\n                document.body.removeChild(el);\n\n                return color;\n            }\n        },\n\n        template: '<div><div v-show=\"isLoading\"><slot name=\"loading\"></slot></div><h4 class=\"total-contributions\" v-if=\"!isLoading\"><span v-html=\"totalContributions\"></span> total contributions in the last 12 months</h4><calendar-heatmap v-show=\"!isLoading\" :locale=\"locale\" :no-data-text=\"locale.no_contributions\" :tooltip-unit=\"locale.contributions\" :end-date=\"endDate\" :values=\"values\" :range-color=\"colorRange\" />'\n    });\n\n    new Vue({\n        delimiters: vueDelimeters,\n        el: el,\n\n        data: {\n            suburl: document.querySelector('meta[name=_suburl]').content,\n            heatmapUser: heatmapUser,\n            locale: locale\n        },\n    });\n}\n\nfunction initFilterBranchTagDropdown(selector) {\n    $(selector).each(function() {\n        const $dropdown = $(this);\n        const $data = $dropdown.find('.data');\n        const data = {\n            items: [],\n            mode: $data.data('mode'),\n            searchTerm: '',\n            noResults: '',\n            canCreateBranch: false,\n            menuVisible: false,\n            active: 0\n        };\n        $data.find('.item').each(function() {\n            data.items.push({\n                name: $(this).text(),\n                url: $(this).data('url'),\n                branch: $(this).hasClass('branch'),\n                tag: $(this).hasClass('tag'),\n                selected: $(this).hasClass('selected')\n            });\n        });\n        $data.remove();\n        new Vue({\n            delimiters: ['${', '}'],\n            el: this,\n            data: data,\n\n            beforeMount: function () {\n                const vm = this;\n\n                this.noResults = vm.$el.getAttribute('data-no-results');\n                this.canCreateBranch = vm.$el.getAttribute('data-can-create-branch') === 'true';\n\n                document.body.addEventListener('click', function(event) {\n                    if (vm.$el.contains(event.target)) {\n                        return;\n                    }\n                    if (vm.menuVisible) {\n                        Vue.set(vm, 'menuVisible', false);\n                    }\n                });\n            },\n\n            watch: {\n                menuVisible: function(visible) {\n                    if (visible) {\n                        this.focusSearchField();\n                    }\n                }\n            },\n\n            computed: {\n                filteredItems: function() {\n                    const vm = this;\n\n                    const items = vm.items.filter(function (item) {\n                        return ((vm.mode === 'branches' && item.branch)\n                                || (vm.mode === 'tags' && item.tag))\n                            && (!vm.searchTerm\n                                || item.name.toLowerCase().indexOf(vm.searchTerm.toLowerCase()) >= 0);\n                    });\n\n                    vm.active = (items.length === 0 && vm.showCreateNewBranch ? 0 : -1);\n\n                    return items;\n                },\n                showNoResults: function() {\n                    return this.filteredItems.length === 0\n                            && !this.showCreateNewBranch;\n                },\n                showCreateNewBranch: function() {\n                    const vm = this;\n                    if (!this.canCreateBranch || !vm.searchTerm || vm.mode === 'tags') {\n                        return false;\n                    }\n\n                    return vm.items.filter(function (item) {\n                        return item.name.toLowerCase() === vm.searchTerm.toLowerCase()\n                    }).length === 0;\n                }\n            },\n\n            methods: {\n                selectItem: function(item) {\n                    const prev = this.getSelected();\n                    if (prev !== null) {\n                        prev.selected = false;\n                    }\n                    item.selected = true;\n                    window.location.href = item.url;\n                },\n                createNewBranch: function() {\n                    if (!this.showCreateNewBranch) {\n                        return;\n                    }\n                    this.$refs.newBranchForm.submit();\n                },\n                focusSearchField: function() {\n                    const vm = this;\n                    Vue.nextTick(function() {\n                        vm.$refs.searchField.focus();\n                    });\n                },\n                getSelected: function() {\n                    for (let i = 0, j = this.items.length; i < j; ++i) {\n                        if (this.items[i].selected)\n                            return this.items[i];\n                    }\n                    return null;\n                },\n                getSelectedIndexInFiltered: function() {\n                    for (let i = 0, j = this.filteredItems.length; i < j; ++i) {\n                        if (this.filteredItems[i].selected)\n                            return i;\n                    }\n                    return -1;\n                },\n                scrollToActive: function() {\n                    let el = this.$refs['listItem' + this.active];\n                    if (!el || el.length === 0) {\n                        return;\n                    }\n                    if (Array.isArray(el)) {\n                        el = el[0];\n                    }\n\n                    const cont = this.$refs.scrollContainer;\n\n                     if (el.offsetTop < cont.scrollTop) {\n                         cont.scrollTop = el.offsetTop;\n                     }\n                     else if (el.offsetTop + el.clientHeight > cont.scrollTop + cont.clientHeight) {\n                        cont.scrollTop = el.offsetTop + el.clientHeight - cont.clientHeight;\n                    }\n                },\n                keydown: function(event) {\n                    const vm = this;\n                    if (event.keyCode === 40) {\n                        // arrow down\n                        event.preventDefault();\n\n                        if (vm.active === -1) {\n                            vm.active = vm.getSelectedIndexInFiltered();\n                        }\n\n                        if (vm.active + (vm.showCreateNewBranch ? 0 : 1) >= vm.filteredItems.length) {\n                            return;\n                        }\n                        vm.active++;\n                        vm.scrollToActive();\n                    }\n                    if (event.keyCode === 38) {\n                        // arrow up\n                        event.preventDefault();\n\n                         if (vm.active === -1) {\n                            vm.active = vm.getSelectedIndexInFiltered();\n                        }\n\n                         if (vm.active <= 0) {\n                            return;\n                        }\n                        vm.active--;\n                        vm.scrollToActive();\n                    }\n                    if (event.keyCode == 13) {\n                        // enter\n                        event.preventDefault();\n\n                         if (vm.active >= vm.filteredItems.length) {\n                            vm.createNewBranch();\n                        } else if (vm.active >= 0) {\n                            vm.selectItem(vm.filteredItems[vm.active]);\n                        }\n                    }\n                    if (event.keyCode == 27) {\n                        // escape\n                        event.preventDefault();\n                        vm.menuVisible = false;\n                    }\n                }\n            }\n        });\n    });\n}\n\n$(\".commit-button\").click(function(e) {\n    e.preventDefault();\n    $(this).parent().find('.commit-body').toggle();\n});\n\nfunction initNavbarContentToggle() {\n    const content = $('#navbar');\n    const toggle = $('#navbar-expand-toggle');\n    let isExpanded = false;\n    toggle.click(function() {\n        isExpanded = !isExpanded;\n        if (isExpanded) {\n            content.addClass('shown');\n            toggle.addClass('active');\n        }\n        else {\n            content.removeClass('shown');\n            toggle.removeClass('active');\n        }\n    });\n}\n\nfunction initTopicbar() {\n    const mgrBtn = $(\"#manage_topic\");\n    const editDiv = $(\"#topic_edit\");\n    const viewDiv = $(\"#repo-topics\");\n    const saveBtn = $(\"#save_topic\");\n    const topicDropdown = $('#topic_edit .dropdown');\n    const topicForm = $('#topic_edit.ui.form');\n    const topicPrompts = getPrompts();\n\n    mgrBtn.click(function() {\n        viewDiv.hide();\n        editDiv.css('display', ''); // show Semantic UI Grid\n    });\n\n    function getPrompts() {\n        const hidePrompt = $(\"div.hide#validate_prompt\"),\n            prompts = {\n                countPrompt: hidePrompt.children('#count_prompt').text(),\n                formatPrompt: hidePrompt.children('#format_prompt').text()\n            };\n        hidePrompt.remove();\n        return prompts;\n    }\n\n    saveBtn.click(function() {\n        const topics = $(\"input[name=topics]\").val();\n\n        $.post(saveBtn.data('link'), {\n            \"_csrf\": csrf,\n            \"topics\": topics\n        }, function(_data, _textStatus, xhr){\n            if (xhr.responseJSON.status === 'ok') {\n                viewDiv.children(\".topic\").remove();\n                if (topics.length) {\n                    const topicArray = topics.split(\",\");\n\n                    const last = viewDiv.children(\"a\").last();\n                    for (let i=0; i < topicArray.length; i++) {\n                        $('<div class=\"ui small label topic\" style=\"cursor:pointer;\">'+topicArray[i]+'</div>').insertBefore(last)\n                    }\n                }\n                editDiv.css('display', 'none');\n                viewDiv.show();\n            }\n        }).fail(function(xhr){\n            if (xhr.status === 422) {\n                if (xhr.responseJSON.invalidTopics.length > 0) {\n                    topicPrompts.formatPrompt = xhr.responseJSON.message;\n\n                    const invalidTopics = xhr.responseJSON.invalidTopics,\n                        topicLables = topicDropdown.children('a.ui.label');\n\n                    topics.split(',').forEach(function(value, index) {\n                        for (let i=0; i < invalidTopics.length; i++) {\n                            if (invalidTopics[i] === value) {\n                                topicLables.eq(index).removeClass(\"green\").addClass(\"red\");\n                            }\n                        }\n                    });\n                } else {\n                    topicPrompts.countPrompt = xhr.responseJSON.message;\n                }\n            }\n        }).always(function() {\n            topicForm.form('validate form');\n        });\n    });\n\n    topicDropdown.dropdown({\n        allowAdditions: true,\n        forceSelection: false,\n        fields: { name: \"description\", value: \"data-value\" },\n        saveRemoteData: false,\n        label: {\n            transition : 'horizontal flip',\n            duration   : 200,\n            variation  : false,\n            blue : true,\n            basic: true,\n        },\n        className: {\n            label: 'ui small label'\n        },\n        apiSettings: {\n            url: suburl + '/api/v1/topics/search?q={query}',\n            throttle: 500,\n            cache: false,\n            onResponse: function(res) {\n                const formattedResponse = {\n                    success: false,\n                    results: [],\n                };\n                const stripTags = function (text) {\n                    return text.replace(/<[^>]*>?/gm, \"\");\n                };\n\n                const query = stripTags(this.urlData.query.trim());\n                let found_query = false;\n                const current_topics = [];\n                topicDropdown.find('div.label.visible.topic,a.label.visible').each(function(_,e){ current_topics.push(e.dataset.value); });\n\n                if (res.topics) {\n                    let found = false;\n                    for (let i=0;i < res.topics.length;i++) {\n                        // skip currently added tags\n                        if (current_topics.indexOf(res.topics[i].topic_name) != -1){\n                            continue;\n                        }\n\n                        if (res.topics[i].topic_name.toLowerCase() === query.toLowerCase()){\n                            found_query = true;\n                        }\n                        formattedResponse.results.push({\"description\": res.topics[i].topic_name, \"data-value\": res.topics[i].topic_name});\n                        found = true;\n                    }\n                    formattedResponse.success = found;\n                }\n\n                if (query.length > 0 && !found_query){\n                    formattedResponse.success = true;\n                    formattedResponse.results.unshift({\"description\": query, \"data-value\": query});\n                } else if (query.length > 0 && found_query) {\n                    formattedResponse.results.sort(function(a, b){\n                        if (a.description.toLowerCase() === query.toLowerCase()) return -1;\n                        if (b.description.toLowerCase() === query.toLowerCase()) return 1;\n                        if (a.description > b.description) return -1;\n                        if (a.description < b.description) return 1;\n                        return 0;\n                    });\n                }\n\n\n                return formattedResponse;\n            },\n        },\n        onLabelCreate: function(value) {\n            value = value.toLowerCase().trim();\n            this.attr(\"data-value\", value).contents().first().replaceWith(value);\n            return $(this);\n        },\n        onAdd: function(addedValue, _addedText, $addedChoice) {\n            addedValue = addedValue.toLowerCase().trim();\n            $($addedChoice).attr('data-value', addedValue);\n            $($addedChoice).attr('data-text', addedValue);\n        }\n    });\n\n    $.fn.form.settings.rules.validateTopic = function(_values, regExp) {\n        const topics = topicDropdown.children('a.ui.label'),\n            status = topics.length === 0 || topics.last().attr(\"data-value\").match(regExp);\n        if (!status) {\n            topics.last().removeClass(\"green\").addClass(\"red\");\n        }\n        return status && topicDropdown.children('a.ui.label.red').length === 0;\n    };\n\n    topicForm.form({\n            on: 'change',\n            inline : true,\n            fields: {\n                topics: {\n                    identifier: 'topics',\n                    rules: [\n                        {\n                            type: 'validateTopic',\n                            value: /^[a-z0-9][a-z0-9-]{1,35}$/,\n                            prompt: topicPrompts.formatPrompt\n                        },\n                        {\n                            type: 'maxCount[25]',\n                            prompt: topicPrompts.countPrompt\n                        }\n                    ]\n                },\n            }\n        });\n}\nwindow.toggleDeadlineForm = function() {\n    $('#deadlineForm').fadeToggle(150);\n}\n\nwindow.setDeadline = function() {\n    const deadline = $('#deadlineDate').val();\n    updateDeadline(deadline);\n}\n\nfunction updateDeadline(deadlineString) {\n    $('#deadline-err-invalid-date').hide();\n    $('#deadline-loader').addClass('loading');\n\n    let realDeadline = null;\n    if (deadlineString !== '') {\n\n        const newDate = Date.parse(deadlineString)\n\n        if (isNaN(newDate)) {\n            $('#deadline-loader').removeClass('loading');\n            $('#deadline-err-invalid-date').show();\n            return false;\n        }\n        realDeadline = new Date(newDate);\n    }\n\n    $.ajax($('#update-issue-deadline-form').attr('action') + '/deadline', {\n        data: JSON.stringify({\n            'due_date': realDeadline,\n        }),\n        headers: {\n            'X-Csrf-Token': csrf,\n            'X-Remote': true,\n        },\n        contentType: 'application/json',\n        type: 'POST',\n        success: function () {\n            reload();\n        },\n        error: function () {\n            $('#deadline-loader').removeClass('loading');\n            $('#deadline-err-invalid-date').show();\n        }\n    });\n}\n\nwindow.deleteDependencyModal = function(id, type) {\n    $('.remove-dependency')\n        .modal({\n            closable: false,\n            duration: 200,\n            onApprove: function () {\n                $('#removeDependencyID').val(id);\n                $('#dependencyType').val(type);\n                $('#removeDependencyForm').submit();\n            }\n        }).modal('show')\n    ;\n}\n\nfunction initIssueList() {\n    const repolink = $('#repolink').val();\n    const repoId = $('#repoId').val();\n    const crossRepoSearch = $('#crossRepoSearch').val();\n    let issueSearchUrl = suburl + '/api/v1/repos/' + repolink + '/issues?q={query}';\n    if (crossRepoSearch === 'true') {\n        issueSearchUrl = suburl + '/api/v1/repos/issues/search?q={query}&priority_repo_id=' + repoId;\n    }\n    $('#new-dependency-drop-list')\n        .dropdown({\n            apiSettings: {\n                url: issueSearchUrl,\n                onResponse: function(response) {\n                    const filteredResponse = {'success': true, 'results': []};\n                    const currIssueId = $('#new-dependency-drop-list').data('issue-id');\n                    // Parse the response from the api to work with our dropdown\n                    $.each(response, function(_i, issue) {\n                        // Don't list current issue in the dependency list.\n                        if(issue.id === currIssueId) {\n                            return;\n                        }\n                        filteredResponse.results.push({\n                            'name'  : '#' + issue.number + ' ' + htmlEncode(issue.title) +\n                                '<div class=\"text small dont-break-out\">' + htmlEncode(issue.repository.full_name) + '</div>',\n                            'value' : issue.id\n                        });\n                    });\n                    return filteredResponse;\n                },\n                cache: false,\n            },\n\n            fullTextSearch: true\n        });\n\n    $(\".menu a.label-filter-item\").each(function() {\n        $(this).click(function(e) {\n            if (e.altKey) {\n                e.preventDefault();\n\n                const href = $(this).attr(\"href\");\n                const id = $(this).data(\"label-id\");\n\n                const regStr = \"labels=(-?[0-9]+%2c)*(\" + id + \")(%2c-?[0-9]+)*&\";\n                const newStr = \"labels=$1-$2$3&\";\n\n                window.location = href.replace(new RegExp(regStr), newStr);\n            }\n        });\n    });\n\n    $(\".menu .ui.dropdown.label-filter\").keydown(function(e) {\n        if (e.altKey && e.keyCode == 13) {\n            const selectedItems = $(\".menu .ui.dropdown.label-filter .menu .item.selected\");\n\n            if (selectedItems.length > 0) {\n                const item = $(selectedItems[0]);\n\n                const href = item.attr(\"href\");\n                const id = item.data(\"label-id\");\n\n                const regStr = \"labels=(-?[0-9]+%2c)*(\" + id + \")(%2c-?[0-9]+)*&\";\n                const newStr = \"labels=$1-$2$3&\";\n\n                window.location = href.replace(new RegExp(regStr), newStr);\n            }\n        }\n    });\n}\nwindow.cancelCodeComment = function(btn) {\n    const form = $(btn).closest(\"form\");\n    if(form.length > 0 && form.hasClass('comment-form')) {\n        form.addClass('hide');\n        form.parent().find('button.comment-form-reply').show();\n    } else {\n        form.closest('.comment-code-cloud').remove()\n    }\n}\nwindow.onOAuthLoginClick = function() {\n    const oauthLoader = $('#oauth2-login-loader');\n    const oauthNav = $('#oauth2-login-navigator');\n\n    oauthNav.hide();\n    oauthLoader.removeClass('disabled');\n\n    setTimeout(function(){\n        // recover previous content to let user try again\n        // usually redirection will be performed before this action\n        oauthLoader.addClass('disabled');\n        oauthNav.show();\n    },5000);\n}\n"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./web_src/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","htmlEncode","text","jQuery","html","csrf","suburl","previewFileModes","simpleMDEditor","codeMirrorEditor","initCommentPreviewTab","$form","$tabMenu","find","tab","data","click","$this","$","this","post","_csrf","context","val","$previewPanel","emojify","run","each","hljs","highlightBlock","buttonsClickOnEnter","initEditForm","length","$previewTab","split","initEditPreviewTab","content","$diffPreviewPanel","updateIssuesMeta","url","action","issueIds","elementId","Promise","resolve","ajax","type","issue_ids","id","success","reload","window","location","initImagePaste","target","field","addEventListener","event","pasteEvent","callback","clipboardData","items","indexOf","blob","getAsFile","preventDefault","stopPropagation","retrieveImageFromClipboardAsBlob","img","substr","lastIndexOf","selectionStart","startPos","endPos","selectionEnd","substring","insertAtCursor","file","xhr","XMLHttpRequest","onload","status","responseText","open","setRequestHeader","formData","FormData","append","send","uploadFile","res","JSON","parse","oldval","newval","replace","replaceAndKeepCursor","uuid","input","initCommentForm","$selectBranch","selectedValue","css","removeClass","addClass","initListSubmits","selectItem","selector","outerSelector","$list","$noSelect","$listMenu","hasLabelUpdateAction","labels","dropdown","promises","keys","forEach","label","promise","push","all","then","hasClass","listIds","parent","join","select_id","input_id","$menu","hasUpdateAction","initRepository","$data","searchTerm","noResults","canCreateBranch","menuVisible","active","branch","tag","selected","remove","Vue","delimiters","el","beforeMount","vm","$el","getAttribute","document","body","contains","set","watch","visible","focusSearchField","computed","filteredItems","filter","item","toLowerCase","showCreateNewBranch","showNoResults","methods","prev","getSelected","href","createNewBranch","$refs","newBranchForm","submit","nextTick","searchField","focus","j","getSelectedIndexInFiltered","scrollToActive","Array","isArray","cont","scrollContainer","offsetTop","scrollTop","clientHeight","keydown","keyCode","initFilterSearchDropdown","keyup","$prompt","toString","show","hide","change","checked","$newLabelPanel","minicolors","color_hex","modal","onApprove","$datepicker","datetimepicker","lang","inline","timepicker","startDate","formatDate","onSelectDate","ct","dateFormat","$issueTitle","$editInput","editTitleToggle","toggle","title","$textarea","$segment","next","$editContentZone","$renderContent","$rawContent","issuesTribute","attach","emojiTribute","$dropzone","$files","filenameDict","dropzone","headers","maxFiles","maxFilesize","acceptedFiles","addRemoveLinks","dictDefaultMessage","dictInvalidFileType","dictFileTooBig","dictRemoveFile","init","on","submitted","getJSON","drop","removeAllFiles","empty","imgSrc","emit","files","$editContentForm","attr","$attachments","map","$content","attachments","confirm","$statusButton","$mergeButton","e","onChange","_text","_value","$choice","closest","initReactionSelector","reactions","popup","position","metadata","actionURL","done","resp","react","insertBefore","appendTo","hasEmoji","$item","addLine","delLine","addPercent","parseFloat","localStorage","setItem","select","$repoComparePull","$dropdown","fullTextSearch","selectOnKeydown","message","assingMenuAttributes","menu","Math","floor","random","initRepositoryCollaboration","uid","initEditor","prop","$editFilename","parts","$section","$divider","getCursorPosition","last","setSelectionRange","element","trigger","$editArea","markdownFileExts","lineWrapExtensions","spec","extension","extWithDot","dataUrl","apiCall","exec","info","CodeMirror","findModeByExtension","previewLink","mime","toTextArea","SimpleMDE","autoDownloadFontAwesome","forceSync","renderingConfig","singleLineBreaks","indentWithTabs","tabSize","spellChecker","previewRender","plainText","preview","setTimeout","innerHTML","toolbar","setSimpleMDE","fromTextArea","lineNumbers","cm","_change","getValue","setCodeMirror","setOption","autoLoadMode","editorconfig","indent_style","Tab","spaces","parseInt","getOption","replaceSelection","indent_size","tab_width","$commitButton","$editForm","areYouSure","silent","dirtyClass","fieldSelector","dirty","initUserSettings","keypress","initCodeView","$select","siblings","selectRange","shiftKey","eq","getSelection","removeAllRanges","selection","$first","hash","match","offset","top","u2fSigned","stringify","contentType","fail","u2fError","u2fRegistered","errorCode","checkError","errorType","u2fErrors","browser","1","2","3","4","5","u2fRegisterRequest","req","registeredKeys","u2fApi","register","appId","registerRequests","catch","reason","undefined","metaData","code","changeHash","history","pushState","$from","a","b","classes","showDeletePopup","dialog","closable","redirect","showAddAllPopup","Dropzone","autoDiscover","fn","pos","Sel","createRange","SelLength","moveStart","ready","onShow","transition","direction","accordion","checkbox","progress","showActivity","slideToggle","nodes","slice","querySelectorAll","setConfig","img_dir","ignore_emoticons","getElementsByClassName","childNodes","nodeName","$searchTeamBox","$searchRepoBox","toggleMigrations","isExpanded","mgrBtn","editDiv","viewDiv","saveBtn","topicDropdown","topicForm","topicPrompts","hidePrompt","prompts","clipboard","Clipboard","clearSelection","setAttribute","node","encodeURIComponent","wrap","children","dataset","issueIDs","issueId","_","first","search","minCharacters","apiSettings","onResponse","response","_i","login","full_name","image","avatar_url","results","searchFields","permission","description","dbType","dbDefaults","MySQL","PostgreSQL","MSSQL","_type","defaultHost","is","authUserName","cloneAddr","startsWith","simplemde","codemirror","cursorPos","getCursor","setCursor","line","ch","className","getInputField","initWikiForm","updateContentType","initWebhook","removeAttr","authType","onOAuth2Change","onSecurityProtocolChange","onUsePagedSearchChange","onOAuth2UseCustomURLChange","$detailModal","$checkboxes","ids","provider","initAdmin","getElementById","component","props","searchLimit","Number","default","String","required","organizations","isOrganization","Boolean","canCreateOrganization","organizationsTotalCount","moreReposLink","repos","reposTotalCount","reposFilter","searchQuery","isLoading","repoTypes","count","searchMode","forks","mirrors","sources","collaborative","showMoreReposLink","searchURL","repoTypeCount","mounted","searchRepos","self","changeTab","changeReposFilter","showRepo","repo","owner","mirror","fork","searchedMode","searchedURL","searchedQuery","result","_textStatus","request","getResponseHeader","always","repoClass","private","querySelector","initVueApp","ctrlKey","altKey","metaKey","countPrompt","formatPrompt","topics","_data","responseJSON","topicArray","invalidTopics","topicLables","index","form","allowAdditions","forceSelection","fields","saveRemoteData","duration","variation","blue","basic","throttle","cache","formattedResponse","query","urlData","trim","found_query","current_topics","found","topic_name","unshift","sort","onLabelCreate","contents","replaceWith","onAdd","addedValue","_addedText","$addedChoice","settings","rules","validateTopic","_values","regExp","identifier","prompt","ensureSupport","sign","challenge","err","allowMultiple","repolink","repoId","crossRepoSearch","issueSearchUrl","filteredResponse","currIssueId","issue","number","repository","regStr","RegExp","selectedItems","initIssueList","toUpperCase","wipPrefixes","sticky","isSplit","side","idx","path","tr","ntr","after","td","commentCloud","initRepoStatusChecker","migrating","repo_name","complete","$repoTemplate","checkTemplate","$templateUnits","$nonTemplate","changeOwner","_r","initTemplateSearch","getItem","routes","$cloneAddr","$repoName","arrays","$title","timeAddManual","toggleStopwatch","cancelStopwatch","initHeatmap","appElementId","heatmapUser","locale","contributions","no_contributions","vueDelimeters","user","colorRange","endDate","values","totalContributions","getColor","Date","loadHeatmap","userName","chartRawData","chartData","date","timestamp","createElement","appendChild","color","getComputedStyle","backgroundColor","removeChild","template","toggleDeadlineForm","fadeToggle","setDeadline","deadlineString","realDeadline","newDate","isNaN","due_date","error","updateDeadline","deleteDependencyModal","cancelCodeComment","btn","onOAuthLoginClick","oauthLoader","oauthNav"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* globals wipPrefixes, issuesTribute, emojiTribute */\n/* exported timeAddManual, toggleStopwatch, cancelStopwatch, initHeatmap */\n/* exported toggleDeadlineForm, setDeadline, deleteDependencyModal, cancelCodeComment, onOAuthLoginClick */\n\n\nfunction htmlEncode(text) {\n  return jQuery('<div />').text(text).html();\n}\n\nlet csrf;\nlet suburl;\nlet previewFileModes;\nlet simpleMDEditor;\nlet codeMirrorEditor;\n\n// Disable Dropzone auto-discover because it's manually initialized\nif (typeof (Dropzone) !== 'undefined') {\n  Dropzone.autoDiscover = false;\n}\n\nfunction initCommentPreviewTab($form) {\n  const $tabMenu = $form.find('.tabular.menu');\n  $tabMenu.find('.item').tab();\n  $tabMenu.find(`.item[data-tab=\"${$tabMenu.data('preview')}\"]`).click(function () {\n    const $this = $(this);\n    $.post($this.data('url'), {\n      _csrf: csrf,\n      mode: 'gfm',\n      context: $this.data('context'),\n      text: $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('write')}\"] textarea`).val()\n    },\n    (data) => {\n      const $previewPanel = $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('preview')}\"]`);\n      $previewPanel.html(data);\n      emojify.run($previewPanel[0]);\n      $('pre code', $previewPanel[0]).each(function () {\n        hljs.highlightBlock(this);\n      });\n    });\n  });\n\n  buttonsClickOnEnter();\n}\n\nfunction initEditPreviewTab($form) {\n  const $tabMenu = $form.find('.tabular.menu');\n  $tabMenu.find('.item').tab();\n  const $previewTab = $tabMenu.find(`.item[data-tab=\"${$tabMenu.data('preview')}\"]`);\n  if ($previewTab.length) {\n    previewFileModes = $previewTab.data('preview-file-modes').split(',');\n    $previewTab.click(function () {\n      const $this = $(this);\n      $.post($this.data('url'), {\n        _csrf: csrf,\n        mode: 'gfm',\n        context: $this.data('context'),\n        text: $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('write')}\"] textarea`).val()\n      },\n      (data) => {\n        const $previewPanel = $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('preview')}\"]`);\n        $previewPanel.html(data);\n        emojify.run($previewPanel[0]);\n        $('pre code', $previewPanel[0]).each(function () {\n          hljs.highlightBlock(this);\n        });\n      });\n    });\n  }\n}\n\nfunction initEditDiffTab($form) {\n  const $tabMenu = $form.find('.tabular.menu');\n  $tabMenu.find('.item').tab();\n  $tabMenu.find(`.item[data-tab=\"${$tabMenu.data('diff')}\"]`).click(function () {\n    const $this = $(this);\n    $.post($this.data('url'), {\n      _csrf: csrf,\n      context: $this.data('context'),\n      content: $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('write')}\"] textarea`).val()\n    },\n    (data) => {\n      const $diffPreviewPanel = $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('diff')}\"]`);\n      $diffPreviewPanel.html(data);\n      emojify.run($diffPreviewPanel[0]);\n    });\n  });\n}\n\n\nfunction initEditForm() {\n  if ($('.edit.form').length === 0) {\n    return;\n  }\n\n  initEditPreviewTab($('.edit.form'));\n  initEditDiffTab($('.edit.form'));\n}\n\nfunction initBranchSelector() {\n  const $selectBranch = $('.ui.select-branch');\n  const $branchMenu = $selectBranch.find('.reference-list-menu');\n  $branchMenu.find('.item:not(.no-select)').click(function () {\n    const selectedValue = $(this).data('id');\n    $($(this).data('id-selector')).val(selectedValue);\n    $selectBranch.find('.ui .branch-name').text(selectedValue);\n  });\n  $selectBranch.find('.reference.column').click(function () {\n    $selectBranch.find('.scrolling.reference-list-menu').css('display', 'none');\n    $selectBranch.find('.reference .text').removeClass('black');\n    $($(this).data('target')).css('display', 'block');\n    $(this).find('.text').addClass('black');\n    return false;\n  });\n}\n\nfunction updateIssuesMeta(url, action, issueIds, elementId) {\n  return new Promise(((resolve) => {\n    $.ajax({\n      type: 'POST',\n      url,\n      data: {\n        _csrf: csrf,\n        action,\n        issue_ids: issueIds,\n        id: elementId\n      },\n      success: resolve\n    });\n  }));\n}\n\nfunction initRepoStatusChecker() {\n  const migrating = $('#repo_migrating');\n  $('#repo_migrating_failed').hide();\n  if (migrating) {\n    const repo_name = migrating.attr('repo');\n    if (typeof repo_name === 'undefined') {\n      return;\n    }\n    $.ajax({\n      type: 'GET',\n      url: `${suburl}/${repo_name}/status`,\n      data: {\n        _csrf: csrf,\n      },\n      complete(xhr) {\n        if (xhr.status === 200) {\n          if (xhr.responseJSON) {\n            if (xhr.responseJSON.status === 0) {\n              window.location.reload();\n              return;\n            }\n\n            setTimeout(() => {\n              initRepoStatusChecker();\n            }, 2000);\n            return;\n          }\n        }\n        $('#repo_migrating_progress').hide();\n        $('#repo_migrating_failed').show();\n      }\n    });\n  }\n}\n\nfunction initReactionSelector(parent) {\n  let reactions = '';\n  if (!parent) {\n    parent = $(document);\n    reactions = '.reactions > ';\n  }\n\n  parent.find(`${reactions}a.label`).popup({ position: 'bottom left', metadata: { content: 'title', title: 'none' } });\n\n  parent.find(`.select-reaction > .menu > .item, ${reactions}a.label`).on('click', function (e) {\n    const vm = this;\n    e.preventDefault();\n\n    if ($(this).hasClass('disabled')) return;\n\n    const actionURL = $(this).hasClass('item')\n      ? $(this).closest('.select-reaction').data('action-url')\n      : $(this).data('action-url');\n    const url = `${actionURL}/${$(this).hasClass('blue') ? 'unreact' : 'react'}`;\n    $.ajax({\n      type: 'POST',\n      url,\n      data: {\n        _csrf: csrf,\n        content: $(this).data('content')\n      }\n    }).done((resp) => {\n      if (resp && (resp.html || resp.empty)) {\n        const content = $(vm).closest('.content');\n        let react = content.find('.segment.reactions');\n        if (!resp.empty && react.length > 0) {\n          react.remove();\n        }\n        if (!resp.empty) {\n          react = $('<div class=\"ui attached segment reactions\"></div>');\n          const attachments = content.find('.segment.bottom:first');\n          if (attachments.length > 0) {\n            react.insertBefore(attachments);\n          } else {\n            react.appendTo(content);\n          }\n          react.html(resp.html);\n          const hasEmoji = react.find('.has-emoji');\n          for (let i = 0; i < hasEmoji.length; i++) {\n            emojify.run(hasEmoji.get(i));\n          }\n          react.find('.dropdown').dropdown();\n          initReactionSelector(react);\n        }\n      }\n    });\n  });\n}\n\nfunction insertAtCursor(field, value) {\n  if (field.selectionStart || field.selectionStart === 0) {\n    const startPos = field.selectionStart;\n    const endPos = field.selectionEnd;\n    field.value = field.value.substring(0, startPos)\n            + value\n            + field.value.substring(endPos, field.value.length);\n    field.selectionStart = startPos + value.length;\n    field.selectionEnd = startPos + value.length;\n  } else {\n    field.value += value;\n  }\n}\n\nfunction replaceAndKeepCursor(field, oldval, newval) {\n  if (field.selectionStart || field.selectionStart === 0) {\n    const startPos = field.selectionStart;\n    const endPos = field.selectionEnd;\n    field.value = field.value.replace(oldval, newval);\n    field.selectionStart = startPos + newval.length - oldval.length;\n    field.selectionEnd = endPos + newval.length - oldval.length;\n  } else {\n    field.value = field.value.replace(oldval, newval);\n  }\n}\n\nfunction retrieveImageFromClipboardAsBlob(pasteEvent, callback) {\n  if (!pasteEvent.clipboardData) {\n    return;\n  }\n\n  const { items } = pasteEvent.clipboardData;\n  if (typeof (items) === 'undefined') {\n    return;\n  }\n\n  for (let i = 0; i < items.length; i++) {\n    if (items[i].type.indexOf('image') === -1) continue;\n    const blob = items[i].getAsFile();\n\n    if (typeof (callback) === 'function') {\n      pasteEvent.preventDefault();\n      pasteEvent.stopPropagation();\n      callback(blob);\n    }\n  }\n}\n\nfunction uploadFile(file, callback) {\n  const xhr = new XMLHttpRequest();\n\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      callback(xhr.responseText);\n    }\n  };\n\n  xhr.open('post', `${suburl}/attachments`, true);\n  xhr.setRequestHeader('X-Csrf-Token', csrf);\n  const formData = new FormData();\n  formData.append('file', file, file.name);\n  xhr.send(formData);\n}\n\nfunction reload() {\n  window.location.reload();\n}\n\nfunction initImagePaste(target) {\n  target.each(function () {\n    const field = this;\n    field.addEventListener('paste', (event) => {\n      retrieveImageFromClipboardAsBlob(event, (img) => {\n        const name = img.name.substr(0, img.name.lastIndexOf('.'));\n        insertAtCursor(field, `![${name}]()`);\n        uploadFile(img, (res) => {\n          const data = JSON.parse(res);\n          replaceAndKeepCursor(field, `![${name}]()`, `![${name}](${suburl}/attachments/${data.uuid})`);\n          const input = $(`<input id=\"${data.uuid}\" name=\"files\" type=\"hidden\">`).val(data.uuid);\n          $('.files').append(input);\n        });\n      });\n    }, false);\n  });\n}\n\nfunction initCommentForm() {\n  if ($('.comment.form').length === 0) {\n    return;\n  }\n\n  initBranchSelector();\n  initCommentPreviewTab($('.comment.form'));\n  initImagePaste($('.comment.form textarea'));\n\n  // Listsubmit\n  function initListSubmits(selector, outerSelector) {\n    const $list = $(`.ui.${outerSelector}.list`);\n    const $noSelect = $list.find('.no-select');\n    const $listMenu = $(`.${selector} .menu`);\n    let hasLabelUpdateAction = $listMenu.data('action') === 'update';\n    const labels = {};\n\n    $(`.${selector}`).dropdown('setting', 'onHide', () => {\n      hasLabelUpdateAction = $listMenu.data('action') === 'update'; // Update the var\n      if (hasLabelUpdateAction) {\n        const promises = [];\n        Object.keys(labels).forEach((elementId) => {\n          const label = labels[elementId];\n          const promise = updateIssuesMeta(\n            label['update-url'],\n            label.action,\n            label['issue-id'],\n            elementId\n          );\n          promises.push(promise);\n        });\n        Promise.all(promises).then(reload);\n      }\n    });\n\n    $listMenu.find('.item:not(.no-select)').click(function () {\n      // we don't need the action attribute when updating assignees\n      if (selector === 'select-assignees-modify') {\n        // UI magic. We need to do this here, otherwise it would destroy the functionality of\n        // adding/removing labels\n        if ($(this).hasClass('checked')) {\n          $(this).removeClass('checked');\n          $(this).find('.octicon').removeClass('octicon-check');\n        } else {\n          $(this).addClass('checked');\n          $(this).find('.octicon').addClass('octicon-check');\n        }\n\n        updateIssuesMeta(\n          $listMenu.data('update-url'),\n          '',\n          $listMenu.data('issue-id'),\n          $(this).data('id')\n        );\n        $listMenu.data('action', 'update'); // Update to reload the page when we updated items\n        return false;\n      }\n\n      if ($(this).hasClass('checked')) {\n        $(this).removeClass('checked');\n        $(this).find('.octicon').removeClass('octicon-check');\n        if (hasLabelUpdateAction) {\n          if (!($(this).data('id') in labels)) {\n            labels[$(this).data('id')] = {\n              'update-url': $listMenu.data('update-url'),\n              action: 'detach',\n              'issue-id': $listMenu.data('issue-id'),\n            };\n          } else {\n            delete labels[$(this).data('id')];\n          }\n        }\n      } else {\n        $(this).addClass('checked');\n        $(this).find('.octicon').addClass('octicon-check');\n        if (hasLabelUpdateAction) {\n          if (!($(this).data('id') in labels)) {\n            labels[$(this).data('id')] = {\n              'update-url': $listMenu.data('update-url'),\n              action: 'attach',\n              'issue-id': $listMenu.data('issue-id'),\n            };\n          } else {\n            delete labels[$(this).data('id')];\n          }\n        }\n      }\n\n      const listIds = [];\n      $(this).parent().find('.item').each(function () {\n        if ($(this).hasClass('checked')) {\n          listIds.push($(this).data('id'));\n          $($(this).data('id-selector')).removeClass('hide');\n        } else {\n          $($(this).data('id-selector')).addClass('hide');\n        }\n      });\n      if (listIds.length === 0) {\n        $noSelect.removeClass('hide');\n      } else {\n        $noSelect.addClass('hide');\n      }\n      $($(this).parent().data('id')).val(listIds.join(','));\n      return false;\n    });\n    $listMenu.find('.no-select.item').click(function () {\n      if (hasLabelUpdateAction || selector === 'select-assignees-modify') {\n        updateIssuesMeta(\n          $listMenu.data('update-url'),\n          'clear',\n          $listMenu.data('issue-id'),\n          ''\n        ).then(reload);\n      }\n\n      $(this).parent().find('.item').each(function () {\n        $(this).removeClass('checked');\n        $(this).find('.octicon').removeClass('octicon-check');\n      });\n\n      $list.find('.item').each(function () {\n        $(this).addClass('hide');\n      });\n      $noSelect.removeClass('hide');\n      $($(this).parent().data('id')).val('');\n    });\n  }\n\n  // Init labels and assignees\n  initListSubmits('select-label', 'labels');\n  initListSubmits('select-assignees', 'assignees');\n  initListSubmits('select-assignees-modify', 'assignees');\n\n  function selectItem(select_id, input_id) {\n    const $menu = $(`${select_id} .menu`);\n    const $list = $(`.ui${select_id}.list`);\n    const hasUpdateAction = $menu.data('action') === 'update';\n\n    $menu.find('.item:not(.no-select)').click(function () {\n      $(this).parent().find('.item').each(function () {\n        $(this).removeClass('selected active');\n      });\n\n      $(this).addClass('selected active');\n      if (hasUpdateAction) {\n        updateIssuesMeta(\n          $menu.data('update-url'),\n          '',\n          $menu.data('issue-id'),\n          $(this).data('id')\n        ).then(reload);\n      }\n      switch (input_id) {\n        case '#milestone_id':\n          $list.find('.selected').html(`<a class=\"item\" href=${$(this).data('href')}>${\n            htmlEncode($(this).text())}</a>`);\n          break;\n        case '#assignee_id':\n          $list.find('.selected').html(`<a class=\"item\" href=${$(this).data('href')}>`\n                        + `<img class=\"ui avatar image\" src=${$(this).data('avatar')}>${\n                          htmlEncode($(this).text())}</a>`);\n      }\n      $(`.ui${select_id}.list .no-select`).addClass('hide');\n      $(input_id).val($(this).data('id'));\n    });\n    $menu.find('.no-select.item').click(function () {\n      $(this).parent().find('.item:not(.no-select)').each(function () {\n        $(this).removeClass('selected active');\n      });\n\n      if (hasUpdateAction) {\n        updateIssuesMeta(\n          $menu.data('update-url'),\n          '',\n          $menu.data('issue-id'),\n          $(this).data('id')\n        ).then(reload);\n      }\n\n      $list.find('.selected').html('');\n      $list.find('.no-select').removeClass('hide');\n      $(input_id).val('');\n    });\n  }\n\n  // Milestone and assignee\n  selectItem('.select-milestone', '#milestone_id');\n  selectItem('.select-assignee', '#assignee_id');\n}\n\nfunction initInstall() {\n  if ($('.install').length === 0) {\n    return;\n  }\n\n  if ($('#db_host').val() === '') {\n    $('#db_host').val('127.0.0.1:3306');\n    $('#db_user').val('gitea');\n    $('#db_name').val('gitea');\n  }\n\n  // Database type change detection.\n  $('#db_type').change(function () {\n    const sqliteDefault = 'data/gitea.db';\n    const tidbDefault = 'data/gitea_tidb';\n\n    const dbType = $(this).val();\n    if (dbType === 'SQLite3') {\n      $('#sql_settings').hide();\n      $('#pgsql_settings').hide();\n      $('#mysql_settings').hide();\n      $('#sqlite_settings').show();\n\n      if (dbType === 'SQLite3' && $('#db_path').val() === tidbDefault) {\n        $('#db_path').val(sqliteDefault);\n      }\n      return;\n    }\n\n    const dbDefaults = {\n      MySQL: '127.0.0.1:3306',\n      PostgreSQL: '127.0.0.1:5432',\n      MSSQL: '127.0.0.1:1433'\n    };\n\n    $('#sqlite_settings').hide();\n    $('#sql_settings').show();\n\n    $('#pgsql_settings').toggle(dbType === 'PostgreSQL');\n    $('#mysql_settings').toggle(dbType === 'MySQL');\n    $.each(dbDefaults, (_type, defaultHost) => {\n      if ($('#db_host').val() === defaultHost) {\n        $('#db_host').val(dbDefaults[dbType]);\n        return false;\n      }\n    });\n  });\n\n  // TODO: better handling of exclusive relations.\n  $('#offline-mode input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#disable-gravatar').checkbox('check');\n      $('#federated-avatar-lookup').checkbox('uncheck');\n    }\n  });\n  $('#disable-gravatar input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#federated-avatar-lookup').checkbox('uncheck');\n    } else {\n      $('#offline-mode').checkbox('uncheck');\n    }\n  });\n  $('#federated-avatar-lookup input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#disable-gravatar').checkbox('uncheck');\n      $('#offline-mode').checkbox('uncheck');\n    }\n  });\n  $('#enable-openid-signin input').change(function () {\n    if ($(this).is(':checked')) {\n      if (!$('#disable-registration input').is(':checked')) {\n        $('#enable-openid-signup').checkbox('check');\n      }\n    } else {\n      $('#enable-openid-signup').checkbox('uncheck');\n    }\n  });\n  $('#disable-registration input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#enable-captcha').checkbox('uncheck');\n      $('#enable-openid-signup').checkbox('uncheck');\n    } else {\n      $('#enable-openid-signup').checkbox('check');\n    }\n  });\n  $('#enable-captcha input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#disable-registration').checkbox('uncheck');\n    }\n  });\n}\n\nfunction initRepository() {\n  if ($('.repository').length === 0) {\n    return;\n  }\n\n  function initFilterSearchDropdown(selector) {\n    const $dropdown = $(selector);\n    $dropdown.dropdown({\n      fullTextSearch: true,\n      selectOnKeydown: false,\n      onChange(_text, _value, $choice) {\n        if ($choice.data('url')) {\n          window.location.href = $choice.data('url');\n        }\n      },\n      message: { noResults: $dropdown.data('no-results') }\n    });\n  }\n\n  // File list and commits\n  if ($('.repository.file.list').length > 0\n        || ('.repository.commits').length > 0) {\n    initFilterBranchTagDropdown('.choose.reference .dropdown');\n  }\n\n  // Wiki\n  if ($('.repository.wiki.view').length > 0) {\n    initFilterSearchDropdown('.choose.page .dropdown');\n  }\n\n  // Options\n  if ($('.repository.settings.options').length > 0) {\n    $('#repo_name').keyup(function () {\n      const $prompt = $('#repo-name-change-prompt');\n      if ($(this).val().toString().toLowerCase() !== $(this).data('name').toString().toLowerCase()) {\n        $prompt.show();\n      } else {\n        $prompt.hide();\n      }\n    });\n\n    // Enable or select internal/external wiki system and issue tracker.\n    $('.enable-system').change(function () {\n      if (this.checked) {\n        $($(this).data('target')).removeClass('disabled');\n        if (!$(this).data('context')) $($(this).data('context')).addClass('disabled');\n      } else {\n        $($(this).data('target')).addClass('disabled');\n        if (!$(this).data('context')) $($(this).data('context')).removeClass('disabled');\n      }\n    });\n    $('.enable-system-radio').change(function () {\n      if (this.value === 'false') {\n        $($(this).data('target')).addClass('disabled');\n        if (typeof $(this).data('context') !== 'undefined') $($(this).data('context')).removeClass('disabled');\n      } else if (this.value === 'true') {\n        $($(this).data('target')).removeClass('disabled');\n        if (typeof $(this).data('context') !== 'undefined') $($(this).data('context')).addClass('disabled');\n      }\n    });\n  }\n\n  // Labels\n  if ($('.repository.labels').length > 0) {\n    // Create label\n    const $newLabelPanel = $('.new-label.segment');\n    $('.new-label.button').click(() => {\n      $newLabelPanel.show();\n    });\n    $('.new-label.segment .cancel').click(() => {\n      $newLabelPanel.hide();\n    });\n\n    $('.color-picker').each(function () {\n      $(this).minicolors();\n    });\n    $('.precolors .color').click(function () {\n      const color_hex = $(this).data('color-hex');\n      $('.color-picker').val(color_hex);\n      $('.minicolors-swatch-color').css('background-color', color_hex);\n    });\n    $('.edit-label-button').click(function () {\n      $('#label-modal-id').val($(this).data('id'));\n      $('.edit-label .new-label-input').val($(this).data('title'));\n      $('.edit-label .new-label-desc-input').val($(this).data('description'));\n      $('.edit-label .color-picker').val($(this).data('color'));\n      $('.minicolors-swatch-color').css('background-color', $(this).data('color'));\n      $('.edit-label.modal').modal({\n        onApprove() {\n          $('.edit-label.form').submit();\n        }\n      }).modal('show');\n      return false;\n    });\n  }\n\n  // Milestones\n  if ($('.repository.new.milestone').length > 0) {\n    const $datepicker = $('.milestone.datepicker');\n    $datepicker.datetimepicker({\n      lang: $datepicker.data('lang'),\n      inline: true,\n      timepicker: false,\n      startDate: $datepicker.data('start-date'),\n      formatDate: 'Y-m-d',\n      onSelectDate(ct) {\n        $('#deadline').val(ct.dateFormat('Y-m-d'));\n      }\n    });\n    $('#clear-date').click(() => {\n      $('#deadline').val('');\n      return false;\n    });\n  }\n\n  // Issues\n  if ($('.repository.view.issue').length > 0) {\n    // Edit issue title\n    const $issueTitle = $('#issue-title');\n    const $editInput = $('#edit-title-input input');\n    const editTitleToggle = function () {\n      $issueTitle.toggle();\n      $('.not-in-edit').toggle();\n      $('#edit-title-input').toggle();\n      $('.in-edit').toggle();\n      $editInput.focus();\n      return false;\n    };\n    $('#edit-title').click(editTitleToggle);\n    $('#cancel-edit-title').click(editTitleToggle);\n    $('#save-edit-title').click(editTitleToggle).click(function () {\n      if ($editInput.val().length === 0 || $editInput.val() === $issueTitle.text()) {\n        $editInput.val($issueTitle.text());\n        return false;\n      }\n\n      $.post($(this).data('update-url'), {\n        _csrf: csrf,\n        title: $editInput.val()\n      },\n      (data) => {\n        $editInput.val(data.title);\n        $issueTitle.text(data.title);\n        reload();\n      });\n      return false;\n    });\n\n    // Edit issue or comment content\n    $('.edit-content').click(function () {\n      const $segment = $(this).parent().parent().parent()\n        .next();\n      const $editContentZone = $segment.find('.edit-content-zone');\n      const $renderContent = $segment.find('.render-content');\n      const $rawContent = $segment.find('.raw-content');\n      let $textarea;\n\n      // Setup new form\n      if ($editContentZone.html().length === 0) {\n        $editContentZone.html($('#edit-content-form').html());\n        $textarea = $editContentZone.find('textarea');\n        issuesTribute.attach($textarea.get());\n        emojiTribute.attach($textarea.get());\n\n        const $dropzone = $editContentZone.find('.dropzone');\n        $dropzone.data('saved', false);\n        const $files = $editContentZone.find('.comment-files');\n        if ($dropzone.length > 0) {\n          const filenameDict = {};\n          $dropzone.dropzone({\n            url: $dropzone.data('upload-url'),\n            headers: { 'X-Csrf-Token': csrf },\n            maxFiles: $dropzone.data('max-file'),\n            maxFilesize: $dropzone.data('max-size'),\n            acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n            addRemoveLinks: true,\n            dictDefaultMessage: $dropzone.data('default-message'),\n            dictInvalidFileType: $dropzone.data('invalid-input-type'),\n            dictFileTooBig: $dropzone.data('file-too-big'),\n            dictRemoveFile: $dropzone.data('remove-file'),\n            init() {\n              this.on('success', (file, data) => {\n                filenameDict[file.name] = {\n                  uuid: data.uuid,\n                  submitted: false\n                };\n                const input = $(`<input id=\"${data.uuid}\" name=\"files\" type=\"hidden\">`).val(data.uuid);\n                $files.append(input);\n              });\n              this.on('removedfile', (file) => {\n                if (!(file.name in filenameDict)) {\n                  return;\n                }\n                $(`#${filenameDict[file.name].uuid}`).remove();\n                if ($dropzone.data('remove-url') && $dropzone.data('csrf') && !filenameDict[file.name].submitted) {\n                  $.post($dropzone.data('remove-url'), {\n                    file: filenameDict[file.name].uuid,\n                    _csrf: $dropzone.data('csrf')\n                  });\n                }\n              });\n              this.on('submit', () => {\n                $.each(filenameDict, (name) => {\n                  filenameDict[name].submitted = true;\n                });\n              });\n              this.on('reload', () => {\n                $.getJSON($editContentZone.data('attachment-url'), (data) => {\n                  const drop = $dropzone.get(0).dropzone;\n                  drop.removeAllFiles(true);\n                  $files.empty();\n                  $.each(data, function () {\n                    const imgSrc = `${$dropzone.data('upload-url')}/${this.uuid}`;\n                    drop.emit('addedfile', this);\n                    drop.emit('thumbnail', this, imgSrc);\n                    drop.emit('complete', this);\n                    drop.files.push(this);\n                    filenameDict[this.name] = {\n                      submitted: true,\n                      uuid: this.uuid\n                    };\n                    $dropzone.find(`img[src='${imgSrc}']`).css('max-width', '100%');\n                    const input = $(`<input id=\"${this.uuid}\" name=\"files\" type=\"hidden\">`).val(this.uuid);\n                    $files.append(input);\n                  });\n                });\n              });\n            }\n          });\n          $dropzone.get(0).dropzone.emit('reload');\n        }\n        // Give new write/preview data-tab name to distinguish from others\n        const $editContentForm = $editContentZone.find('.ui.comment.form');\n        const $tabMenu = $editContentForm.find('.tabular.menu');\n        $tabMenu.attr('data-write', $editContentZone.data('write'));\n        $tabMenu.attr('data-preview', $editContentZone.data('preview'));\n        $tabMenu.find('.write.item').attr('data-tab', $editContentZone.data('write'));\n        $tabMenu.find('.preview.item').attr('data-tab', $editContentZone.data('preview'));\n        $editContentForm.find('.write.segment').attr('data-tab', $editContentZone.data('write'));\n        $editContentForm.find('.preview.segment').attr('data-tab', $editContentZone.data('preview'));\n\n        initCommentPreviewTab($editContentForm);\n\n        $editContentZone.find('.cancel.button').click(() => {\n          $renderContent.show();\n          $editContentZone.hide();\n          $dropzone.get(0).dropzone.emit('reload');\n        });\n        $editContentZone.find('.save.button').click(() => {\n          $renderContent.show();\n          $editContentZone.hide();\n          const $attachments = $files.find('[name=files]').map(function () {\n            return $(this).val();\n          }).get();\n          $.post($editContentZone.data('update-url'), {\n            _csrf: csrf,\n            content: $textarea.val(),\n            context: $editContentZone.data('context'),\n            files: $attachments\n          },\n          (data) => {\n            if (data.length === 0) {\n              $renderContent.html($('#no-content').html());\n            } else {\n              $renderContent.html(data.content);\n              emojify.run($renderContent[0]);\n              $('pre code', $renderContent[0]).each(function () {\n                hljs.highlightBlock(this);\n              });\n            }\n            const $content = $segment.parent();\n            if (!$content.find('.ui.small.images').length) {\n              if (data.attachments !== '') {\n                $content.append(\n                  '<div class=\"ui bottom attached segment\">'\n                                + '    <div class=\"ui small images\">'\n                                + '    </div>'\n                                + '</div>'\n                );\n                $content.find('.ui.small.images').html(data.attachments);\n              }\n            } else if (data.attachments === '') {\n              $content.find('.ui.small.images').parent().remove();\n            } else {\n              $content.find('.ui.small.images').html(data.attachments);\n            }\n            $dropzone.get(0).dropzone.emit('submit');\n            $dropzone.get(0).dropzone.emit('reload');\n          });\n        });\n      } else {\n        $textarea = $segment.find('textarea');\n      }\n\n      // Show write/preview tab and copy raw content as needed\n      $editContentZone.show();\n      $renderContent.hide();\n      if ($textarea.val().length === 0) {\n        $textarea.val($rawContent.text());\n      }\n      $textarea.focus();\n      return false;\n    });\n\n    // Delete comment\n    $('.delete-comment').click(function () {\n      const $this = $(this);\n      if (window.confirm($this.data('locale'))) {\n        $.post($this.data('url'), {\n          _csrf: csrf\n        }).success(() => {\n          $(`#${$this.data('comment-id')}`).remove();\n        });\n      }\n      return false;\n    });\n\n    // Change status\n    const $statusButton = $('#status-button');\n    $('#comment-form .edit_area').keyup(function () {\n      if ($(this).val().length === 0) {\n        $statusButton.text($statusButton.data('status'));\n      } else {\n        $statusButton.text($statusButton.data('status-and-comment'));\n      }\n    });\n    $statusButton.click(() => {\n      $('#status').val($statusButton.data('status-val'));\n      $('#comment-form').submit();\n    });\n\n    // Pull Request merge button\n    const $mergeButton = $('.merge-button > button');\n    $mergeButton.on('click', function (e) {\n      e.preventDefault();\n      $(`.${$(this).data('do')}-fields`).show();\n      $(this).parent().hide();\n    });\n    $('.merge-button > .dropdown').dropdown({\n      onChange(_text, _value, $choice) {\n        if ($choice.data('do')) {\n          $mergeButton.find('.button-text').text($choice.text());\n          $mergeButton.data('do', $choice.data('do'));\n        }\n      }\n    });\n    $('.merge-cancel').on('click', function (e) {\n      e.preventDefault();\n      $(this).closest('.form').hide();\n      $mergeButton.parent().show();\n    });\n\n    initReactionSelector();\n  }\n\n  // Diff\n  if ($('.repository.diff').length > 0) {\n    $('.diff-counter').each(function () {\n      const $item = $(this);\n      const addLine = $item.find('span[data-line].add').data('line');\n      const delLine = $item.find('span[data-line].del').data('line');\n      const addPercent = parseFloat(addLine) / (parseFloat(addLine) + parseFloat(delLine)) * 100;\n      $item.find('.bar .add').css('width', `${addPercent}%`);\n    });\n  }\n\n  // Quick start and repository home\n  $('#repo-clone-ssh').click(function () {\n    $('.clone-url').text($(this).data('link'));\n    $('#repo-clone-url').val($(this).data('link'));\n    $(this).addClass('blue');\n    $('#repo-clone-https').removeClass('blue');\n    localStorage.setItem('repo-clone-protocol', 'ssh');\n  });\n  $('#repo-clone-https').click(function () {\n    $('.clone-url').text($(this).data('link'));\n    $('#repo-clone-url').val($(this).data('link'));\n    $(this).addClass('blue');\n    $('#repo-clone-ssh').removeClass('blue');\n    localStorage.setItem('repo-clone-protocol', 'https');\n  });\n  $('#repo-clone-url').click(function () {\n    $(this).select();\n  });\n\n  // Pull request\n  const $repoComparePull = $('.repository.compare.pull');\n  if ($repoComparePull.length > 0) {\n    initFilterSearchDropdown('.choose.branch .dropdown');\n    // show pull request form\n    $repoComparePull.find('button.show-form').on('click', function (e) {\n      e.preventDefault();\n      $repoComparePull.find('.pullrequest-form').show();\n      $(this).parent().hide();\n    });\n  }\n\n  // Branches\n  if ($('.repository.settings.branches').length > 0) {\n    initFilterSearchDropdown('.protected-branches .dropdown');\n    $('.enable-protection, .enable-whitelist').change(function () {\n      if (this.checked) {\n        $($(this).data('target')).removeClass('disabled');\n      } else {\n        $($(this).data('target')).addClass('disabled');\n      }\n    });\n  }\n}\n\nfunction initMigration() {\n  const toggleMigrations = function () {\n    const authUserName = $('#auth_username').val();\n    const cloneAddr = $('#clone_addr').val();\n    if (!$('#mirror').is(':checked') && (authUserName && authUserName.length > 0)\n        && (cloneAddr !== undefined && (cloneAddr.startsWith('https://github.com') || cloneAddr.startsWith('http://github.com')))) {\n      $('#migrate_items').show();\n    } else {\n      $('#migrate_items').hide();\n    }\n  };\n\n  toggleMigrations();\n\n  $('#clone_addr').on('input', toggleMigrations);\n  $('#auth_username').on('input', toggleMigrations);\n  $('#mirror').on('change', toggleMigrations);\n}\n\nfunction initPullRequestReview() {\n  $('.show-outdated').on('click', function (e) {\n    e.preventDefault();\n    const id = $(this).data('comment');\n    $(this).addClass('hide');\n    $(`#code-comments-${id}`).removeClass('hide');\n    $(`#code-preview-${id}`).removeClass('hide');\n    $(`#hide-outdated-${id}`).removeClass('hide');\n  });\n\n  $('.hide-outdated').on('click', function (e) {\n    e.preventDefault();\n    const id = $(this).data('comment');\n    $(this).addClass('hide');\n    $(`#code-comments-${id}`).addClass('hide');\n    $(`#code-preview-${id}`).addClass('hide');\n    $(`#show-outdated-${id}`).removeClass('hide');\n  });\n\n  $('button.comment-form-reply').on('click', function (e) {\n    e.preventDefault();\n    $(this).hide();\n    const form = $(this).parent().find('.comment-form');\n    form.removeClass('hide');\n    assingMenuAttributes(form.find('.menu'));\n  });\n  // The following part is only for diff views\n  if ($('.repository.pull.diff').length === 0) {\n    return;\n  }\n\n  $('.diff-detail-box.ui.sticky').sticky();\n\n  $('.btn-review').on('click', function (e) {\n    e.preventDefault();\n    $(this).closest('.dropdown').find('.menu').toggle('visible');\n  }).closest('.dropdown').find('.link.close')\n    .on('click', function (e) {\n      e.preventDefault();\n      $(this).closest('.menu').toggle('visible');\n    });\n\n  $('.code-view .lines-code,.code-view .lines-num')\n    .on('mouseenter', function () {\n      const parent = $(this).closest('td');\n      $(this).closest('tr').addClass(\n        parent.hasClass('lines-num-old') || parent.hasClass('lines-code-old')\n          ? 'focus-lines-old' : 'focus-lines-new'\n      );\n    })\n    .on('mouseleave', function () {\n      $(this).closest('tr').removeClass('focus-lines-new focus-lines-old');\n    });\n  $('.add-code-comment').on('click', function (e) {\n    // https://github.com/go-gitea/gitea/issues/4745\n    if ($(e.target).hasClass('btn-add-single')) {\n      return;\n    }\n    e.preventDefault();\n    const isSplit = $(this).closest('.code-diff').hasClass('code-diff-split');\n    const side = $(this).data('side');\n    const idx = $(this).data('idx');\n    const path = $(this).data('path');\n    const form = $('#pull_review_add_comment').html();\n    const tr = $(this).closest('tr');\n    let ntr = tr.next();\n    if (!ntr.hasClass('add-comment')) {\n      ntr = $(`<tr class=\"add-comment\">${\n        isSplit ? '<td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-right\"></td>'\n          : '<td class=\"lines-num\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left add-comment-right\"></td>'\n      }</tr>`);\n      tr.after(ntr);\n    }\n    const td = ntr.find(`.add-comment-${side}`);\n    let commentCloud = td.find('.comment-code-cloud');\n    if (commentCloud.length === 0) {\n      td.html(form);\n      commentCloud = td.find('.comment-code-cloud');\n      assingMenuAttributes(commentCloud.find('.menu'));\n\n      td.find(\"input[name='line']\").val(idx);\n      td.find(\"input[name='side']\").val(side === 'left' ? 'previous' : 'proposed');\n      td.find(\"input[name='path']\").val(path);\n    }\n    commentCloud.find('textarea').focus();\n  });\n}\n\nfunction assingMenuAttributes(menu) {\n  const id = Math.floor(Math.random() * Math.floor(1000000));\n  menu.attr('data-write', menu.attr('data-write') + id);\n  menu.attr('data-preview', menu.attr('data-preview') + id);\n  menu.find('.item').each(function () {\n    const tab = $(this).attr('data-tab') + id;\n    $(this).attr('data-tab', tab);\n  });\n  menu.parent().find(\"*[data-tab='write']\").attr('data-tab', `write${id}`);\n  menu.parent().find(\"*[data-tab='preview']\").attr('data-tab', `preview${id}`);\n  initCommentPreviewTab(menu.parent('.form'));\n  return id;\n}\n\nfunction initRepositoryCollaboration() {\n  // Change collaborator access mode\n  $('.access-mode.menu .item').click(function () {\n    const $menu = $(this).parent();\n    $.post($menu.data('url'), {\n      _csrf: csrf,\n      uid: $menu.data('uid'),\n      mode: $(this).data('value')\n    });\n  });\n}\n\nfunction initTeamSettings() {\n  // Change team access mode\n  $('.organization.new.team input[name=permission]').change(() => {\n    const val = $('input[name=permission]:checked', '.organization.new.team').val();\n    if (val === 'admin') {\n      $('.organization.new.team .team-units').hide();\n    } else {\n      $('.organization.new.team .team-units').show();\n    }\n  });\n}\n\nfunction initWikiForm() {\n  const $editArea = $('.repository.wiki textarea#edit_area');\n  if ($editArea.length > 0) {\n    const simplemde = new SimpleMDE({\n      autoDownloadFontAwesome: false,\n      element: $editArea[0],\n      forceSync: true,\n      previewRender(plainText, preview) { // Async method\n        setTimeout(() => {\n          // FIXME: still send render request when return back to edit mode\n          $.post($editArea.data('url'), {\n            _csrf: csrf,\n            mode: 'gfm',\n            context: $editArea.data('context'),\n            text: plainText\n          }, (data) => {\n            preview.innerHTML = `<div class=\"markdown ui segment\">${data}</div>`;\n            emojify.run($('.editor-preview')[0]);\n          });\n        }, 0);\n\n        return 'Loading...';\n      },\n      renderingConfig: {\n        singleLineBreaks: false\n      },\n      indentWithTabs: false,\n      tabSize: 4,\n      spellChecker: false,\n      toolbar: ['bold', 'italic', 'strikethrough', '|',\n        'heading-1', 'heading-2', 'heading-3', 'heading-bigger', 'heading-smaller', '|',\n        {\n          name: 'code-inline',\n          action(e) {\n            const cm = e.codemirror;\n            const selection = cm.getSelection();\n            cm.replaceSelection(`\\`${selection}\\``);\n            if (!selection) {\n              const cursorPos = cm.getCursor();\n              cm.setCursor(cursorPos.line, cursorPos.ch - 1);\n            }\n            cm.focus();\n          },\n          className: 'fa fa-angle-right',\n          title: 'Add Inline Code',\n        }, 'code', 'quote', '|', {\n          name: 'checkbox-empty',\n          action(e) {\n            const cm = e.codemirror;\n            cm.replaceSelection(`\\n- [ ] ${cm.getSelection()}`);\n            cm.focus();\n          },\n          className: 'fa fa-square-o',\n          title: 'Add Checkbox (empty)',\n        },\n        {\n          name: 'checkbox-checked',\n          action(e) {\n            const cm = e.codemirror;\n            cm.replaceSelection(`\\n- [x] ${cm.getSelection()}`);\n            cm.focus();\n          },\n          className: 'fa fa-check-square-o',\n          title: 'Add Checkbox (checked)',\n        }, '|',\n        'unordered-list', 'ordered-list', '|',\n        'link', 'image', 'table', 'horizontal-rule', '|',\n        'clean-block', 'preview', 'fullscreen']\n    });\n    $(simplemde.codemirror.getInputField()).addClass('js-quick-submit');\n  }\n}\n\n// Adding function to get the cursor position in a text field to jQuery object.\n$.fn.getCursorPosition = function () {\n  const el = $(this).get(0);\n  let pos = 0;\n  if ('selectionStart' in el) {\n    pos = el.selectionStart;\n  } else if ('selection' in document) {\n    el.focus();\n    const Sel = document.selection.createRange();\n    const SelLength = document.selection.createRange().text.length;\n    Sel.moveStart('character', -el.value.length);\n    pos = Sel.text.length - SelLength;\n  }\n  return pos;\n};\n\nfunction setSimpleMDE($editArea) {\n  if (codeMirrorEditor) {\n    codeMirrorEditor.toTextArea();\n    codeMirrorEditor = null;\n  }\n\n  if (simpleMDEditor) {\n    return true;\n  }\n\n  simpleMDEditor = new SimpleMDE({\n    autoDownloadFontAwesome: false,\n    element: $editArea[0],\n    forceSync: true,\n    renderingConfig: {\n      singleLineBreaks: false\n    },\n    indentWithTabs: false,\n    tabSize: 4,\n    spellChecker: false,\n    previewRender(plainText, preview) { // Async method\n      setTimeout(() => {\n        // FIXME: still send render request when return back to edit mode\n        $.post($editArea.data('url'), {\n          _csrf: csrf,\n          mode: 'gfm',\n          context: $editArea.data('context'),\n          text: plainText\n        },\n        (data) => {\n          preview.innerHTML = `<div class=\"markdown ui segment\">${data}</div>`;\n          emojify.run($('.editor-preview')[0]);\n        });\n      }, 0);\n\n      return 'Loading...';\n    },\n    toolbar: ['bold', 'italic', 'strikethrough', '|',\n      'heading-1', 'heading-2', 'heading-3', 'heading-bigger', 'heading-smaller', '|',\n      'code', 'quote', '|',\n      'unordered-list', 'ordered-list', '|',\n      'link', 'image', 'table', 'horizontal-rule', '|',\n      'clean-block', 'preview', 'fullscreen', 'side-by-side']\n  });\n\n  return true;\n}\n\nfunction setCodeMirror($editArea) {\n  if (simpleMDEditor) {\n    simpleMDEditor.toTextArea();\n    simpleMDEditor = null;\n  }\n\n  if (codeMirrorEditor) {\n    return true;\n  }\n\n  codeMirrorEditor = CodeMirror.fromTextArea($editArea[0], {\n    lineNumbers: true\n  });\n  codeMirrorEditor.on('change', (cm, _change) => {\n    $editArea.val(cm.getValue());\n  });\n\n  return true;\n}\n\nfunction initEditor() {\n  $('.js-quick-pull-choice-option').change(function () {\n    if ($(this).val() === 'commit-to-new-branch') {\n      $('.quick-pull-branch-name').show();\n      $('.quick-pull-branch-name input').prop('required', true);\n    } else {\n      $('.quick-pull-branch-name').hide();\n      $('.quick-pull-branch-name input').prop('required', false);\n    }\n    $('#commit-button').text($(this).attr('button_text'));\n  });\n\n  const $editFilename = $('#file-name');\n  $editFilename.keyup(function (e) {\n    const $section = $('.breadcrumb span.section');\n    const $divider = $('.breadcrumb div.divider');\n    let value;\n    let parts;\n\n    if (e.keyCode === 8) {\n      if ($(this).getCursorPosition() === 0) {\n        if ($section.length > 0) {\n          value = $section.last().find('a').text();\n          $(this).val(value + $(this).val());\n          $(this)[0].setSelectionRange(value.length, value.length);\n          $section.last().remove();\n          $divider.last().remove();\n        }\n      }\n    }\n    if (e.keyCode === 191) {\n      parts = $(this).val().split('/');\n      for (let i = 0; i < parts.length; ++i) {\n        value = parts[i];\n        if (i < parts.length - 1) {\n          if (value.length) {\n            $(`<span class=\"section\"><a href=\"#\">${value}</a></span>`).insertBefore($(this));\n            $('<div class=\"divider\"> / </div>').insertBefore($(this));\n          }\n        } else {\n          $(this).val(value);\n        }\n        $(this)[0].setSelectionRange(0, 0);\n      }\n    }\n    parts = [];\n    $('.breadcrumb span.section').each(function () {\n      const element = $(this);\n      if (element.find('a').length) {\n        parts.push(element.find('a').text());\n      } else {\n        parts.push(element.text());\n      }\n    });\n    if ($(this).val()) parts.push($(this).val());\n    $('#tree_path').val(parts.join('/'));\n  }).trigger('keyup');\n\n  const $editArea = $('.repository.editor textarea#edit_area');\n  if (!$editArea.length) return;\n\n  const markdownFileExts = $editArea.data('markdown-file-exts').split(',');\n  const lineWrapExtensions = $editArea.data('line-wrap-extensions').split(',');\n\n  $editFilename.on('keyup', () => {\n    const val = $editFilename.val();\n    let mode; let spec; let extension; let extWithDot; let dataUrl; let\n      apiCall;\n\n    extension = extWithDot = '';\n    const m = /.+\\.([^.]+)$/.exec(val);\n    if (m) {\n      extension = m[1];\n      extWithDot = `.${extension}`;\n    }\n\n    const info = CodeMirror.findModeByExtension(extension);\n    const previewLink = $('a[data-tab=preview]');\n    if (info) {\n      mode = info.mode;\n      spec = info.mime;\n      apiCall = mode;\n    } else {\n      apiCall = extension;\n    }\n\n    if (previewLink.length && apiCall && previewFileModes && previewFileModes.length && previewFileModes.indexOf(apiCall) >= 0) {\n      dataUrl = previewLink.data('url');\n      previewLink.data('url', dataUrl.replace(/(.*)\\/.*/i, `$1/${mode}`));\n      previewLink.show();\n    } else {\n      previewLink.hide();\n    }\n\n    // If this file is a Markdown extensions, we will load that editor and return\n    if (markdownFileExts.indexOf(extWithDot) >= 0) {\n      if (setSimpleMDE($editArea)) {\n        return;\n      }\n    }\n\n    // Else we are going to use CodeMirror\n    if (!codeMirrorEditor && !setCodeMirror($editArea)) {\n      return;\n    }\n\n    if (mode) {\n      codeMirrorEditor.setOption('mode', spec);\n      CodeMirror.autoLoadMode(codeMirrorEditor, mode);\n    }\n\n    if (lineWrapExtensions.indexOf(extWithDot) >= 0) {\n      codeMirrorEditor.setOption('lineWrapping', true);\n    } else {\n      codeMirrorEditor.setOption('lineWrapping', false);\n    }\n\n    // get the filename without any folder\n    let value = $editFilename.val();\n    if (value.length === 0) {\n      return;\n    }\n    value = value.split('/');\n    value = value[value.length - 1];\n\n    $.getJSON($editFilename.data('ec-url-prefix') + value, (editorconfig) => {\n      if (editorconfig.indent_style === 'tab') {\n        codeMirrorEditor.setOption('indentWithTabs', true);\n        codeMirrorEditor.setOption('extraKeys', {});\n      } else {\n        codeMirrorEditor.setOption('indentWithTabs', false);\n        // required because CodeMirror doesn't seems to use spaces correctly for {\"indentWithTabs\": false}:\n        // - https://github.com/codemirror/CodeMirror/issues/988\n        // - https://codemirror.net/doc/manual.html#keymaps\n        codeMirrorEditor.setOption('extraKeys', {\n          Tab(cm) {\n            const spaces = Array(parseInt(cm.getOption('indentUnit')) + 1).join(' ');\n            cm.replaceSelection(spaces);\n          }\n        });\n      }\n      codeMirrorEditor.setOption('indentUnit', editorconfig.indent_size || 4);\n      codeMirrorEditor.setOption('tabSize', editorconfig.tab_width || 4);\n    });\n  }).trigger('keyup');\n\n  // Using events from https://github.com/codedance/jquery.AreYouSure#advanced-usage\n  // to enable or disable the commit button\n  const $commitButton = $('#commit-button');\n  const $editForm = $('.ui.edit.form');\n  const dirtyFileClass = 'dirty-file';\n\n  // Disabling the button at the start\n  $commitButton.prop('disabled', true);\n\n  // Registering a custom listener for the file path and the file content\n  $editForm.areYouSure({\n    silent: true,\n    dirtyClass: dirtyFileClass,\n    fieldSelector: ':input:not(.commit-form-wrapper :input)',\n    change() {\n      const dirty = $(this).hasClass(dirtyFileClass);\n      $commitButton.prop('disabled', !dirty);\n    }\n  });\n\n  $commitButton.click((event) => {\n    // A modal which asks if an empty file should be committed\n    if ($editArea.val().length === 0) {\n      $('#edit-empty-content-modal').modal({\n        onApprove() {\n          $('.edit.form').submit();\n        }\n      }).modal('show');\n      event.preventDefault();\n    }\n  });\n}\n\nfunction initOrganization() {\n  if ($('.organization').length === 0) {\n    return;\n  }\n\n  // Options\n  if ($('.organization.settings.options').length > 0) {\n    $('#org_name').keyup(function () {\n      const $prompt = $('#org-name-change-prompt');\n      if ($(this).val().toString().toLowerCase() !== $(this).data('org-name').toString().toLowerCase()) {\n        $prompt.show();\n      } else {\n        $prompt.hide();\n      }\n    });\n  }\n}\n\nfunction initUserSettings() {\n  // Options\n  if ($('.user.settings.profile').length > 0) {\n    $('#username').keyup(function () {\n      const $prompt = $('#name-change-prompt');\n      if ($(this).val().toString().toLowerCase() !== $(this).data('name').toString().toLowerCase()) {\n        $prompt.show();\n      } else {\n        $prompt.hide();\n      }\n    });\n  }\n}\n\nfunction initWebhook() {\n  if ($('.new.webhook').length === 0) {\n    return;\n  }\n\n  $('.events.checkbox input').change(function () {\n    if ($(this).is(':checked')) {\n      $('.events.fields').show();\n    }\n  });\n  $('.non-events.checkbox input').change(function () {\n    if ($(this).is(':checked')) {\n      $('.events.fields').hide();\n    }\n  });\n\n  const updateContentType = function () {\n    const visible = $('#http_method').val() === 'POST';\n    $('#content_type').parent().parent()[visible ? 'show' : 'hide']();\n  };\n  updateContentType();\n  $('#http_method').change(() => {\n    updateContentType();\n  });\n\n  // Test delivery\n  $('#test-delivery').click(function () {\n    const $this = $(this);\n    $this.addClass('loading disabled');\n    $.post($this.data('link'), {\n      _csrf: csrf\n    }).done(\n      setTimeout(() => {\n        window.location.href = $this.data('redirect');\n      }, 5000)\n    );\n  });\n}\n\nfunction initAdmin() {\n  if ($('.admin').length === 0) {\n    return;\n  }\n\n  // New user\n  if ($('.admin.new.user').length > 0\n        || $('.admin.edit.user').length > 0) {\n    $('#login_type').change(function () {\n      if ($(this).val().substring(0, 1) === '0') {\n        $('#login_name').removeAttr('required');\n        $('.non-local').hide();\n        $('.local').show();\n        $('#user_name').focus();\n\n        if ($(this).data('password') === 'required') {\n          $('#password').attr('required', 'required');\n        }\n      } else {\n        $('#login_name').attr('required', 'required');\n        $('.non-local').show();\n        $('.local').hide();\n        $('#login_name').focus();\n\n        $('#password').removeAttr('required');\n      }\n    });\n  }\n\n  function onSecurityProtocolChange() {\n    if ($('#security_protocol').val() > 0) {\n      $('.has-tls').show();\n    } else {\n      $('.has-tls').hide();\n    }\n  }\n\n  function onUsePagedSearchChange() {\n    if ($('#use_paged_search').prop('checked')) {\n      $('.search-page-size').show()\n        .find('input').attr('required', 'required');\n    } else {\n      $('.search-page-size').hide()\n        .find('input').removeAttr('required');\n    }\n  }\n\n  function onOAuth2Change() {\n    $('.open_id_connect_auto_discovery_url, .oauth2_use_custom_url').hide();\n    $('.open_id_connect_auto_discovery_url input[required]').removeAttr('required');\n\n    const provider = $('#oauth2_provider').val();\n    switch (provider) {\n      case 'github':\n      case 'gitlab':\n      case 'gitea':\n        $('.oauth2_use_custom_url').show();\n        break;\n      case 'openidConnect':\n        $('.open_id_connect_auto_discovery_url input').attr('required', 'required');\n        $('.open_id_connect_auto_discovery_url').show();\n        break;\n    }\n    onOAuth2UseCustomURLChange();\n  }\n\n  function onOAuth2UseCustomURLChange() {\n    const provider = $('#oauth2_provider').val();\n    $('.oauth2_use_custom_url_field').hide();\n    $('.oauth2_use_custom_url_field input[required]').removeAttr('required');\n\n    if ($('#oauth2_use_custom_url').is(':checked')) {\n      if (!$('#oauth2_token_url').val()) {\n        $('#oauth2_token_url').val($(`#${provider}_token_url`).val());\n      }\n      if (!$('#oauth2_auth_url').val()) {\n        $('#oauth2_auth_url').val($(`#${provider}_auth_url`).val());\n      }\n      if (!$('#oauth2_profile_url').val()) {\n        $('#oauth2_profile_url').val($(`#${provider}_profile_url`).val());\n      }\n      if (!$('#oauth2_email_url').val()) {\n        $('#oauth2_email_url').val($(`#${provider}_email_url`).val());\n      }\n      switch (provider) {\n        case 'github':\n          $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input, .oauth2_email_url input').attr('required', 'required');\n          $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url, .oauth2_email_url').show();\n          break;\n        case 'gitea':\n        case 'gitlab':\n          $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input').attr('required', 'required');\n          $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url').show();\n          $('#oauth2_email_url').val('');\n          break;\n      }\n    }\n  }\n\n  // New authentication\n  if ($('.admin.new.authentication').length > 0) {\n    $('#auth_type').change(function () {\n      $('.ldap, .dldap, .smtp, .pam, .oauth2, .has-tls .search-page-size').hide();\n\n      $('.ldap input[required], .binddnrequired input[required], .dldap input[required], .smtp input[required], .pam input[required], .oauth2 input[required], .has-tls input[required]').removeAttr('required');\n      $('.binddnrequired').removeClass('required');\n\n      const authType = $(this).val();\n      switch (authType) {\n        case '2': // LDAP\n          $('.ldap').show();\n          $('.binddnrequired input, .ldap div.required:not(.dldap) input').attr('required', 'required');\n          $('.binddnrequired').addClass('required');\n          break;\n        case '3': // SMTP\n          $('.smtp').show();\n          $('.has-tls').show();\n          $('.smtp div.required input, .has-tls').attr('required', 'required');\n          break;\n        case '4': // PAM\n          $('.pam').show();\n          $('.pam input').attr('required', 'required');\n          break;\n        case '5': // LDAP\n          $('.dldap').show();\n          $('.dldap div.required:not(.ldap) input').attr('required', 'required');\n          break;\n        case '6': // OAuth2\n          $('.oauth2').show();\n          $('.oauth2 div.required:not(.oauth2_use_custom_url,.oauth2_use_custom_url_field,.open_id_connect_auto_discovery_url) input').attr('required', 'required');\n          onOAuth2Change();\n          break;\n      }\n      if (authType === '2' || authType === '5') {\n        onSecurityProtocolChange();\n      }\n      if (authType === '2') {\n        onUsePagedSearchChange();\n      }\n    });\n    $('#auth_type').change();\n    $('#security_protocol').change(onSecurityProtocolChange);\n    $('#use_paged_search').change(onUsePagedSearchChange);\n    $('#oauth2_provider').change(onOAuth2Change);\n    $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n  }\n  // Edit authentication\n  if ($('.admin.edit.authentication').length > 0) {\n    const authType = $('#auth_type').val();\n    if (authType === '2' || authType === '5') {\n      $('#security_protocol').change(onSecurityProtocolChange);\n      if (authType === '2') {\n        $('#use_paged_search').change(onUsePagedSearchChange);\n      }\n    } else if (authType === '6') {\n      $('#oauth2_provider').change(onOAuth2Change);\n      $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n      onOAuth2Change();\n    }\n  }\n\n  // Notice\n  if ($('.admin.notice')) {\n    const $detailModal = $('#detail-modal');\n\n    // Attach view detail modals\n    $('.view-detail').click(function () {\n      $detailModal.find('.content p').text($(this).data('content'));\n      $detailModal.modal('show');\n      return false;\n    });\n\n    // Select actions\n    const $checkboxes = $('.select.table .ui.checkbox');\n    $('.select.action').click(function () {\n      switch ($(this).data('action')) {\n        case 'select-all':\n          $checkboxes.checkbox('check');\n          break;\n        case 'deselect-all':\n          $checkboxes.checkbox('uncheck');\n          break;\n        case 'inverse':\n          $checkboxes.checkbox('toggle');\n          break;\n      }\n    });\n    $('#delete-selection').click(function () {\n      const $this = $(this);\n      $this.addClass('loading disabled');\n      const ids = [];\n      $checkboxes.each(function () {\n        if ($(this).checkbox('is checked')) {\n          ids.push($(this).data('id'));\n        }\n      });\n      $.post($this.data('link'), {\n        _csrf: csrf,\n        ids\n      }).done(() => {\n        window.location.href = $this.data('redirect');\n      });\n    });\n  }\n}\n\nfunction buttonsClickOnEnter() {\n  $('.ui.button').keypress(function (e) {\n    if (e.keyCode === 13 || e.keyCode === 32) { // enter key or space bar\n      $(this).click();\n    }\n  });\n}\n\nfunction searchUsers() {\n  const $searchUserBox = $('#search-user-box');\n  $searchUserBox.search({\n    minCharacters: 2,\n    apiSettings: {\n      url: `${suburl}/api/v1/users/search?q={query}`,\n      onResponse(response) {\n        const items = [];\n        $.each(response.data, (_i, item) => {\n          let title = item.login;\n          if (item.full_name && item.full_name.length > 0) {\n            title += ` (${htmlEncode(item.full_name)})`;\n          }\n          items.push({\n            title,\n            image: item.avatar_url\n          });\n        });\n\n        return { results: items };\n      }\n    },\n    searchFields: ['login', 'full_name'],\n    showNoResults: false\n  });\n}\n\nfunction searchTeams() {\n  const $searchTeamBox = $('#search-team-box');\n  $searchTeamBox.search({\n    minCharacters: 2,\n    apiSettings: {\n      url: `${suburl}/api/v1/orgs/${$searchTeamBox.data('org')}/teams/search?q={query}`,\n      headers: { 'X-Csrf-Token': csrf },\n      onResponse(response) {\n        const items = [];\n        $.each(response.data, (_i, item) => {\n          const title = `${item.name} (${item.permission} access)`;\n          items.push({\n            title,\n          });\n        });\n\n        return { results: items };\n      }\n    },\n    searchFields: ['name', 'description'],\n    showNoResults: false\n  });\n}\n\nfunction searchRepositories() {\n  const $searchRepoBox = $('#search-repo-box');\n  $searchRepoBox.search({\n    minCharacters: 2,\n    apiSettings: {\n      url: `${suburl}/api/v1/repos/search?q={query}&uid=${$searchRepoBox.data('uid')}`,\n      onResponse(response) {\n        const items = [];\n        $.each(response.data, (_i, item) => {\n          items.push({\n            title: item.full_name.split('/')[1],\n            description: item.full_name\n          });\n        });\n\n        return { results: items };\n      }\n    },\n    searchFields: ['full_name'],\n    showNoResults: false\n  });\n}\n\nfunction initCodeView() {\n  if ($('.code-view .linenums').length > 0) {\n    $(document).on('click', '.lines-num span', function (e) {\n      const $select = $(this);\n      const $list = $select.parent().siblings('.lines-code').find('ol.linenums > li');\n      selectRange($list, $list.filter(`[rel=${$select.attr('id')}]`), (e.shiftKey ? $list.filter('.active').eq(0) : null));\n      deSelect();\n    });\n\n    $(window).on('hashchange', () => {\n      let m = window.location.hash.match(/^#(L\\d+)-(L\\d+)$/);\n      const $list = $('.code-view ol.linenums > li');\n      let $first;\n      if (m) {\n        $first = $list.filter(`.${m[1]}`);\n        selectRange($list, $first, $list.filter(`.${m[2]}`));\n        $('html, body').scrollTop($first.offset().top - 200);\n        return;\n      }\n      m = window.location.hash.match(/^#(L|n)(\\d+)$/);\n      if (m) {\n        $first = $list.filter(`.L${m[2]}`);\n        selectRange($list, $first);\n        $('html, body').scrollTop($first.offset().top - 200);\n      }\n    }).trigger('hashchange');\n  }\n}\n\nfunction initU2FAuth() {\n  if ($('#wait-for-key').length === 0) {\n    return;\n  }\n  u2fApi.ensureSupport()\n    .then(() => {\n      $.getJSON(`${suburl}/user/u2f/challenge`).success((req) => {\n        u2fApi.sign(req.appId, req.challenge, req.registeredKeys, 30)\n          .then(u2fSigned)\n          .catch((err) => {\n            if (err === undefined) {\n              u2fError(1);\n              return;\n            }\n            u2fError(err.metaData.code);\n          });\n      });\n    }).catch(() => {\n      // Fallback in case browser do not support U2F\n      window.location.href = `${suburl}/user/two_factor`;\n    });\n}\nfunction u2fSigned(resp) {\n  $.ajax({\n    url: `${suburl}/user/u2f/sign`,\n    type: 'POST',\n    headers: { 'X-Csrf-Token': csrf },\n    data: JSON.stringify(resp),\n    contentType: 'application/json; charset=utf-8',\n  }).done((res) => {\n    window.location.replace(res);\n  }).fail(() => {\n    u2fError(1);\n  });\n}\n\nfunction u2fRegistered(resp) {\n  if (checkError(resp)) {\n    return;\n  }\n  $.ajax({\n    url: `${suburl}/user/settings/security/u2f/register`,\n    type: 'POST',\n    headers: { 'X-Csrf-Token': csrf },\n    data: JSON.stringify(resp),\n    contentType: 'application/json; charset=utf-8',\n    success() {\n      reload();\n    },\n    fail() {\n      u2fError(1);\n    }\n  });\n}\n\nfunction checkError(resp) {\n  if (!('errorCode' in resp)) {\n    return false;\n  }\n  if (resp.errorCode === 0) {\n    return false;\n  }\n  u2fError(resp.errorCode);\n  return true;\n}\n\n\nfunction u2fError(errorType) {\n  const u2fErrors = {\n    browser: $('#unsupported-browser'),\n    1: $('#u2f-error-1'),\n    2: $('#u2f-error-2'),\n    3: $('#u2f-error-3'),\n    4: $('#u2f-error-4'),\n    5: $('.u2f-error-5')\n  };\n  u2fErrors[errorType].removeClass('hide');\n  for (const type in u2fErrors) {\n    if (type !== errorType) {\n      u2fErrors[type].addClass('hide');\n    }\n  }\n  $('#u2f-error').modal('show');\n}\n\nfunction initU2FRegister() {\n  $('#register-device').modal({ allowMultiple: false });\n  $('#u2f-error').modal({ allowMultiple: false });\n  $('#register-security-key').on('click', (e) => {\n    e.preventDefault();\n    u2fApi.ensureSupport()\n      .then(u2fRegisterRequest)\n      .catch(() => {\n        u2fError('browser');\n      });\n  });\n}\n\nfunction u2fRegisterRequest() {\n  $.post(`${suburl}/user/settings/security/u2f/request_register`, {\n    _csrf: csrf,\n    name: $('#nickname').val()\n  }).success((req) => {\n    $('#nickname').closest('div.field').removeClass('error');\n    $('#register-device').modal('show');\n    if (req.registeredKeys === null) {\n      req.registeredKeys = [];\n    }\n    u2fApi.register(req.appId, req.registerRequests, req.registeredKeys, 30)\n      .then(u2fRegistered)\n      .catch((reason) => {\n        if (reason === undefined) {\n          u2fError(1);\n          return;\n        }\n        u2fError(reason.metaData.code);\n      });\n  }).fail((xhr) => {\n    if (xhr.status === 409) {\n      $('#nickname').closest('div.field').addClass('error');\n    }\n  });\n}\n\nfunction initWipTitle() {\n  $('.title_wip_desc > a').click((e) => {\n    e.preventDefault();\n\n    const $issueTitle = $('#issue_title');\n    $issueTitle.focus();\n    const value = $issueTitle.val().trim().toUpperCase();\n\n    for (const i in wipPrefixes) {\n      if (value.startsWith(wipPrefixes[i].toUpperCase())) {\n        return;\n      }\n    }\n\n    $issueTitle.val(`${wipPrefixes[0]} ${$issueTitle.val()}`);\n  });\n}\n\nfunction initTemplateSearch() {\n  const $repoTemplate = $('#repo_template');\n  const checkTemplate = function () {\n    const $templateUnits = $('#template_units');\n    const $nonTemplate = $('#non_template');\n    if ($repoTemplate.val() !== '') {\n      $templateUnits.show();\n      $nonTemplate.hide();\n    } else {\n      $templateUnits.hide();\n      $nonTemplate.show();\n    }\n  };\n  $repoTemplate.change(checkTemplate);\n  checkTemplate();\n\n  const changeOwner = function () {\n    $('#repo_template_search')\n      .dropdown({\n        apiSettings: {\n          url: `${suburl}/api/v1/repos/search?q={query}&template=true&priority_owner_id=${$('#uid').val()}`,\n          onResponse(response) {\n            const filteredResponse = { success: true, results: [] };\n            filteredResponse.results.push({\n              name: '',\n              value: ''\n            });\n            // Parse the response from the api to work with our dropdown\n            $.each(response.data, (_r, repo) => {\n              filteredResponse.results.push({\n                name: htmlEncode(repo.full_name),\n                value: repo.id\n              });\n            });\n            return filteredResponse;\n          },\n          cache: false,\n        },\n\n        fullTextSearch: true\n      });\n  };\n  $('#uid').change(changeOwner);\n  changeOwner();\n}\n\n$(document).ready(() => {\n  csrf = $('meta[name=_csrf]').attr('content');\n  suburl = $('meta[name=_suburl]').attr('content');\n\n  // Show exact time\n  $('.time-since').each(function () {\n    $(this).addClass('poping up').attr('data-content', $(this).attr('title')).attr('data-variation', 'inverted tiny')\n      .attr('title', '');\n  });\n\n  // Semantic UI modules.\n  $('.dropdown:not(.custom)').dropdown();\n  $('.jump.dropdown').dropdown({\n    action: 'hide',\n    onShow() {\n      $('.poping.up').popup('hide');\n    }\n  });\n  $('.slide.up.dropdown').dropdown({\n    transition: 'slide up'\n  });\n  $('.upward.dropdown').dropdown({\n    direction: 'upward'\n  });\n  $('.ui.accordion').accordion();\n  $('.ui.checkbox').checkbox();\n  $('.ui.progress').progress({\n    showActivity: false\n  });\n  $('.poping.up').popup();\n  $('.top.menu .poping.up').popup({\n    onShow() {\n      if ($('.top.menu .menu.transition').hasClass('visible')) {\n        return false;\n      }\n    }\n  });\n  $('.tabular.menu .item').tab();\n  $('.tabable.menu .item').tab();\n\n  $('.toggle.button').click(function () {\n    $($(this).data('target')).slideToggle(100);\n  });\n\n  // make table <tr> element clickable like a link\n  $('tr[data-href]').click(function () {\n    window.location = $(this).data('href');\n  });\n\n  // Highlight JS\n  if (typeof hljs !== 'undefined') {\n    const nodes = [].slice.call(document.querySelectorAll('pre code') || []);\n    for (let i = 0; i < nodes.length; i++) {\n      hljs.highlightBlock(nodes[i]);\n    }\n  }\n\n  // Dropzone\n  const $dropzone = $('#dropzone');\n  if ($dropzone.length > 0) {\n    const filenameDict = {};\n\n    new Dropzone('#dropzone', {\n      url: $dropzone.data('upload-url'),\n      headers: { 'X-Csrf-Token': csrf },\n      maxFiles: $dropzone.data('max-file'),\n      maxFilesize: $dropzone.data('max-size'),\n      acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n      addRemoveLinks: true,\n      dictDefaultMessage: $dropzone.data('default-message'),\n      dictInvalidFileType: $dropzone.data('invalid-input-type'),\n      dictFileTooBig: $dropzone.data('file-too-big'),\n      dictRemoveFile: $dropzone.data('remove-file'),\n      init() {\n        this.on('success', (file, data) => {\n          filenameDict[file.name] = data.uuid;\n          const input = $(`<input id=\"${data.uuid}\" name=\"files\" type=\"hidden\">`).val(data.uuid);\n          $('.files').append(input);\n        });\n        this.on('removedfile', (file) => {\n          if (file.name in filenameDict) {\n            $(`#${filenameDict[file.name]}`).remove();\n          }\n          if ($dropzone.data('remove-url') && $dropzone.data('csrf')) {\n            $.post($dropzone.data('remove-url'), {\n              file: filenameDict[file.name],\n              _csrf: $dropzone.data('csrf')\n            });\n          }\n        });\n      },\n    });\n  }\n\n  // Emojify\n  emojify.setConfig({\n    img_dir: `${suburl}/vendor/plugins/emojify/images`,\n    ignore_emoticons: true\n  });\n  const hasEmoji = document.getElementsByClassName('has-emoji');\n  for (let i = 0; i < hasEmoji.length; i++) {\n    emojify.run(hasEmoji[i]);\n    for (let j = 0; j < hasEmoji[i].childNodes.length; j++) {\n      if (hasEmoji[i].childNodes[j].nodeName === 'A') {\n        emojify.run(hasEmoji[i].childNodes[j]);\n      }\n    }\n  }\n\n  // Clipboard JS\n  const clipboard = new Clipboard('.clipboard');\n  clipboard.on('success', (e) => {\n    e.clearSelection();\n\n    $(`#${e.trigger.getAttribute('id')}`).popup('destroy');\n    e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-success'));\n    $(`#${e.trigger.getAttribute('id')}`).popup('show');\n    e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'));\n  });\n\n  clipboard.on('error', (e) => {\n    $(`#${e.trigger.getAttribute('id')}`).popup('destroy');\n    e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-error'));\n    $(`#${e.trigger.getAttribute('id')}`).popup('show');\n    e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'));\n  });\n\n  // Helpers.\n  $('.delete-button').click(showDeletePopup);\n  $('.add-all-button').click(showAddAllPopup);\n\n  $('.delete-branch-button').click(showDeletePopup);\n\n  $('.undo-button').click(function () {\n    const $this = $(this);\n    $.post($this.data('url'), {\n      _csrf: csrf,\n      id: $this.data('id')\n    }).done((data) => {\n      window.location.href = data.redirect;\n    });\n  });\n  $('.show-panel.button').click(function () {\n    $($(this).data('panel')).show();\n  });\n  $('.show-modal.button').click(function () {\n    $($(this).data('modal')).modal('show');\n  });\n  $('.delete-post.button').click(function () {\n    const $this = $(this);\n    $.post($this.data('request-url'), {\n      _csrf: csrf\n    }).done(() => {\n      window.location.href = $this.data('done-url');\n    });\n  });\n\n  // Set anchor.\n  $('.markdown').each(function () {\n    const headers = {};\n    $(this).find('h1, h2, h3, h4, h5, h6').each(function () {\n      let node = $(this);\n      const val = encodeURIComponent(node.text().toLowerCase().replace(/[^\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w\\- ]/g, '').replace(/[ ]/g, '-'));\n      let name = val;\n      if (headers[val] > 0) {\n        name = `${val}-${headers[val]}`;\n      }\n      if (headers[val] === undefined) {\n        headers[val] = 1;\n      } else {\n        headers[val] += 1;\n      }\n      node = node.wrap(`<div id=\"${name}\" class=\"anchor-wrap\" ></div>`);\n      node.append(`<a class=\"anchor\" href=\"#${name}\"><span class=\"octicon octicon-link\"></span></a>`);\n    });\n  });\n\n  $('.issue-checkbox').click(() => {\n    const numChecked = $('.issue-checkbox').children('input:checked').length;\n    if (numChecked > 0) {\n      $('#issue-filters').addClass('hide');\n      $('#issue-actions').removeClass('hide');\n    } else {\n      $('#issue-filters').removeClass('hide');\n      $('#issue-actions').addClass('hide');\n    }\n  });\n\n  $('.issue-action').click(function () {\n    let { action } = this.dataset;\n    let { elementId } = this.dataset;\n    const issueIDs = $('.issue-checkbox').children('input:checked').map(function () {\n      return this.dataset.issueId;\n    }).get()\n      .join();\n    const { url } = this.dataset;\n    if (elementId === '0' && url.substr(-9) === '/assignee') {\n      elementId = '';\n      action = 'clear';\n    }\n    updateIssuesMeta(url, action, issueIDs, elementId).then(() => {\n      // NOTICE: This reset of checkbox state targets Firefox caching behaviour, as the checkboxes stay checked after reload\n      if (action === 'close' || action === 'open') {\n        // uncheck all checkboxes\n        $('.issue-checkbox input[type=\"checkbox\"]').each((_, e) => { e.checked = false; });\n      }\n      reload();\n    });\n  });\n\n  // NOTICE: This event trigger targets Firefox caching behaviour, as the checkboxes stay checked after reload\n  // trigger ckecked event, if checkboxes are checked on load\n  $('.issue-checkbox input[type=\"checkbox\"]:checked').first().each((_, e) => {\n    e.checked = false;\n    $(e).click();\n  });\n\n  buttonsClickOnEnter();\n  searchUsers();\n  searchTeams();\n  searchRepositories();\n\n  initCommentForm();\n  initInstall();\n  initRepository();\n  initMigration();\n  initWikiForm();\n  initEditForm();\n  initEditor();\n  initOrganization();\n  initWebhook();\n  initAdmin();\n  initCodeView();\n  initVueApp();\n  initTeamSettings();\n  initCtrlEnterSubmit();\n  initNavbarContentToggle();\n  initTopicbar();\n  initU2FAuth();\n  initU2FRegister();\n  initIssueList();\n  initWipTitle();\n  initPullRequestReview();\n  initRepoStatusChecker();\n  initTemplateSearch();\n\n  // Repo clone url.\n  if ($('#repo-clone-url').length > 0) {\n    switch (localStorage.getItem('repo-clone-protocol')) {\n      case 'ssh':\n        if ($('#repo-clone-ssh').click().length === 0) {\n          $('#repo-clone-https').click();\n        }\n        break;\n      default:\n        $('#repo-clone-https').click();\n        break;\n    }\n  }\n\n  const routes = {\n    'div.user.settings': initUserSettings,\n    'div.repository.settings.collaboration': initRepositoryCollaboration\n  };\n\n  let selector;\n  for (selector in routes) {\n    if ($(selector).length > 0) {\n      routes[selector]();\n      break;\n    }\n  }\n\n  const $cloneAddr = $('#clone_addr');\n  $cloneAddr.change(() => {\n    const $repoName = $('#repo_name');\n    if ($cloneAddr.val().length > 0 && $repoName.val().length === 0) { // Only modify if repo_name input is blank\n      $repoName.val($cloneAddr.val().match(/^(.*\\/)?((.+?)(\\.git)?)$/)[3]);\n    }\n  });\n});\n\nfunction changeHash(hash) {\n  if (window.history.pushState) {\n    window.history.pushState(null, null, hash);\n  } else {\n    window.location.hash = hash;\n  }\n}\n\nfunction deSelect() {\n  if (window.getSelection) {\n    window.getSelection().removeAllRanges();\n  } else {\n    document.selection.empty();\n  }\n}\n\nfunction selectRange($list, $select, $from) {\n  $list.removeClass('active');\n  if ($from) {\n    let a = parseInt($select.attr('rel').substr(1));\n    let b = parseInt($from.attr('rel').substr(1));\n    let c;\n    if (a !== b) {\n      if (a > b) {\n        c = a;\n        a = b;\n        b = c;\n      }\n      const classes = [];\n      for (let i = a; i <= b; i++) {\n        classes.push(`.L${i}`);\n      }\n      $list.filter(classes.join(',')).addClass('active');\n      changeHash(`#L${a}-L${b}`);\n      return;\n    }\n  }\n  $select.addClass('active');\n  changeHash(`#${$select.attr('rel')}`);\n}\n\n$(() => {\n  // Warn users that try to leave a page after entering data into a form.\n  // Except on sign-in pages, and for forms marked as 'ignore-dirty'.\n  if ($('.user.signin').length === 0) {\n    $('form:not(.ignore-dirty)').areYouSure();\n  }\n\n  // Parse SSH Key\n  $('#ssh-key-content').on('change paste keyup', function () {\n    const arrays = $(this).val().split(' ');\n    const $title = $('#ssh-key-title');\n    if ($title.val() === '' && arrays.length === 3 && arrays[2] !== '') {\n      $title.val(arrays[2]);\n    }\n  });\n});\n\nfunction showDeletePopup() {\n  const $this = $(this);\n  let filter = '';\n  if ($this.attr('id')) {\n    filter += `#${$this.attr('id')}`;\n  }\n\n  const dialog = $(`.delete.modal${filter}`);\n  dialog.find('.name').text($this.data('name'));\n\n  dialog.modal({\n    closable: false,\n    onApprove() {\n      if ($this.data('type') === 'form') {\n        $($this.data('form')).submit();\n        return;\n      }\n\n      $.post($this.data('url'), {\n        _csrf: csrf,\n        id: $this.data('id')\n      }).done((data) => {\n        window.location.href = data.redirect;\n      });\n    }\n  }).modal('show');\n  return false;\n}\n\nfunction showAddAllPopup() {\n  const $this = $(this);\n  let filter = '';\n  if ($this.attr('id')) {\n    filter += `#${$this.attr('id')}`;\n  }\n\n  const dialog = $(`.addall.modal${filter}`);\n  dialog.find('.name').text($this.data('name'));\n\n  dialog.modal({\n    closable: false,\n    onApprove() {\n      if ($this.data('type') === 'form') {\n        $($this.data('form')).submit();\n        return;\n      }\n\n      $.post($this.data('url'), {\n        _csrf: csrf,\n        id: $this.data('id')\n      }).done((data) => {\n        window.location.href = data.redirect;\n      });\n    }\n  }).modal('show');\n  return false;\n}\n\nfunction initVueComponents() {\n  const vueDelimeters = ['${', '}'];\n\n  Vue.component('repo-search', {\n    delimiters: vueDelimeters,\n\n    props: {\n      searchLimit: {\n        type: Number,\n        default: 10\n      },\n      suburl: {\n        type: String,\n        required: true\n      },\n      uid: {\n        type: Number,\n        required: true\n      },\n      organizations: {\n        type: Array,\n        default: []\n      },\n      isOrganization: {\n        type: Boolean,\n        default: true\n      },\n      canCreateOrganization: {\n        type: Boolean,\n        default: false\n      },\n      organizationsTotalCount: {\n        type: Number,\n        default: 0\n      },\n      moreReposLink: {\n        type: String,\n        default: ''\n      }\n    },\n\n    data() {\n      return {\n        tab: 'repos',\n        repos: [],\n        reposTotalCount: 0,\n        reposFilter: 'all',\n        searchQuery: '',\n        isLoading: false,\n        repoTypes: {\n          all: {\n            count: 0,\n            searchMode: '',\n          },\n          forks: {\n            count: 0,\n            searchMode: 'fork',\n          },\n          mirrors: {\n            count: 0,\n            searchMode: 'mirror',\n          },\n          sources: {\n            count: 0,\n            searchMode: 'source',\n          },\n          collaborative: {\n            count: 0,\n            searchMode: 'collaborative',\n          },\n        }\n      };\n    },\n\n    computed: {\n      showMoreReposLink() {\n        return this.repos.length > 0 && this.repos.length < this.repoTypes[this.reposFilter].count;\n      },\n      searchURL() {\n        return `${this.suburl}/api/v1/repos/search?sort=updated&order=desc&uid=${this.uid}&q=${this.searchQuery\n        }&limit=${this.searchLimit}&mode=${this.repoTypes[this.reposFilter].searchMode\n        }${this.reposFilter !== 'all' ? '&exclusive=1' : ''}`;\n      },\n      repoTypeCount() {\n        return this.repoTypes[this.reposFilter].count;\n      }\n    },\n\n    mounted() {\n      this.searchRepos(this.reposFilter);\n\n      const self = this;\n      Vue.nextTick(() => {\n        self.$refs.search.focus();\n      });\n    },\n\n    methods: {\n      changeTab(t) {\n        this.tab = t;\n      },\n\n      changeReposFilter(filter) {\n        this.reposFilter = filter;\n        this.repos = [];\n        this.repoTypes[filter].count = 0;\n        this.searchRepos(filter);\n      },\n\n      showRepo(repo, filter) {\n        switch (filter) {\n          case 'sources':\n            return repo.owner.id === this.uid && !repo.mirror && !repo.fork;\n          case 'forks':\n            return repo.owner.id === this.uid && !repo.mirror && repo.fork;\n          case 'mirrors':\n            return repo.mirror;\n          case 'collaborative':\n            return repo.owner.id !== this.uid && !repo.mirror;\n          default:\n            return true;\n        }\n      },\n\n      searchRepos(reposFilter) {\n        const self = this;\n\n        this.isLoading = true;\n\n        const searchedMode = this.repoTypes[reposFilter].searchMode;\n        const searchedURL = this.searchURL;\n        const searchedQuery = this.searchQuery;\n\n        $.getJSON(searchedURL, (result, _textStatus, request) => {\n          if (searchedURL === self.searchURL) {\n            self.repos = result.data;\n            const count = request.getResponseHeader('X-Total-Count');\n            if (searchedQuery === '' && searchedMode === '') {\n              self.reposTotalCount = count;\n            }\n            self.repoTypes[reposFilter].count = count;\n          }\n        }).always(() => {\n          if (searchedURL === self.searchURL) {\n            self.isLoading = false;\n          }\n        });\n      },\n\n      repoClass(repo) {\n        if (repo.fork) {\n          return 'octicon octicon-repo-forked';\n        } if (repo.mirror) {\n          return 'octicon octicon-repo-clone';\n        } if (repo.private) {\n          return 'octicon octicon-lock';\n        }\n        return 'octicon octicon-repo';\n      }\n    }\n  });\n}\n\nfunction initCtrlEnterSubmit() {\n  $('.js-quick-submit').keydown(function (e) {\n    if (((e.ctrlKey && !e.altKey) || e.metaKey) && (e.keyCode === 13 || e.keyCode === 10)) {\n      $(this).closest('form').submit();\n    }\n  });\n}\n\nfunction initVueApp() {\n  const el = document.getElementById('app');\n  if (!el) {\n    return;\n  }\n\n  initVueComponents();\n\n  new Vue({\n    delimiters: ['${', '}'],\n    el,\n\n    data: {\n      searchLimit: document.querySelector('meta[name=_search_limit]').content,\n      suburl: document.querySelector('meta[name=_suburl]').content,\n      uid: document.querySelector('meta[name=_context_uid]').content,\n    },\n  });\n}\n\nwindow.timeAddManual = function () {\n  $('.mini.modal')\n    .modal({\n      duration: 200,\n      onApprove() {\n        $('#add_time_manual_form').submit();\n      }\n    }).modal('show');\n};\n\nwindow.toggleStopwatch = function () {\n  $('#toggle_stopwatch_form').submit();\n};\nwindow.cancelStopwatch = function () {\n  $('#cancel_stopwatch_form').submit();\n};\n\nwindow.initHeatmap = function (appElementId, heatmapUser, locale) {\n  const el = document.getElementById(appElementId);\n  if (!el) {\n    return;\n  }\n\n  locale = locale || {};\n\n  locale.contributions = locale.contributions || 'contributions';\n  locale.no_contributions = locale.no_contributions || 'No contributions';\n\n  const vueDelimeters = ['${', '}'];\n\n  Vue.component('activity-heatmap', {\n    delimiters: vueDelimeters,\n\n    props: {\n      user: {\n        type: String,\n        required: true\n      },\n      suburl: {\n        type: String,\n        required: true\n      },\n      locale: {\n        type: Object,\n        required: true\n      }\n    },\n\n    data() {\n      return {\n        isLoading: true,\n        colorRange: [],\n        endDate: null,\n        values: [],\n        totalContributions: 0,\n      };\n    },\n\n    mounted() {\n      this.colorRange = [\n        this.getColor(0),\n        this.getColor(1),\n        this.getColor(2),\n        this.getColor(3),\n        this.getColor(4),\n        this.getColor(5)\n      ];\n      this.endDate = new Date();\n      this.loadHeatmap(this.user);\n    },\n\n    methods: {\n      loadHeatmap(userName) {\n        const self = this;\n        $.get(`${this.suburl}/api/v1/users/${userName}/heatmap`, (chartRawData) => {\n          const chartData = [];\n          for (let i = 0; i < chartRawData.length; i++) {\n            self.totalContributions += chartRawData[i].contributions;\n            chartData[i] = { date: new Date(chartRawData[i].timestamp * 1000), count: chartRawData[i].contributions };\n          }\n          self.values = chartData;\n          self.isLoading = false;\n        });\n      },\n\n      getColor(idx) {\n        const el = document.createElement('div');\n        el.className = `heatmap-color-${idx}`;\n        document.body.appendChild(el);\n\n        const color = getComputedStyle(el).backgroundColor;\n\n        document.body.removeChild(el);\n\n        return color;\n      }\n    },\n\n    template: '<div><div v-show=\"isLoading\"><slot name=\"loading\"></slot></div><h4 class=\"total-contributions\" v-if=\"!isLoading\"><span v-html=\"totalContributions\"></span> total contributions in the last 12 months</h4><calendar-heatmap v-show=\"!isLoading\" :locale=\"locale\" :no-data-text=\"locale.no_contributions\" :tooltip-unit=\"locale.contributions\" :end-date=\"endDate\" :values=\"values\" :range-color=\"colorRange\" />'\n  });\n\n  new Vue({\n    delimiters: vueDelimeters,\n    el,\n\n    data: {\n      suburl: document.querySelector('meta[name=_suburl]').content,\n      heatmapUser,\n      locale\n    },\n  });\n};\n\nfunction initFilterBranchTagDropdown(selector) {\n  $(selector).each(function () {\n    const $dropdown = $(this);\n    const $data = $dropdown.find('.data');\n    const data = {\n      items: [],\n      mode: $data.data('mode'),\n      searchTerm: '',\n      noResults: '',\n      canCreateBranch: false,\n      menuVisible: false,\n      active: 0\n    };\n    $data.find('.item').each(function () {\n      data.items.push({\n        name: $(this).text(),\n        url: $(this).data('url'),\n        branch: $(this).hasClass('branch'),\n        tag: $(this).hasClass('tag'),\n        selected: $(this).hasClass('selected')\n      });\n    });\n    $data.remove();\n    new Vue({\n      delimiters: ['${', '}'],\n      el: this,\n      data,\n\n      beforeMount() {\n        const vm = this;\n\n        this.noResults = vm.$el.getAttribute('data-no-results');\n        this.canCreateBranch = vm.$el.getAttribute('data-can-create-branch') === 'true';\n\n        document.body.addEventListener('click', (event) => {\n          if (vm.$el.contains(event.target)) {\n            return;\n          }\n          if (vm.menuVisible) {\n            Vue.set(vm, 'menuVisible', false);\n          }\n        });\n      },\n\n      watch: {\n        menuVisible(visible) {\n          if (visible) {\n            this.focusSearchField();\n          }\n        }\n      },\n\n      computed: {\n        filteredItems() {\n          const vm = this;\n\n          const items = vm.items.filter((item) => ((vm.mode === 'branches' && item.branch)\n                                || (vm.mode === 'tags' && item.tag))\n                            && (!vm.searchTerm\n                                || item.name.toLowerCase().indexOf(vm.searchTerm.toLowerCase()) >= 0));\n\n          vm.active = (items.length === 0 && vm.showCreateNewBranch ? 0 : -1);\n\n          return items;\n        },\n        showNoResults() {\n          return this.filteredItems.length === 0\n                            && !this.showCreateNewBranch;\n        },\n        showCreateNewBranch() {\n          const vm = this;\n          if (!this.canCreateBranch || !vm.searchTerm || vm.mode === 'tags') {\n            return false;\n          }\n\n          return vm.items.filter((item) => item.name.toLowerCase() === vm.searchTerm.toLowerCase()).length === 0;\n        }\n      },\n\n      methods: {\n        selectItem(item) {\n          const prev = this.getSelected();\n          if (prev !== null) {\n            prev.selected = false;\n          }\n          item.selected = true;\n          window.location.href = item.url;\n        },\n        createNewBranch() {\n          if (!this.showCreateNewBranch) {\n            return;\n          }\n          this.$refs.newBranchForm.submit();\n        },\n        focusSearchField() {\n          const vm = this;\n          Vue.nextTick(() => {\n            vm.$refs.searchField.focus();\n          });\n        },\n        getSelected() {\n          for (let i = 0, j = this.items.length; i < j; ++i) {\n            if (this.items[i].selected) return this.items[i];\n          }\n          return null;\n        },\n        getSelectedIndexInFiltered() {\n          for (let i = 0, j = this.filteredItems.length; i < j; ++i) {\n            if (this.filteredItems[i].selected) return i;\n          }\n          return -1;\n        },\n        scrollToActive() {\n          let el = this.$refs[`listItem${this.active}`];\n          if (!el || el.length === 0) {\n            return;\n          }\n          if (Array.isArray(el)) {\n            el = el[0];\n          }\n\n          const cont = this.$refs.scrollContainer;\n\n          if (el.offsetTop < cont.scrollTop) {\n            cont.scrollTop = el.offsetTop;\n          } else if (el.offsetTop + el.clientHeight > cont.scrollTop + cont.clientHeight) {\n            cont.scrollTop = el.offsetTop + el.clientHeight - cont.clientHeight;\n          }\n        },\n        keydown(event) {\n          const vm = this;\n          if (event.keyCode === 40) {\n            // arrow down\n            event.preventDefault();\n\n            if (vm.active === -1) {\n              vm.active = vm.getSelectedIndexInFiltered();\n            }\n\n            if (vm.active + (vm.showCreateNewBranch ? 0 : 1) >= vm.filteredItems.length) {\n              return;\n            }\n            vm.active++;\n            vm.scrollToActive();\n          }\n          if (event.keyCode === 38) {\n            // arrow up\n            event.preventDefault();\n\n            if (vm.active === -1) {\n              vm.active = vm.getSelectedIndexInFiltered();\n            }\n\n            if (vm.active <= 0) {\n              return;\n            }\n            vm.active--;\n            vm.scrollToActive();\n          }\n          if (event.keyCode === 13) {\n            // enter\n            event.preventDefault();\n\n            if (vm.active >= vm.filteredItems.length) {\n              vm.createNewBranch();\n            } else if (vm.active >= 0) {\n              vm.selectItem(vm.filteredItems[vm.active]);\n            }\n          }\n          if (event.keyCode === 27) {\n            // escape\n            event.preventDefault();\n            vm.menuVisible = false;\n          }\n        }\n      }\n    });\n  });\n}\n\n$('.commit-button').click(function (e) {\n  e.preventDefault();\n  $(this).parent().find('.commit-body').toggle();\n});\n\nfunction initNavbarContentToggle() {\n  const content = $('#navbar');\n  const toggle = $('#navbar-expand-toggle');\n  let isExpanded = false;\n  toggle.click(() => {\n    isExpanded = !isExpanded;\n    if (isExpanded) {\n      content.addClass('shown');\n      toggle.addClass('active');\n    } else {\n      content.removeClass('shown');\n      toggle.removeClass('active');\n    }\n  });\n}\n\nfunction initTopicbar() {\n  const mgrBtn = $('#manage_topic');\n  const editDiv = $('#topic_edit');\n  const viewDiv = $('#repo-topics');\n  const saveBtn = $('#save_topic');\n  const topicDropdown = $('#topic_edit .dropdown');\n  const topicForm = $('#topic_edit.ui.form');\n  const topicPrompts = getPrompts();\n\n  mgrBtn.click(() => {\n    viewDiv.hide();\n    editDiv.css('display', ''); // show Semantic UI Grid\n  });\n\n  function getPrompts() {\n    const hidePrompt = $('div.hide#validate_prompt');\n    const prompts = {\n      countPrompt: hidePrompt.children('#count_prompt').text(),\n      formatPrompt: hidePrompt.children('#format_prompt').text()\n    };\n    hidePrompt.remove();\n    return prompts;\n  }\n\n  saveBtn.click(() => {\n    const topics = $('input[name=topics]').val();\n\n    $.post(saveBtn.data('link'), {\n      _csrf: csrf,\n      topics\n    }, (_data, _textStatus, xhr) => {\n      if (xhr.responseJSON.status === 'ok') {\n        viewDiv.children('.topic').remove();\n        if (topics.length) {\n          const topicArray = topics.split(',');\n\n          const last = viewDiv.children('a').last();\n          for (let i = 0; i < topicArray.length; i++) {\n            $(`<div class=\"ui small label topic\" style=\"cursor:pointer;\">${topicArray[i]}</div>`).insertBefore(last);\n          }\n        }\n        editDiv.css('display', 'none');\n        viewDiv.show();\n      }\n    }).fail((xhr) => {\n      if (xhr.status === 422) {\n        if (xhr.responseJSON.invalidTopics.length > 0) {\n          topicPrompts.formatPrompt = xhr.responseJSON.message;\n\n          const { invalidTopics } = xhr.responseJSON;\n          const topicLables = topicDropdown.children('a.ui.label');\n\n          topics.split(',').forEach((value, index) => {\n            for (let i = 0; i < invalidTopics.length; i++) {\n              if (invalidTopics[i] === value) {\n                topicLables.eq(index).removeClass('green').addClass('red');\n              }\n            }\n          });\n        } else {\n          topicPrompts.countPrompt = xhr.responseJSON.message;\n        }\n      }\n    }).always(() => {\n      topicForm.form('validate form');\n    });\n  });\n\n  topicDropdown.dropdown({\n    allowAdditions: true,\n    forceSelection: false,\n    fields: { name: 'description', value: 'data-value' },\n    saveRemoteData: false,\n    label: {\n      transition: 'horizontal flip',\n      duration: 200,\n      variation: false,\n      blue: true,\n      basic: true,\n    },\n    className: {\n      label: 'ui small label'\n    },\n    apiSettings: {\n      url: `${suburl}/api/v1/topics/search?q={query}`,\n      throttle: 500,\n      cache: false,\n      onResponse(res) {\n        const formattedResponse = {\n          success: false,\n          results: [],\n        };\n        const stripTags = function (text) {\n          return text.replace(/<[^>]*>?/gm, '');\n        };\n\n        const query = stripTags(this.urlData.query.trim());\n        let found_query = false;\n        const current_topics = [];\n        topicDropdown.find('div.label.visible.topic,a.label.visible').each((_, e) => { current_topics.push(e.dataset.value); });\n\n        if (res.topics) {\n          let found = false;\n          for (let i = 0; i < res.topics.length; i++) {\n            // skip currently added tags\n            if (current_topics.indexOf(res.topics[i].topic_name) !== -1) {\n              continue;\n            }\n\n            if (res.topics[i].topic_name.toLowerCase() === query.toLowerCase()) {\n              found_query = true;\n            }\n            formattedResponse.results.push({ description: res.topics[i].topic_name, 'data-value': res.topics[i].topic_name });\n            found = true;\n          }\n          formattedResponse.success = found;\n        }\n\n        if (query.length > 0 && !found_query) {\n          formattedResponse.success = true;\n          formattedResponse.results.unshift({ description: query, 'data-value': query });\n        } else if (query.length > 0 && found_query) {\n          formattedResponse.results.sort((a, b) => {\n            if (a.description.toLowerCase() === query.toLowerCase()) return -1;\n            if (b.description.toLowerCase() === query.toLowerCase()) return 1;\n            if (a.description > b.description) return -1;\n            if (a.description < b.description) return 1;\n            return 0;\n          });\n        }\n\n\n        return formattedResponse;\n      },\n    },\n    onLabelCreate(value) {\n      value = value.toLowerCase().trim();\n      this.attr('data-value', value).contents().first().replaceWith(value);\n      return $(this);\n    },\n    onAdd(addedValue, _addedText, $addedChoice) {\n      addedValue = addedValue.toLowerCase().trim();\n      $($addedChoice).attr('data-value', addedValue);\n      $($addedChoice).attr('data-text', addedValue);\n    }\n  });\n\n  $.fn.form.settings.rules.validateTopic = function (_values, regExp) {\n    const topics = topicDropdown.children('a.ui.label');\n    const status = topics.length === 0 || topics.last().attr('data-value').match(regExp);\n    if (!status) {\n      topics.last().removeClass('green').addClass('red');\n    }\n    return status && topicDropdown.children('a.ui.label.red').length === 0;\n  };\n\n  topicForm.form({\n    on: 'change',\n    inline: true,\n    fields: {\n      topics: {\n        identifier: 'topics',\n        rules: [\n          {\n            type: 'validateTopic',\n            value: /^[a-z0-9][a-z0-9-]{1,35}$/,\n            prompt: topicPrompts.formatPrompt\n          },\n          {\n            type: 'maxCount[25]',\n            prompt: topicPrompts.countPrompt\n          }\n        ]\n      },\n    }\n  });\n}\nwindow.toggleDeadlineForm = function () {\n  $('#deadlineForm').fadeToggle(150);\n};\n\nwindow.setDeadline = function () {\n  const deadline = $('#deadlineDate').val();\n  updateDeadline(deadline);\n};\n\nfunction updateDeadline(deadlineString) {\n  $('#deadline-err-invalid-date').hide();\n  $('#deadline-loader').addClass('loading');\n\n  let realDeadline = null;\n  if (deadlineString !== '') {\n    const newDate = Date.parse(deadlineString);\n\n    if (Number.isNaN(newDate)) {\n      $('#deadline-loader').removeClass('loading');\n      $('#deadline-err-invalid-date').show();\n      return false;\n    }\n    realDeadline = new Date(newDate);\n  }\n\n  $.ajax(`${$('#update-issue-deadline-form').attr('action')}/deadline`, {\n    data: JSON.stringify({\n      due_date: realDeadline,\n    }),\n    headers: {\n      'X-Csrf-Token': csrf,\n      'X-Remote': true,\n    },\n    contentType: 'application/json',\n    type: 'POST',\n    success() {\n      reload();\n    },\n    error() {\n      $('#deadline-loader').removeClass('loading');\n      $('#deadline-err-invalid-date').show();\n    }\n  });\n}\n\nwindow.deleteDependencyModal = function (id, type) {\n  $('.remove-dependency')\n    .modal({\n      closable: false,\n      duration: 200,\n      onApprove() {\n        $('#removeDependencyID').val(id);\n        $('#dependencyType').val(type);\n        $('#removeDependencyForm').submit();\n      }\n    }).modal('show');\n};\n\nfunction initIssueList() {\n  const repolink = $('#repolink').val();\n  const repoId = $('#repoId').val();\n  const crossRepoSearch = $('#crossRepoSearch').val();\n  let issueSearchUrl = `${suburl}/api/v1/repos/${repolink}/issues?q={query}`;\n  if (crossRepoSearch === 'true') {\n    issueSearchUrl = `${suburl}/api/v1/repos/issues/search?q={query}&priority_repo_id=${repoId}`;\n  }\n  $('#new-dependency-drop-list')\n    .dropdown({\n      apiSettings: {\n        url: issueSearchUrl,\n        onResponse(response) {\n          const filteredResponse = { success: true, results: [] };\n          const currIssueId = $('#new-dependency-drop-list').data('issue-id');\n          // Parse the response from the api to work with our dropdown\n          $.each(response, (_i, issue) => {\n            // Don't list current issue in the dependency list.\n            if (issue.id === currIssueId) {\n              return;\n            }\n            filteredResponse.results.push({\n              name: `#${issue.number} ${htmlEncode(issue.title)\n              }<div class=\"text small dont-break-out\">${htmlEncode(issue.repository.full_name)}</div>`,\n              value: issue.id\n            });\n          });\n          return filteredResponse;\n        },\n        cache: false,\n      },\n\n      fullTextSearch: true\n    });\n\n  $('.menu a.label-filter-item').each(function () {\n    $(this).click(function (e) {\n      if (e.altKey) {\n        e.preventDefault();\n\n        const href = $(this).attr('href');\n        const id = $(this).data('label-id');\n\n        const regStr = `labels=(-?[0-9]+%2c)*(${id})(%2c-?[0-9]+)*&`;\n        const newStr = 'labels=$1-$2$3&';\n\n        window.location = href.replace(new RegExp(regStr), newStr);\n      }\n    });\n  });\n\n  $('.menu .ui.dropdown.label-filter').keydown((e) => {\n    if (e.altKey && e.keyCode === 13) {\n      const selectedItems = $('.menu .ui.dropdown.label-filter .menu .item.selected');\n\n      if (selectedItems.length > 0) {\n        const item = $(selectedItems[0]);\n\n        const href = item.attr('href');\n        const id = item.data('label-id');\n\n        const regStr = `labels=(-?[0-9]+%2c)*(${id})(%2c-?[0-9]+)*&`;\n        const newStr = 'labels=$1-$2$3&';\n\n        window.location = href.replace(new RegExp(regStr), newStr);\n      }\n    }\n  });\n}\nwindow.cancelCodeComment = function (btn) {\n  const form = $(btn).closest('form');\n  if (form.length > 0 && form.hasClass('comment-form')) {\n    form.addClass('hide');\n    form.parent().find('button.comment-form-reply').show();\n  } else {\n    form.closest('.comment-code-cloud').remove();\n  }\n};\nwindow.onOAuthLoginClick = function () {\n  const oauthLoader = $('#oauth2-login-loader');\n  const oauthNav = $('#oauth2-login-navigator');\n\n  oauthNav.hide();\n  oauthLoader.removeClass('disabled');\n\n  setTimeout(() => {\n    // recover previous content to let user try again\n    // usually redirection will be performed before this action\n    oauthLoader.addClass('disabled');\n    oauthNav.show();\n  }, 5000);\n};\n"],"sourceRoot":""}
>>>>>>> modernize js and use babel
